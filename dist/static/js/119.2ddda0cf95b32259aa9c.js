webpackJsonp([119],{XofC:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=a("woOf"),s=a.n(l),i=a("XLwt"),n=a.n(i),o=(a("I9qK"),{components:{LZXX:a("yHYR").a},data:function(){return{pageC:!0,tableDataC:[],tableHeader:[],rybh:"",detailsDialogVisible:!1,type:1,xid:"",page:0,fjlist:[],pcslist:[],CurrentPage:1,pageSize:10,TotalResult:0,pd:{LRRQ_DateRange:{},LRDW_BH_Like:"1",LRDW_BH:"1",DJDWXZQH:"3201",LB_SFBG:"2",ZSLX:"0"},pdTu:{},pd0:{begin:"",end:""},checkedfj:!1,checkedpcs:!1,options:[{value:10,label:"10"},{value:20,label:"20"},{value:30,label:"30"}],tableData:[],lineChart:null}},mounted:function(){this.$store.dispatch("getGjdq"),this.$store.dispatch("getZjzl"),this.$store.dispatch("getQzzl"),this.$store.dispatch("getPcs"),this.$store.dispatch("getRjsy"),this.$store.dispatch("getZsbg"),this.getFJ(),this.getList()},activated:function(){},methods:{changeTu:function(){this.pageC=!this.pageC,1==this.pageC?this.getList():this.getListC()},getListC:function(){var t=this;""==this.pd0.begin?this.pd.LRRQ_DateRange.begin="":null==this.pd0.begin?this.pd.LRRQ_DateRange.begin=null:this.pd.LRRQ_DateRange.begin=this.pd0.begin+"000000",""==this.pd0.end?this.pd.LRRQ_DateRange.end="":null==this.pd0.end?this.pd.LRRQ_DateRange.end=null:this.pd.LRRQ_DateRange.end=this.pd0.end+"000000",this.$api.post(this.Global.aport4+"/eS_LZ_LZXXController/getListByParam",{pd:this.pd},function(e){e.success&&(t.tableHeader=e.data.table,t.tableDataC=e.data.resultList)})},downloadC:function(){var t=this;0!=this.tableDataC.length?(""==this.pd0.begin?this.pd.LRRQ_DateRange.begin="":null==this.pd0.begin?this.pd.LRRQ_DateRange.begin=null:this.pd.LRRQ_DateRange.begin=this.pd0.begin+"000000",""==this.pd0.end?this.pd.LRRQ_DateRange.end="":null==this.pd0.end?this.pd.LRRQ_DateRange.end=null:this.pd.LRRQ_DateRange.end=this.pd0.end+"000000",this.$api.post(this.Global.aport4+"/eS_LZ_LZXXController/exportList",{pd:this.pd},function(e){t.downloadM(e)},function(t){},{},"blob")):this.$message({message:"列表无数据！",type:"warning"})},details:function(t){this.xid=t.DTID,this.rybh=t.RYBH,this.detailsDialogVisible=!0},pageSizeChange:function(t){this.getListTu(this.CurrentPage,t,this.pdTu)},handleCurrentChange:function(t){this.getListTu(t,this.pageSize,this.pdTu)},getRadiofj:function(t){1==t?this.pd.LRDW_BH_Like="0":0==t&&(this.pd.LRDW_BH_Like="1")},getRadiopcs:function(t){1==t?this.pd.LRDW_BH="0":0==t&&(this.pd.LRDW_BH="1")},getFJ:function(){var t=this,e={operatorId:this.$store.state.uid,operatorNm:this.$store.state.uname};this.$api.post(this.Global.aport2+"/data_report/selectSsfjDm",e,function(e){t.fjlist=e.data.SSFJ})},getList:function(){var t=this;""==this.pd0.begin?this.pd.LRRQ_DateRange.begin="":null==this.pd0.begin?this.pd.LRRQ_DateRange.begin=null:this.pd.LRRQ_DateRange.begin=this.pd0.begin+"000000",""==this.pd0.end?this.pd.LRRQ_DateRange.end="":null==this.pd0.end?this.pd.LRRQ_DateRange.end=null:this.pd.LRRQ_DateRange.end=this.pd0.end+"000000";var e={pd:this.pd};this.$api.post(this.Global.aport4+"/eS_LZ_LZXXController/getCountByParam",e,function(e){t.drawLine(e.data.legend,e.data.header,e.data.series)})},getPCS:function(t){var e=this,a={fjdmList:t};this.$api.post(this.Global.aport3+"/data_report/selectPcsDm",a,function(t){t.success&&(e.pcslist=t.data.PCS)})},getListTu:function(t,e,a){var l=this,s={currentPage:t,showCount:e,pd:a};this.$api.post(this.Global.aport4+"/eS_LZ_LZXXController/getLzListByParams",s,function(t){t.success&&(l.tableData=t.data.resultList,l.TotalResult=t.data.totalResult)})},drawLine:function(t,e,a){this.lineChart=n.a.init(document.getElementById("echarts")),window.onresize=n.a.init(document.getElementById("echarts")).resize;for(var l={normal:{show:!0,position:"top"}},i=0;i<a.length;i++)for(var o=0,p=0;p<a[i].data.length;p++)0!=(o+=a[i].data[p])&&(a[i].label=l);var d=this;d.lineChart.setOption({color:["#5793f3","#d14a61","#675bba"],tooltip:{axisPointer:{type:"cross"}},legend:{data:t},grid:{top:70,bottom:50},xAxis:[{type:"category",axisTick:{alignWithLabel:!0},axisLine:{onZero:!1},data:e}],yAxis:[{type:"value"}],series:a},!0),d.lineChart.off("click"),d.lineChart.on("click",function(t){console.log(t);var a={};(a=s()({},d.pd)).hasOwnProperty("LRDW_BH_Like")&&delete a.LRDW_BH_Like,a.hasOwnProperty("LRDW_BH")&&delete a.LRDW_BH,a.LRRQ_DateRange={begin:""==d.pd0.begin?"":null==d.pd0.begin?null:d.pd0.begin+"000000",end:""==d.pd0.end?"":null==d.pd0.end?null:d.pd0.end+"000000"},a.HEADER=e,a.TIME=t.name,a.DW=t.seriesName,d.pdTu=a,console.log("ppppp",a,d.pd),d.page=1,d.CurrentPage=1,d.getListTu(d.CurrentPage,d.pageSize,d.pdTu)}),d.lineChart.resize()},exportexcel:function(){var t=this;console.log("this.pddc",this.pdTu);var e={currentPage:1,showCount:1e4,pd:this.pdTu};this.$api.post(this.Global.aport4+"/eS_LZ_LZXXController/export",e,function(e){t.downloadM(e,"宾馆临住信息趋势")},function(t){},{},"blob")},downloadM:function(t,e){if(t){var a=window.URL.createObjectURL(new Blob([t],{type:"application/xls"})),l=document.createElement("a");l.style.display="none",l.href=a,l.setAttribute("download",e+this.format(new Date,"yyyyMMddhhmmss")+".xls"),document.body.appendChild(l),l.click()}}}}),p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"yymain"},[a("div",{staticClass:"yytitle"},[a("el-row",{attrs:{type:"flex"}},[a("el-col",{staticClass:"br pr-20",attrs:{span:22}},[a("el-row",{attrs:{align:"center",gutter:2}},[a("el-col",{staticClass:"input-item",attrs:{sm:24,md:12,lg:8}},[a("span",{staticClass:"input-text"},[t._v("时间范围：")]),t._v(" "),a("div",{staticClass:"input-input t-flex t-date"},[a("el-date-picker",{attrs:{format:"yyyy-MM-dd",type:"date",size:"small","value-format":"yyyyMMdd",placeholder:"开始时间"},model:{value:t.pd0.begin,callback:function(e){t.$set(t.pd0,"begin",e)},expression:"pd0.begin"}}),t._v(" "),a("span",{staticClass:"septum"},[t._v("-")]),t._v(" "),a("el-date-picker",{attrs:{format:"yyyy-MM-dd",type:"date",size:"small","value-format":"yyyyMMdd",placeholder:"结束时间"},model:{value:t.pd0.end,callback:function(e){t.$set(t.pd0,"end",e)},expression:"pd0.end"}})],1)]),t._v(" "),a("el-col",{staticClass:"input-item",attrs:{sm:24,md:12,lg:8}},[a("span",{staticClass:"input-text"},[t._v("证件种类：")]),t._v(" "),a("el-select",{staticClass:"input-input",attrs:{filterable:"",clearable:"","default-first-option":"",placeholder:"请选择",size:"small"},model:{value:t.pd.ZJZL,callback:function(e){t.$set(t.pd,"ZJZL",e)},expression:"pd.ZJZL"}},t._l(t.$store.state.zjzl,function(t){return a("el-option",{key:t.dm,attrs:{label:t.dm+" - "+t.mc,value:t.dm}})}),1)],1),t._v(" "),a("el-col",{staticClass:"input-item",attrs:{sm:24,md:12,lg:8}},[a("span",{staticClass:"input-text"},[t._v("签证种类：")]),t._v(" "),a("el-select",{staticClass:"input-input",attrs:{filterable:"",clearable:"","default-first-option":"",placeholder:"请选择",size:"small"},model:{value:t.pd.QZZl,callback:function(e){t.$set(t.pd,"QZZl",e)},expression:"pd.QZZl"}},t._l(t.$store.state.rjqzzl,function(t){return a("el-option",{key:t.dm,attrs:{label:t.dm+" - "+t.mc,value:t.dm}})}),1)],1),t._v(" "),a("el-col",{staticClass:"input-item",attrs:{sm:24,md:12,lg:8}},[a("span",{staticClass:"input-text"},[t._v("国家地区：")]),t._v(" "),a("el-select",{staticClass:"input-input",attrs:{filterable:"",clearable:"","default-first-option":"",placeholder:"请选择",size:"small"},model:{value:t.pd.GJDQ,callback:function(e){t.$set(t.pd,"GJDQ",e)},expression:"pd.GJDQ"}},t._l(t.$store.state.gjdq,function(t){return a("el-option",{key:t.dm,attrs:{label:t.dm+" - "+t.mc,value:t.dm}})}),1)],1),t._v(" "),a("el-col",{staticClass:"input-item",attrs:{sm:24,md:12,lg:8}},[a("span",{staticClass:"input-text"},[t._v("停留事由：")]),t._v(" "),a("el-select",{staticClass:"input-input",attrs:{filterable:"",clearable:"","default-first-option":"",placeholder:"请选择",size:"small"},model:{value:t.pd.JLSY,callback:function(e){t.$set(t.pd,"JLSY",e)},expression:"pd.JLSY"}},t._l(t.$store.state.rjsy,function(t){return a("el-option",{key:t.dm,attrs:{label:t.dm+" - "+t.mc,value:t.dm}})}),1)],1),t._v(" "),a("el-col",{staticClass:"input-item",attrs:{sm:24,md:12,lg:8}},[a("span",{staticClass:"input-text"},[t._v("所属分局：")]),t._v(" "),a("div",{staticClass:"input-input t-fuzzy-8 t-flex"},[a("el-select",{attrs:{multiple:"","multiple-limit":5,"collapse-tags":"",filterable:"",clearable:"","default-first-option":"",placeholder:"请选择",size:"small"},on:{change:function(e){t.getPCS(t.pd.LRDW_Like)}},model:{value:t.pd.LRDW_Like,callback:function(e){t.$set(t.pd,"LRDW_Like",e)},expression:"pd.LRDW_Like"}},t._l(t.fjlist,function(t){return a("el-option",{key:t.dm,attrs:{label:t.dm+" - "+t.mc,value:t.dm}})}),1),t._v("  \n                    "),a("el-checkbox",{on:{change:function(e){t.getRadiofj(t.checkedfj)}},model:{value:t.checkedfj,callback:function(e){t.checkedfj=e},expression:"checkedfj"}},[t._v("包含")])],1)]),t._v(" "),a("el-col",{staticClass:"input-item",attrs:{sm:24,md:12,lg:8}},[a("span",{staticClass:"input-text"},[t._v("派出所：")]),t._v(" "),a("div",{staticClass:"input-input t-fuzzy-8 t-flex"},[a("el-select",{attrs:{multiple:"","multiple-limit":5,"collapse-tags":"",filterable:"",clearable:"","default-first-option":"",placeholder:"请选择",size:"small"},model:{value:t.pd.LRDW,callback:function(e){t.$set(t.pd,"LRDW",e)},expression:"pd.LRDW"}},t._l(t.pcslist,function(t){return a("el-option",{key:t.dm,attrs:{label:t.mc,value:t.dm}})}),1),t._v(" "),a("el-checkbox",{on:{change:function(e){t.getRadiopcs(t.checkedpcs)}},model:{value:t.checkedpcs,callback:function(e){t.checkedpcs=e},expression:"checkedpcs"}},[t._v("包含")])],1)]),t._v(" "),a("el-col",{staticClass:"input-item",attrs:{sm:24,md:12,lg:8}},[a("span",{staticClass:"input-text"},[t._v("旅馆名称：")]),t._v(" "),a("el-select",{staticClass:"input-input",attrs:{filterable:"",clearable:"","default-first-option":"",placeholder:"请选择",size:"small"},model:{value:t.pd.DJDWDM,callback:function(e){t.$set(t.pd,"DJDWDM",e)},expression:"pd.DJDWDM"}},t._l(t.$store.state.zsbg,function(t){return a("el-option",{key:t.dm,attrs:{label:t.mc,value:t.dm}})}),1)],1),t._v(" "),a("el-col",{staticClass:"input-item",attrs:{sm:24,md:12,lg:8}},[a("span",{staticClass:"input-text"},[t._v("日期选择：")]),t._v(" "),a("el-select",{staticClass:"input-input",attrs:{filterable:"","default-first-option":"",placeholder:"请选择",size:"small"},model:{value:t.pd.ZSLX,callback:function(e){t.$set(t.pd,"ZSLX",e)},expression:"pd.ZSLX"}},[a("el-option",{attrs:{value:"0",label:"0 - 请选择"}}),t._v(" "),a("el-option",{attrs:{value:"1",label:"1 - 按日查询"}}),t._v(" "),a("el-option",{attrs:{value:"2",label:"2 - 按月查询"}}),t._v(" "),a("el-option",{attrs:{value:"3",label:"3 - 按季度查询"}}),t._v(" "),a("el-option",{attrs:{value:"4",label:"4 - 按年查询"}})],1)],1)],1)],1),t._v(" "),a("el-col",{staticClass:"down-btn-area",attrs:{span:2}},[a("el-button",{attrs:{type:"success",size:"small"},on:{click:function(e){t.page=0,t.tableData=[],t.CurrentPage=1,t.TotalResult=0,t.getList()}}},[t._v("查询")])],1)],1)],1),t._v(" "),a("div",{staticClass:"yycontent"},[a("div",{staticClass:"ak-tabs"},[a("div",{staticClass:"ak-tab-item hand",class:{"ak-checked":0==t.page},on:{click:function(e){t.page=0,t.getList()}}},[t._v("\n        图表\n      ")]),t._v(" "),a("div",{staticClass:"ak-tab-item hand",class:{"ak-checked":1==t.page},on:{click:function(e){t.page=1}}},[t._v("\n        列表\n      ")])]),t._v(" "),a("div",{staticClass:"ak-tab-pane"},[a("div",{},[a("span",{staticClass:"t-fr"},[a("i",{directives:[{name:"show",rawName:"v-show",value:0==t.page,expression:"page==0"}],staticClass:"iconbtn hand",class:{"el-icon-s-grid":1==t.pageC,"el-icon-s-data":0==t.pageC},attrs:{title:1==t.pageC?"转为列表":"转为图表"},on:{click:function(e){t.changeTu()}}})]),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:0==t.pageC&&0==t.page,expression:"pageC==false&&page==0"}],attrs:{type:"primary",size:"small"},on:{click:function(e){t.downloadC()}}},[t._v("导出")]),t._v(" "),a("div",{staticStyle:{clear:"both"}})],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.page,expression:"page==0"}]},[a("div",{directives:[{name:"show",rawName:"v-show",value:1==t.pageC,expression:"pageC==true"}],staticClass:"chart",staticStyle:{width:"100%"}},[a("div",{staticStyle:{width:"100%",height:"400px"},attrs:{id:"echarts"}})]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.pageC,expression:"pageC==false"}],staticClass:"t-mt10"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableDataC,border:""}},[a("el-table-column",{attrs:{prop:"rq",label:"日期"}}),t._v(" "),t._l(t.tableHeader,function(t,e){return a("el-table-column",{key:e,attrs:{prop:t.code,label:t.lable}})})],2)],1)]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:1==t.page,expression:"page==1"}],staticStyle:{width:"100%","text-align":"right"}},[a("el-button",{staticClass:"mb-5",attrs:{type:"primary",size:"small"},on:{click:t.exportexcel}},[t._v("导出")]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[a("el-table-column",{attrs:{prop:"YWXM",label:"英文姓名"}}),t._v(" "),a("el-table-column",{attrs:{prop:"ZWXM",label:"中文姓名"}}),t._v(" "),a("el-table-column",{attrs:{prop:"XB_DESC",label:"性别"}}),t._v(" "),a("el-table-column",{attrs:{prop:"GJDQ_DESC",label:"国家地区"}}),t._v(" "),a("el-table-column",{attrs:{prop:"CSRQ",label:"出生日期"}}),t._v(" "),a("el-table-column",{attrs:{prop:"ZJZL_DESC",label:"证件种类"}}),t._v(" "),a("el-table-column",{attrs:{prop:"ZJHM",label:"证件号码"}}),t._v(" "),a("el-table-column",{attrs:{prop:"QZZL_DESC",label:"签证种类"}}),t._v(" "),a("el-table-column",{attrs:{prop:"QZHM",label:"签证号码"}}),t._v(" "),a("el-table-column",{attrs:{prop:"LRDW_DESC",label:"派出所名称"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{staticClass:"a-btn",attrs:{type:"text",title:"详情",size:"mini",icon:"el-icon-tickets"},on:{click:function(a){t.details(e.row)}}})]}}])})],1),t._v(" "),a("div",{staticClass:"middle-foot"},[a("div",{staticClass:"page-msg"},[a("div",{},[t._v("\n                      共"+t._s(t.TotalResult)+"条记录\n              ")]),t._v(" "),a("div",{},[t._v("\n                每页显示\n                "),a("el-select",{staticClass:"page-select",attrs:{placeholder:"10",size:"mini"},on:{change:function(e){t.pageSizeChange(t.pageSize)}},model:{value:t.pageSize,callback:function(e){t.pageSize=e},expression:"pageSize"}},t._l(t.options,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1),t._v("\n                条\n              ")],1),t._v(" "),a("div",{},[t._v("\n              共"+t._s(Math.ceil(t.TotalResult/t.pageSize))+"页\n              ")])]),t._v(" "),a("el-pagination",{attrs:{background:"","current-page":t.CurrentPage,"page-size":t.pageSize,layout:"prev, pager, next",total:t.TotalResult},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.CurrentPage=e}}})],1)],1)])]),t._v(" "),a("el-dialog",{attrs:{title:"临住详情",visible:t.detailsDialogVisible,"custom-class":"big_dialog","append-to-body":!1,modal:!1},on:{"update:visible":function(e){t.detailsDialogVisible=e}}},[a("LZXX",{attrs:{type:t.type,xid:t.xid,rybh:t.rybh,random:(new Date).getTime()}}),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(e){t.detailsDialogVisible=!1}}},[t._v("取 消")])],1)],1)],1)},staticRenderFns:[]},d=a("VU/8")(o,p,!1,null,null,null);e.default=d.exports}});
//# sourceMappingURL=119.2ddda0cf95b32259aa9c.js.map
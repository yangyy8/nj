webpackJsonp([47],{NV82:function(t,s){},V2P1:function(t,s){},a7FS:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a={data:function(){return{CurrentPage:1,pageSize:10,TotalResult:0,pd:{},nation:[],fileList:[],actions:"",uploadDialogVisible:!1,detailsDialogVisible:!1,editsDialogVisible:!1,editForm:{},mapForm:{},form:{},uploadIconData:{token:this.$store.state.token},options:[{value:10,label:"10"},{value:20,label:"20"},{value:30,label:"30"}],tableData:[]}},activated:function(){},mounted:function(){this.$store.dispatch("getGjdq"),this.$store.dispatch("getYmqzzl"),this.$store.dispatch("getXB"),this.$store.dispatch("getYmzl"),this.$store.dispatch("getYmsqzt"),this.actions=window.IPConfig.IP+this.Global.aport3},methods:{handleSelectionChange:function(t){this.multipleSelection=t},pageSizeChange:function(t){this.getList(this.CurrentPage,t,this.pd),console.log("每页 "+t+" 条")},handleCurrentChange:function(t){this.getList(t,this.pageSize,this.pd),console.log("当前页: "+t)},getList:function(t,s,e){var a=this,i={currentPage:t,showCount:s,pd:e,token:this.$store.state.token};this.$api.post(this.Global.aport3+"/drym/getYMPage",i,function(t){"1000001"==t.code&&(window.location.href="#/"),a.tableData=t.data.resultList,a.TotalResult=t.data.totalResult})},details:function(t){this.detailsDialogVisible=!0,this.mapForm=t},edits:function(t){this.editForm=t,this.editsDialogVisible=!0},editsItem:function(){var t=this;this.editForm.token=this.$store.state.token,this.$api.post(this.Global.aport3+"/drym/updateYM",this.editForm,function(s){"1000001"==s.code&&(window.location.href="#/"),s.success?(t.$message({message:"保存成功！",type:"success"}),t.editsDialogVisible=!1,t.getList(t.CurrentPage,t.pageSize,t.pd)):t.$message.error(s.Message)},function(s){t.$message.error("失败了")})},deletes:function(t){var s=this,e={GUID:t.GUID,token:this.$store.state.token};this.$confirm("您是否确认删除？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){s.$api.post(s.Global.aport3+"/drym/deleteYMById",e,function(t){"1000001"==t.code&&(window.location.href="#/"),t.success?(s.$message({message:"删除成功！",type:"success"}),s.getList(s.CurrentPage,s.pageSize,s.pd)):s.$message.error(t.Message)},function(t){s.$message.error("失败了")})}).catch(function(){s.$message({type:"info",message:"已取消删除"})})},upSuccess:function(t){t.success?this.$message({message:t.data,type:"success"}):this.$message.error(t.message),this.uploadDialogVisible=!1,this.getList(this.CurrentPage,this.pageSize,this.pd)},beforeAvatarUpload:function(t){},showUpload:function(){this.uploadDialogVisible=!0,console.log(this.$refs.upload),this.$refs.upload&&this.$refs.upload.clearFiles()},submitUpload:function(){0!=this.$refs.upload.uploadFiles.length?this.$refs.upload.submit():this.$message({message:"请先选择文件！",type:"warning"})},download:function(){window.location.href=window.IPConfig.IP+"/"+this.Global.aport3+"/webapp/templateFile/移民数据导入模板.xlsx"}}},i={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"yymain tshu"},[e("div",{staticClass:"yytitle"},[e("el-row",{attrs:{type:"flex"}},[e("el-col",{staticClass:"br pr-20",attrs:{span:22}},[e("el-row",{attrs:{align:"center",gutter:2}},[e("el-col",{staticClass:"input-item",attrs:{sm:24,md:12,lg:8}},[e("span",{staticClass:"input-text"},[t._v("姓名：")]),t._v(" "),e("el-input",{staticClass:"input-input",attrs:{placeholder:"请输入内容",size:"small"},model:{value:t.pd.XM,callback:function(s){t.$set(t.pd,"XM",s)},expression:"pd.XM"}})],1),t._v(" "),e("el-col",{staticClass:"input-item",attrs:{sm:24,md:12,lg:8}},[e("span",{staticClass:"input-text"},[t._v("身份证号：")]),t._v(" "),e("el-input",{staticClass:"input-input",attrs:{placeholder:"请输入内容",size:"small"},model:{value:t.pd.SFZH,callback:function(s){t.$set(t.pd,"SFZH",s)},expression:"pd.SFZH"}})],1),t._v(" "),e("el-col",{staticClass:"input-item",attrs:{sm:24,md:12,lg:8}},[e("span",{staticClass:"input-text"},[t._v("前往国：")]),t._v(" "),e("el-select",{staticClass:"input-input",attrs:{filterable:"",clearable:"","default-first-option":"",placeholder:"请选择",size:"small"},model:{value:t.pd.QWGDM,callback:function(s){t.$set(t.pd,"QWGDM",s)},expression:"pd.QWGDM"}},t._l(t.$store.state.gjdq,function(t,s){return e("el-option",{key:s,attrs:{label:t.dm+" - "+t.mc,value:t.dm}})}),1)],1),t._v(" "),e("el-col",{staticClass:"input-item",attrs:{sm:24,md:12,lg:8}},[e("span",{staticClass:"input-text"},[t._v("移民种类：")]),t._v(" "),e("el-select",{staticClass:"input-input",attrs:{filterable:"",clearable:"","default-first-option":"",placeholder:"请选择",size:"small"},model:{value:t.pd.YMZLDM,callback:function(s){t.$set(t.pd,"YMZLDM",s)},expression:"pd.YMZLDM"}},t._l(t.$store.state.ymzl,function(t,s){return e("el-option",{key:s,attrs:{label:t.dm+" - "+t.mc,value:t.dm}})}),1)],1),t._v(" "),e("el-col",{staticClass:"input-item",attrs:{sm:24,md:12,lg:8}},[e("span",{staticClass:"input-text"},[t._v("签约时间：")]),t._v(" "),e("div",{staticClass:"input-input t-flex t-date"},[e("el-date-picker",{attrs:{format:"yyyy-MM-dd",type:"date",size:"small","value-format":"yyyy-MM-dd",placeholder:"开始时间"},model:{value:t.pd.QYSJStart,callback:function(s){t.$set(t.pd,"QYSJStart",s)},expression:"pd.QYSJStart"}}),t._v(" "),e("span",{staticClass:"septum"},[t._v("-")]),t._v(" "),e("el-date-picker",{attrs:{format:"yyyy-MM-dd",type:"date",size:"small","value-format":"yyyy-MM-dd",placeholder:"结束时间"},model:{value:t.pd.QYSJEnd,callback:function(s){t.$set(t.pd,"QYSJEnd",s)},expression:"pd.QYSJEnd"}})],1)]),t._v(" "),e("el-col",{staticClass:"input-item",attrs:{sm:24,md:12,lg:8}},[e("span",{staticClass:"input-text"},[t._v("移民申请状态：")]),t._v(" "),e("el-select",{staticClass:"input-input",attrs:{filterable:"",clearable:"","default-first-option":"",placeholder:"请选择",size:"small"},model:{value:t.pd.YMSQZTDM,callback:function(s){t.$set(t.pd,"YMSQZTDM",s)},expression:"pd.YMSQZTDM"}},t._l(t.$store.state.ymsqzt,function(t,s){return e("el-option",{key:s,attrs:{label:t.dm+" - "+t.mc,value:t.dm}})}),1)],1)],1)],1),t._v(" "),e("el-col",{staticClass:"down-btn-area",attrs:{span:2}},[e("el-button",{attrs:{type:"success",size:"small"},on:{click:function(s){t.CurrentPage=1,t.getList(t.CurrentPage,t.pageSize,t.pd)}}},[t._v("查询")])],1)],1)],1),t._v(" "),e("div",{staticClass:"yycontent"},[e("el-row",{staticClass:"mb-15"},[e("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.showUpload}},[t._v("批量导入")]),t._v(" "),e("el-button",{attrs:{type:"success",size:"small"},on:{click:t.download}},[t._v("模板下载")])],1),t._v(" "),e("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""},on:{"selection-change":t.handleSelectionChange}},[e("el-table-column",{attrs:{prop:"XM",label:"姓名"}}),t._v(" "),e("el-table-column",{attrs:{prop:"SFZH",label:"身份证号"}}),t._v(" "),e("el-table-column",{attrs:{prop:"QYSJ",label:"签约日期"}}),t._v(" "),e("el-table-column",{attrs:{prop:"YMSQZTMC",label:"移民申请状态"}}),t._v(" "),e("el-table-column",{attrs:{prop:"QWGMC",label:"前往国"}}),t._v(" "),e("el-table-column",{attrs:{prop:"YMZLMC",label:"移民种类"}}),t._v(" "),e("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("el-button",{staticClass:"a-btn",attrs:{type:"text",title:"详情",icon:"el-icon-document"},on:{click:function(e){t.details(s.row)}}}),t._v(" "),e("el-button",{staticClass:"a-btn",attrs:{type:"text",title:"编辑",icon:"el-icon-edit"},on:{click:function(e){t.edits(s.row)}}}),t._v(" "),e("el-button",{staticClass:"a-btn",attrs:{type:"text",title:"删除",icon:"el-icon-delete"},on:{click:function(e){t.deletes(s.row)}}})]}}])})],1),t._v(" "),e("div",{staticClass:"middle-foot"},[e("div",{staticClass:"page-msg"},[e("div",{},[t._v("\n            共"+t._s(t.TotalResult)+"条记录\n        ")]),t._v(" "),e("div",{},[t._v("\n          每页显示\n          "),e("el-select",{staticClass:"page-select",attrs:{placeholder:"10",size:"mini"},on:{change:function(s){t.pageSizeChange(t.pageSize)}},model:{value:t.pageSize,callback:function(s){t.pageSize=s},expression:"pageSize"}},t._l(t.options,function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1),t._v("\n          条\n        ")],1),t._v(" "),e("div",{},[t._v("\n          共"+t._s(Math.ceil(t.TotalResult/t.pageSize))+"页\n        ")])]),t._v(" "),e("el-pagination",{attrs:{background:"","current-page":t.CurrentPage,"page-size":t.pageSize,layout:"prev, pager, next",total:t.TotalResult},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(s){t.CurrentPage=s}}})],1)],1),t._v(" "),e("el-dialog",{attrs:{title:"上传模板",visible:t.uploadDialogVisible,width:"640px"},on:{"update:visible":function(s){t.uploadDialogVisible=s}}},[e("el-form",[e("el-row",{attrs:{type:"flex"}},[e("el-col",{attrs:{span:24}},[e("el-upload",{ref:"upload",staticClass:"input-input",attrs:{action:t.actions+"/drym/readExcel","file-list":t.fileList,multiple:"","on-success":t.upSuccess,data:t.uploadIconData,"before-upload":t.beforeAvatarUpload,limit:1,"auto-upload":!1}},[e("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("选取文件")]),t._v(" "),e("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:t.submitUpload}},[t._v("上传到服务器")]),t._v(" "),e("br"),t._v(" "),e("span",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传EXCEL文件")])],1)],1)],1)],1)],1),t._v(" "),e("el-dialog",{attrs:{title:"编辑",visible:t.editsDialogVisible},on:{"update:visible":function(s){t.editsDialogVisible=s}}},[e("el-form",{ref:"editForm"},[e("el-row",{staticClass:"mb-6",attrs:{gutter:3}},[e("el-col",{staticClass:"input-item",attrs:{span:12}},[e("span",{staticClass:"input-text"},[t._v("姓名：")]),t._v(" "),e("el-input",{staticClass:"input-input",attrs:{placeholder:"请输入内容",size:"small"},model:{value:t.editForm.XM,callback:function(s){t.$set(t.editForm,"XM",s)},expression:"editForm.XM"}})],1),t._v(" "),e("el-col",{staticClass:"input-item",attrs:{span:12}},[e("span",{staticClass:"input-text"},[t._v("身份证号：")]),t._v(" "),e("el-input",{staticClass:"input-input",attrs:{placeholder:"请输入内容",size:"small"},model:{value:t.editForm.SFZH,callback:function(s){t.$set(t.editForm,"SFZH",s)},expression:"editForm.SFZH"}})],1),t._v(" "),e("el-col",{staticClass:"input-item",attrs:{span:12}},[e("span",{staticClass:"input-text"},[t._v("签约日期：")]),t._v(" "),e("el-date-picker",{staticClass:"input-input",attrs:{format:"yyyy-MM-dd",type:"date",size:"small","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:t.editForm.QYSJ,callback:function(s){t.$set(t.editForm,"QYSJ",s)},expression:"editForm.QYSJ"}})],1),t._v(" "),e("el-col",{staticClass:"input-item",attrs:{span:12}},[e("span",{staticClass:"input-text"},[t._v("移民申请状态：")]),t._v(" "),e("el-select",{staticClass:"input-input",attrs:{filterable:"",clearable:"","default-first-option":"",placeholder:"请选择",size:"small"},model:{value:t.editForm.YMSQZTDM,callback:function(s){t.$set(t.editForm,"YMSQZTDM",s)},expression:"editForm.YMSQZTDM"}},t._l(t.$store.state.ymsqzt,function(t,s){return e("el-option",{key:s,attrs:{label:t.dm+" - "+t.mc,value:t.dm}})}),1)],1),t._v(" "),e("el-col",{staticClass:"input-item",attrs:{span:12}},[e("span",{staticClass:"input-text"},[t._v("前往国：")]),t._v(" "),e("el-select",{staticClass:"input-input",attrs:{filterable:"",clearable:"","default-first-option":"",placeholder:"请选择",size:"small"},model:{value:t.editForm.QWGDM,callback:function(s){t.$set(t.editForm,"QWGDM",s)},expression:"editForm.QWGDM"}},t._l(t.$store.state.gjdq,function(t,s){return e("el-option",{key:s,attrs:{label:t.dm+" - "+t.mc,value:t.dm}})}),1)],1),t._v(" "),e("el-col",{staticClass:"input-item",attrs:{span:12}},[e("span",{staticClass:"input-text"},[t._v("移民种类：")]),t._v(" "),e("el-select",{staticClass:"input-input",attrs:{filterable:"",clearable:"","default-first-option":"",placeholder:"请选择",size:"small"},model:{value:t.editForm.YMZLDM,callback:function(s){t.$set(t.editForm,"YMZLDM",s)},expression:"editForm.YMZLDM"}},t._l(t.$store.state.ymzl,function(t,s){return e("el-option",{key:s,attrs:{label:t.dm+" - "+t.mc,value:t.dm}})}),1)],1),t._v(" "),e("el-col",{staticClass:"input-item",attrs:{span:12}},[e("span",{staticClass:"input-text"},[t._v("同行人姓名：")]),t._v(" "),e("el-input",{staticClass:"input-input",attrs:{placeholder:"请输入内容",size:"small"},model:{value:t.editForm.TXRXM,callback:function(s){t.$set(t.editForm,"TXRXM",s)},expression:"editForm.TXRXM"}})],1),t._v(" "),e("el-col",{staticClass:"input-item",attrs:{span:12}},[e("span",{staticClass:"input-text"},[t._v("填表时间：")]),t._v(" "),e("el-date-picker",{staticClass:"input-input",attrs:{format:"yyyy-MM-dd",type:"date",size:"small","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:t.editForm.TBSJ,callback:function(s){t.$set(t.editForm,"TBSJ",s)},expression:"editForm.TBSJ"}})],1),t._v(" "),e("el-col",{staticClass:"input-item",attrs:{span:12}},[e("span",{staticClass:"input-text"},[t._v("单位名称：")]),t._v(" "),e("el-input",{staticClass:"input-input",attrs:{placeholder:"请输入内容",size:"small"},model:{value:t.editForm.DWMC,callback:function(s){t.$set(t.editForm,"DWMC",s)},expression:"editForm.DWMC"}})],1),t._v(" "),e("el-col",{staticClass:"input-item",attrs:{span:12}},[e("span",{staticClass:"input-text"},[t._v("批复日期：")]),t._v(" "),e("el-date-picker",{staticClass:"input-input",attrs:{format:"yyyy-MM-dd",type:"date",size:"small","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:t.editForm.PFRQ,callback:function(s){t.$set(t.editForm,"PFRQ",s)},expression:"editForm.PFRQ"}})],1)],1)],1),t._v(" "),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(s){t.editsItem()}}},[t._v("确 定")]),t._v(" "),e("el-button",{attrs:{size:"small"},on:{click:function(s){t.editsDialogVisible=!1}}},[t._v("取 消")])],1)],1),t._v(" "),e("el-dialog",{attrs:{title:"详情",visible:t.detailsDialogVisible},on:{"update:visible":function(s){t.detailsDialogVisible=s}}},[e("el-form",{ref:"mapForm"},[e("el-row",{staticClass:"mb-6",attrs:{gutter:3}},[e("el-col",{staticClass:"input-item",attrs:{span:12}},[e("span",{staticClass:"input-text"},[t._v("姓名：")]),t._v(" "),e("span",{staticClass:"input-input detailinput"},[t._v("  "+t._s(t.mapForm.XM))])]),t._v(" "),e("el-col",{staticClass:"input-item",attrs:{span:12}},[e("span",{staticClass:"input-text"},[t._v("身份证号：")]),t._v(" "),e("span",{staticClass:"input-input detailinput"},[t._v("  "+t._s(t.mapForm.SFZH))])]),t._v(" "),e("el-col",{staticClass:"input-item",attrs:{span:12}},[e("span",{staticClass:"input-text"},[t._v("签约日期：")]),t._v(" "),e("span",{staticClass:"input-input detailinput"},[t._v("  "+t._s(t.mapForm.QYSJ))])]),t._v(" "),e("el-col",{staticClass:"input-item",attrs:{span:12}},[e("span",{staticClass:"input-text"},[t._v("移民申请状态：")]),t._v(" "),e("span",{staticClass:"input-input detailinput"},[t._v("  "+t._s(t.mapForm.YMSQZTMC))])]),t._v(" "),e("el-col",{staticClass:"input-item",attrs:{span:12}},[e("span",{staticClass:"input-text"},[t._v("前往国：")]),t._v(" "),e("span",{staticClass:"input-input detailinput"},[t._v("  "+t._s(t.mapForm.QWGMC))])]),t._v(" "),e("el-col",{staticClass:"input-item",attrs:{span:12}},[e("span",{staticClass:"input-text"},[t._v("移民种类：")]),t._v(" "),e("span",{staticClass:"input-input detailinput"},[t._v("  "+t._s(t.mapForm.YMZLMC))])]),t._v(" "),e("el-col",{staticClass:"input-item",attrs:{span:12}},[e("span",{staticClass:"input-text"},[t._v("同行人姓名：")]),t._v(" "),e("span",{staticClass:"input-input detailinput"},[t._v("  "+t._s(t.mapForm.TXRXM))])]),t._v(" "),e("el-col",{staticClass:"input-item",attrs:{span:12}},[e("span",{staticClass:"input-text"},[t._v("填表时间：")]),t._v(" "),e("span",{staticClass:"input-input detailinput"},[t._v("  "+t._s(t.mapForm.TBSJ))])]),t._v(" "),e("el-col",{staticClass:"input-item",attrs:{span:12}},[e("span",{staticClass:"input-text"},[t._v("单位名称：")]),t._v(" "),e("span",{staticClass:"input-input detailinput"},[t._v("  "+t._s(t.mapForm.DWMC))])]),t._v(" "),e("el-col",{staticClass:"input-item",attrs:{span:12}},[e("span",{staticClass:"input-text"},[t._v("批复日期：")]),t._v(" "),e("span",{staticClass:"input-input detailinput"},[t._v("  "+t._s(t.mapForm.PFRQ))])]),t._v(" "),e("el-col",{staticClass:"input-item",attrs:{span:12}},[e("span",{staticClass:"input-text"},[t._v("操作人：")]),t._v(" "),e("span",{staticClass:"input-input detailinput"},[t._v("  "+t._s(t.mapForm.CZR))])]),t._v(" "),e("el-col",{staticClass:"input-item",attrs:{span:12}},[e("span",{staticClass:"input-text"},[t._v("操作时间：")]),t._v(" "),e("span",{staticClass:"input-input detailinput"},[t._v("  "+t._s(t.mapForm.CZS))])]),t._v(" "),e("el-col",{staticClass:"input-item",attrs:{span:12}},[e("span",{staticClass:"input-text"},[t._v("数据有效状态：")]),t._v(" "),e("span",{staticClass:"input-input detailinput"},[t._v(t._s("0"==t.mapForm.YXZT?"删除":"有效"))])]),t._v(" "),e("el-col",{staticClass:"input-item",attrs:{span:12}},[e("span",{staticClass:"input-text"},[t._v("修改人：")]),t._v(" "),e("span",{staticClass:"input-input detailinput"},[t._v(t._s(t.mapForm.XGR))])]),t._v(" "),e("el-col",{staticClass:"input-item",attrs:{span:12}},[e("span",{staticClass:"input-text"},[t._v("修改时间：")]),t._v(" "),e("span",{staticClass:"input-input detailinput"},[t._v(t._s(t.mapForm.XGSJ))])])],1)],1),t._v(" "),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{size:"small"},on:{click:function(s){t.detailsDialogVisible=!1}}},[t._v("取 消")])],1)],1)],1)},staticRenderFns:[]};var l=e("VU/8")(a,i,!1,function(t){e("V2P1"),e("NV82")},"data-v-5594b56e",null);s.default=l.exports}});
//# sourceMappingURL=47.934104c0065700a564aa.js.map
webpackJsonp([52],{CAw9:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a={data:function(){return{CurrentPage:1,pageSize:10,TotalResult:0,pd:{},mapForm:{},nation:[],fileList:[],actions:"",uploadDialogVisible:!1,detailsDialogVisible:!1,editsDialogVisible:!1,editform:{},uploadIconData:{token:this.$store.state.token},options:[{value:10,label:"10"},{value:20,label:"20"},{value:30,label:"30"}],tableData:[]}},activated:function(){this.getList(this.CurrentPage,this.pageSize,this.pd)},mounted:function(){this.$store.dispatch("getGjdq"),this.$store.dispatch("getXB")},methods:{handleSelectionChange:function(t){this.multipleSelection=t},pageSizeChange:function(t){this.getList(this.CurrentPage,t,this.pd),console.log("每页 "+t+" 条")},handleCurrentChange:function(t){this.getList(t,this.pageSize,this.pd),console.log("当前页: "+t)},getList:function(t,e,s){var a=this,i={currentPage:t,showCount:e,pd:s,token:this.$store.state.token};this.$api.post(this.Global.aport3+"/drlxslrwbd/getLXSLRWBDPage",i,function(t){"1000001"==t.code&&(window.location.href="#/"),a.tableData=t.data.resultList,a.TotalResult=t.data.totalResult})},details:function(t){this.detailsDialogVisible=!0,this.mapForm=t},edits:function(t){this.editsDialogVisible=!0,this.editform=t},editsItem:function(t){var e=this;this.editform.token=this.$store.state.token,this.$api.post(this.Global.aport3+"/drlxslrwbd/updateLXSLRWBD",this.editform,function(t){"1000001"==t.code&&(window.location.href="#/"),t.success?e.$message({message:"保存成功！",type:"success"}):e.$message.error(t.Message),e.$refs[afrom].resetFields(),e.editsDialogVisible=!1,e.getList(e.CurrentPage,e.pageSize,e.pd)},function(t){e.$message.error("失败了")})},deletes:function(t){var e=this,s={RYBH:t.RYBH,token:this.$store.state.token};this.$confirm("您是否确认删除？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$api.post(e.Global.aport3+"/drlxslrwbd/deleteLXSLRWBDById",s,function(t){"1000001"==t.code&&(window.location.href="#/"),t.success?(e.$message({message:"删除成功！",type:"success"}),e.getList(e.CurrentPage,e.pageSize,e.pd)):e.$message.error(t.Message)},function(t){e.$message.error("失败了")})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},upSuccess:function(t){t.success?this.$message({message:t.data,type:"success"}):this.$message.error(t.message),this.uploadDialogVisible=!1,this.getList(this.CurrentPage,this.pageSize,this.pd)},beforeAvatarUpload:function(t){console.log(t.type);var e="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"===t.type,s="application/vnd.ms-excel"===t.type;return e||s||this.$message.error("上传文件只能是 xlsx或者xls 格式!"),e||s},showUpload:function(){this.uploadDialogVisible=!0,this.typemd="",this.actions=window.IPConfig.IP+this.Global.aport3,this.$refs.upload&&this.$refs.upload.clearFiles()},submitUpload:function(){0!=this.$refs.upload.uploadFiles.length?this.$refs.upload.submit():this.$message({message:"请先选择文件！",type:"warning"})},download:function(){window.location.href=window.IPConfig.IP+"/"+this.Global.aport3+"/webapp/templateFile/未报到留学生导入模板.xls"}},computed:{headers:function(){return{token:this.$store.state.token}}}},i={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"yymain"},[s("div",{staticClass:"yytitle"},[s("el-row",{attrs:{type:"flex"}},[s("el-col",{staticClass:"br pr-20",attrs:{span:22}},[s("el-row",{attrs:{align:"center",gutter:2}},[s("el-col",{staticClass:"input-item",attrs:{sm:24,md:12,lg:8}},[s("span",{staticClass:"input-text"},[t._v("英文姓名：")]),t._v(" "),s("el-input",{staticClass:"input-input",attrs:{placeholder:"请输入内容",size:"small"},model:{value:t.pd.YWXM,callback:function(e){t.$set(t.pd,"YWXM",e)},expression:"pd.YWXM"}})],1),t._v(" "),s("el-col",{staticClass:"input-item",attrs:{sm:24,md:12,lg:8}},[s("span",{staticClass:"input-text"},[t._v("性别：")]),t._v(" "),s("el-select",{staticClass:"input-input",attrs:{placeholder:"请选择",filterable:"",clearable:"","default-first-option":"",size:"small"},model:{value:t.pd.XBDM,callback:function(e){t.$set(t.pd,"XBDM",e)},expression:"pd.XBDM"}},t._l(t.$store.state.xb,function(t,e){return s("el-option",{key:e,attrs:{label:t.dm+" - "+t.mc,value:t.dm}})}),1)],1),t._v(" "),s("el-col",{staticClass:"input-item",attrs:{sm:24,md:12,lg:8}},[s("span",{staticClass:"input-text"},[t._v("出生日期：")]),t._v(" "),s("div",{staticClass:"input-input t-flex t-date"},[s("el-date-picker",{attrs:{format:"yyyy-MM-dd",type:"date",size:"small","value-format":"yyyy-MM-dd",placeholder:"开始时间"},model:{value:t.pd.CSRQKSSJ,callback:function(e){t.$set(t.pd,"CSRQKSSJ",e)},expression:"pd.CSRQKSSJ"}}),t._v(" "),s("span",{staticClass:"septum"},[t._v("-")]),t._v(" "),s("el-date-picker",{attrs:{format:"yyyy-MM-dd",type:"date",size:"small","value-format":"yyyy-MM-dd",placeholder:"结束时间"},model:{value:t.pd.CSRQJSSJ,callback:function(e){t.$set(t.pd,"CSRQJSSJ",e)},expression:"pd.CSRQJSSJ"}})],1)]),t._v(" "),s("el-col",{staticClass:"input-item",attrs:{sm:24,md:12,lg:8}},[s("span",{staticClass:"input-text"},[t._v("国家地区：")]),t._v(" "),s("el-select",{staticClass:"input-input",attrs:{filterable:"",clearable:"","default-first-option":"",placeholder:"请选择",size:"small"},model:{value:t.pd.GJDQDM,callback:function(e){t.$set(t.pd,"GJDQDM",e)},expression:"pd.GJDQDM"}},t._l(t.$store.state.gjdq,function(t){return s("el-option",{key:t.dm,attrs:{label:t.dm+" - "+t.mc,value:t.dm}})}),1)],1),t._v(" "),s("el-col",{staticClass:"input-item",attrs:{sm:24,md:12,lg:8}},[s("span",{staticClass:"input-text"},[t._v("护照号码：")]),t._v(" "),s("el-input",{staticClass:"input-input",attrs:{placeholder:"请输入内容",size:"small"},model:{value:t.pd.HZHM,callback:function(e){t.$set(t.pd,"HZHM",e)},expression:"pd.HZHM"}})],1)],1)],1),t._v(" "),s("el-col",{staticClass:"down-btn-area",attrs:{span:2}},[s("el-button",{attrs:{type:"success",size:"small"},on:{click:function(e){t.CurrentPage=1,t.getList(t.CurrentPage,t.pageSize,t.pd)}}},[t._v("查询")])],1)],1)],1),t._v(" "),s("div",{staticClass:"yycontent"},[s("el-row",{staticClass:"mb-15"},[s("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.showUpload}},[t._v("批量导入")]),t._v(" "),s("el-button",{attrs:{type:"success",size:"small"},on:{click:t.download}},[t._v("模板下载")])],1),t._v(" "),s("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""},on:{"selection-change":t.handleSelectionChange}},[s("el-table-column",{attrs:{prop:"YWXM",label:"英文姓名"}}),t._v(" "),s("el-table-column",{attrs:{prop:"XBMC",label:"性别"}}),t._v(" "),s("el-table-column",{attrs:{prop:"CSRQ",label:"出生日期"}}),t._v(" "),s("el-table-column",{attrs:{prop:"HZHM",label:"护照号码"}}),t._v(" "),s("el-table-column",{attrs:{prop:"GJDQMC",label:"国家地区"}}),t._v(" "),s("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-button",{staticClass:"a-btn",attrs:{type:"text",title:"详情",icon:"el-icon-document"},on:{click:function(s){t.details(e.row)}}}),t._v(" "),s("el-button",{staticClass:"a-btn",attrs:{type:"text",title:"编辑",icon:"el-icon-edit"},on:{click:function(s){t.edits(e.row)}}}),t._v(" "),s("el-button",{staticClass:"a-btn",attrs:{type:"text",title:"删除",icon:"el-icon-delete"},on:{click:function(s){t.deletes(e.row)}}})]}}])})],1),t._v(" "),s("div",{staticClass:"middle-foot"},[s("div",{staticClass:"page-msg"},[s("div",{},[t._v("\n                共"+t._s(t.TotalResult)+"条记录\n        ")]),t._v(" "),s("div",{},[t._v("\n          每页显示\n          "),s("el-select",{staticClass:"page-select",attrs:{placeholder:"10",size:"mini"},on:{change:function(e){t.CurrentPage=1,t.pageSizeChange(t.pageSize)}},model:{value:t.pageSize,callback:function(e){t.pageSize=e},expression:"pageSize"}},t._l(t.options,function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1),t._v("\n          条\n        ")],1),t._v(" "),s("div",{},[t._v("\n       共"+t._s(Math.ceil(t.TotalResult/t.pageSize))+"页\n        ")])]),t._v(" "),s("el-pagination",{attrs:{background:"","current-page":t.CurrentPage,"page-size":t.pageSize,layout:"prev, pager, next",total:t.TotalResult},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.CurrentPage=e}}})],1)],1),t._v(" "),s("el-dialog",{attrs:{title:"上传模板",visible:t.uploadDialogVisible,width:"640px"},on:{"update:visible":function(e){t.uploadDialogVisible=e}}},[s("el-form",[s("el-row",{staticClass:"mb-6",attrs:{type:"flex"}},[s("el-col",{staticClass:"input-item",attrs:{span:24}},[s("el-upload",{ref:"upload",staticClass:"input-input",attrs:{action:t.actions+"/drlxslrwbd/readExcel","file-list":t.fileList,data:t.uploadIconData,multiple:"","on-success":t.upSuccess,"before-upload":t.beforeAvatarUpload,limit:1,"auto-upload":!1}},[s("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("选取文件")]),t._v(" "),s("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:t.submitUpload}},[t._v("上传到服务器")]),t._v(" "),s("br"),t._v(" "),s("span",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传EXCEL文件")])],1)],1)],1)],1)],1),t._v(" "),s("el-dialog",{attrs:{title:"编辑",visible:t.editsDialogVisible},on:{"update:visible":function(e){t.editsDialogVisible=e}}},[s("el-form",{ref:"editform"},[s("el-row",{staticClass:"mb-6",attrs:{gutter:2}},[s("el-col",{staticClass:"input-item",attrs:{span:12}},[s("span",{staticClass:"input-text"},[t._v("英文姓名：")]),t._v(" "),s("el-input",{staticClass:"input-input",attrs:{placeholder:"请输入内容",size:"small"},model:{value:t.editform.YWXM,callback:function(e){t.$set(t.editform,"YWXM",e)},expression:"editform.YWXM"}})],1),t._v(" "),s("el-col",{staticClass:"input-item",attrs:{span:12}},[s("span",{staticClass:"input-text"},[t._v("性别：")]),t._v(" "),s("el-select",{staticClass:"input-input",attrs:{placeholder:"请选择",filterable:"",clearable:"","default-first-option":"",size:"small"},model:{value:t.editform.XBDM,callback:function(e){t.$set(t.editform,"XBDM",e)},expression:"editform.XBDM"}},t._l(t.$store.state.xb,function(t,e){return s("el-option",{key:e,attrs:{label:t.dm+" - "+t.mc,value:t.dm}})}),1)],1),t._v(" "),s("el-col",{staticClass:"input-item",attrs:{span:12}},[s("span",{staticClass:"input-text"},[t._v("护照号：")]),t._v(" "),s("el-input",{staticClass:"input-input",attrs:{placeholder:"请输入内容",size:"small"},model:{value:t.editform.HZHM,callback:function(e){t.$set(t.editform,"HZHM",e)},expression:"editform.HZHM"}})],1),t._v(" "),s("el-col",{staticClass:"input-item",attrs:{span:12}},[s("span",{staticClass:"input-text"},[t._v("国家地区：")]),t._v(" "),s("el-select",{staticClass:"input-input",attrs:{filterable:"",clearable:"","default-first-option":"",placeholder:"请选择",size:"small"},model:{value:t.editform.GJDQDM,callback:function(e){t.$set(t.editform,"GJDQDM",e)},expression:"editform.GJDQDM"}},t._l(t.$store.state.gjdq,function(t){return s("el-option",{key:t.dm,attrs:{label:t.dm+" - "+t.mc,value:t.dm}})}),1)],1),t._v(" "),s("el-col",{staticClass:"input-item",attrs:{span:12}},[s("span",{staticClass:"input-text"},[t._v("出生日期：")]),t._v(" "),s("el-date-picker",{staticClass:"input-input",attrs:{format:"yyyy-MM-dd",type:"date",size:"small","value-format":"yyyy-MM-dd",placeholder:"选择时间"},model:{value:t.editform.CSRQ,callback:function(e){t.$set(t.editform,"CSRQ",e)},expression:"editform.CSRQ"}})],1)],1)],1),t._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.editsItem("editForm")}}},[t._v("确 定")]),t._v(" "),s("el-button",{attrs:{size:"small"},on:{click:function(e){t.editsDialogVisible=!1}}},[t._v("取 消")])],1)],1),t._v(" "),s("el-dialog",{attrs:{title:"详情",visible:t.detailsDialogVisible},on:{"update:visible":function(e){t.detailsDialogVisible=e}}},[s("el-form",{ref:"mapForm"},[s("el-row",{staticClass:"mb-6",attrs:{gutter:2}},[s("el-col",{staticClass:"input-item",attrs:{span:12}},[s("span",{staticClass:"input-text"},[t._v("英文姓名：")]),t._v(" "),s("span",{staticClass:"input-input detailinput"},[t._v("  "+t._s(t.mapForm.YWXM))])]),t._v(" "),s("el-col",{staticClass:"input-item",attrs:{span:12}},[s("span",{staticClass:"input-text"},[t._v("性别：")]),t._v(" "),s("span",{staticClass:"input-input detailinput"},[t._v("  "+t._s(t.mapForm.XBMC))])]),t._v(" "),s("el-col",{staticClass:"input-item",attrs:{span:12}},[s("span",{staticClass:"input-text"},[t._v("护照号：")]),t._v(" "),s("span",{staticClass:"input-input detailinput"},[t._v("  "+t._s(t.mapForm.HZHM))])]),t._v(" "),s("el-col",{staticClass:"input-item",attrs:{span:12}},[s("span",{staticClass:"input-text"},[t._v("国家地区：")]),t._v(" "),s("span",{staticClass:"input-input detailinput"},[t._v("  "+t._s(t.mapForm.GJDQMC))])]),t._v(" "),s("el-col",{staticClass:"input-item",attrs:{span:12}},[s("span",{staticClass:"input-text"},[t._v("出生日期：")]),t._v(" "),s("span",{staticClass:"input-input detailinput"},[t._v("  "+t._s(t.mapForm.CSRQ))])])],1),t._v(" "),s("el-row",{attrs:{gutter:2}},[s("el-col",{staticClass:"input-item",attrs:{span:12}},[s("span",{staticClass:"input-text"},[t._v("操作人：")]),t._v(" "),s("span",{staticClass:"input-input detailinput"},[t._v("  "+t._s(t.mapForm.CZR))])]),t._v(" "),s("el-col",{staticClass:"input-item",attrs:{span:12}},[s("span",{staticClass:"input-text"},[t._v("操作日期：")]),t._v(" "),s("span",{staticClass:"input-input detailinput"},[t._v("  "+t._s(t.mapForm.CZSJ))])])],1)],1),t._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{size:"small"},on:{click:function(e){t.detailsDialogVisible=!1}}},[t._v("取 消")])],1)],1)],1)},staticRenderFns:[]};var l=s("VU/8")(a,i,!1,function(t){s("Oo92"),s("eiD6")},"data-v-44d39af8",null);e.default=l.exports},Oo92:function(t,e){},eiD6:function(t,e){}});
//# sourceMappingURL=52.913c18955439fc347a65.js.map
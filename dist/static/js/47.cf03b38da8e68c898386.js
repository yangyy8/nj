webpackJsonp([47],{ZI8g:function(t,e){},bqV4:function(t,e,r){"use strict";var a,o,s;Object.defineProperty(e,"__esModule",{value:!0});var i,n=[32.03613281,118.78211975];function l(t,e,r,s){i=s;!function(t,e){var r=new SuperMap.GetFeaturesBySQLParameters({queryParameter:{name:"XZ_QU_A@ORCL_gt8",attributeFilter:"ADMINCODE='1CHN"+t+"'"},datasetNames:["ORCL_gt8:XZ_QU_A"]});L.supermap.featureService("http://10.33.66.183:2333/iserver/services/data-gt8/rest/data").getFeaturesBySQL(r,function(t){for(var r=t.result.features,a=r.features,o=0;o<a.length;o++){var s=L.latLngBounds(g(a[o].geometry.coordinates)).getCenter();(n=[]).push(s.lat),n.push(s.lng)}e(n)})}(t,function(s){console.log(t,e,s),a=L.map("mainMap",{crs:L.CRS.EPSG4326,preferCanvas:!0,center:s,maxZoom:18,minZoom:8,zoom:10,zoomControl:!1,attributionControl:!1,closePopupOnClick:!1}),L.supermap.wmtsLayer("http://10.33.66.183:2333/iserver/services/map-wmts-GADT/wmts-china",{layer:"GADT",style:"default",tilematrixSet:"ChinaPublicServices_GADT",format:"image/png",transparent:!0}).addTo(a),o=L.featureGroup().addTo(a),c(t,e,r)})}function c(t,e,r){var o=new SuperMap.GetFeaturesBySQLParameters({queryParameter:{name:"gajg_fj_3201_pg@ORCL_gt8",attributeFilter:"DWBM='"+t+"000000'"},datasetNames:["ORCL_gt8:gajg_fj_3201_pg"]});L.supermap.featureService("http://10.33.66.183:2333/iserver/services/data-gt8/rest/data").getFeaturesBySQL(o,function(t){for(var e=t.result.features.features,r=[],o=0;o<e.length;o++){var i=L.polygon(g(e[o].geometry.coordinates),{color:"red",fillColor:"red",fillOpacity:.2,className:"pcs-layer"});r.push(i);var l=L.latLngBounds(g(e[o].geometry.coordinates)).getCenter();(n=[]).push(l.lat),n.push(l.lng)}s=L.layerGroup(r),a.addLayer(s)}),function(t){var e=new SuperMap.GetFeaturesBySQLParameters({queryParameter:{name:"gajg_fj_3201_pg@ORCL_gt8",attributeFilter:"DWBM='"+t.dm+"'"},datasetNames:["ORCL_gt8:gajg_fj_3201_pg"]});L.supermap.featureService("http://10.33.66.183:2333/iserver/services/data-gt8/rest/data").getFeaturesBySQL(e,function(e){for(var r=e.result.features.features,a=0;a<r.length;a++){var o=L.latLngBounds(g(r[a].geometry.coordinates)).getCenter();console.log("data.dm",t.dm),"320112000000"==t.dm?u([o.lat+.05,o.lng-.07],t):u([o.lat,o.lng],t)}})}([{dm:t+"000000",mc:e,num:r}][0])}function u(t,e){var r=L.divIcon({html:"<div style='line-height:48px;text-align:center;font-size:16px;'>"+e.num+"</div>",className:"my-div-icon",iconSize:60}),a=L.marker(t,{icon:r,pcsdm:e.dm,pcsmc:e.mc,num:e.num});o.addLayer(a),o.on("mousemove",function(t){t.layer.bindPopup("<div style='font-weight:bold; font-size: 13px; padding-bottom:5px'>"+t.layer.options.pcsmc+"</div><div>总人数："+t.layer.options.num+"</div>").openPopup()}),o.on("mouseout",function(t){t.layer.closePopup()}),a.on("click",function(t){window.vm.getpcs(e.dm,function(t){if(void 0!=t)for(var e=0;e<t.length;e++)d(t[e])})})}function d(t){o.clearLayers();var e=new SuperMap.GetFeaturesBySQLParameters({queryParameter:{name:"gajg_pcs_3201_pg@ORCL_gt8",attributeFilter:"DWBM='"+t.dm+"'"},datasetNames:["ORCL_gt8:gajg_pcs_3201_pg"]});L.supermap.featureService("http://10.33.66.183:2333/iserver/services/data-gt8/rest/data").getFeaturesBySQL(e,function(e){for(var r=e.result.features.features,a=0;a<r.length;a++){var o=L.latLngBounds(g(r[a].geometry.coordinates)).getCenter();p([o.lat,o.lng],t)}})}function p(t,e){a.flyTo(t,11);var r=L.divIcon({html:"<div style='line-height:40px;text-align:center;font-weight:bold'>"+e.count+"</div>",className:"my-div-icon icon1",iconSize:50}),s=L.marker(t,{icon:r,pcsdm:e.dm,pcsmc:e.mc,num:e.count});o.addLayer(s),o.on("mousemove",function(t){t.layer.bindPopup("<div style='font-weight:bold; font-size: 13px; padding-bottom:5px'>"+t.layer.options.pcsmc+"</div><div>总人数："+t.layer.options.num+"</div>").openPopup()}),o.on("mouseout",function(t){t.layer.closePopup()}),s.on("click",function(t){window.vm.getbzhdz(e.dm,function(t){for(var e=0;e<t.length;e++)h(t[e])})})}function h(t){o.clearLayers();var e,r,a,s="DZMC='"+t.dm+"'";"C"==i&&(s="DZMC='"+t.dm+"'"),e=s,r=function(e){if(e.length>0)for(var r=0;r<e.length;r++){var a=e[r].properties.DZMC;m(e[r].geometry.coordinates.reverse(),t,a)}else window.vm.getXY(t.dm,function(e){if(void 0!=e&&e.ycoord>0&&e.xcoord>0){var r=[];r.push(e.ycoord),r.push(e.xcoord),m(r,t,t.dm)}})},a=new SuperMap.GetFeaturesBySQLParameters({queryParameter:{name:"dz_mlp@ORCL_gt8",attributeFilter:e},datasetNames:["ORCL_gt8:dz_mlp"],fromIndex:0,toIndex:10}),L.supermap.featureService("http://10.33.66.183:2333/iserver/services/data-gt8/rest/data").getFeaturesBySQL(a,function(t){var e=t.result.features.features;r(e)})}function m(t,e,r){var a=L.divIcon({html:"<div style='line-height:40px;text-align:center;font-weight:bold'>"+e.count+"</div>",className:"my-div-icon icon2",iconSize:50}),s=L.marker(t,{icon:a,pcsdm:e.dm,pcsmc:r,num:e.count});o.addLayer(s),o.on("mousemove",function(t){t.layer.bindPopup("<div style='font-weight:bold; font-size: 13px; padding-bottom:5px'>"+t.layer.options.pcsmc+"</div><div>总人数："+t.layer.options.num+"</div>").openPopup()}),o.on("mouseout",function(t){t.layer.closePopup()}),s.on("click",function(t){window.vm.getRyxx(1,5,e.dm,r,"")})}var g=function(t){for(var e=[],r=0;r<t.length;r++){for(var a=[],o=0;o<t[r].length;o++){for(var s=[],i=0;i<t[r][o].length;i++){var n=[],l=t[r][o][i][0],c=t[r][o][i][0],u=t[r][o][i][1];l=c,c=u,u=l,n.push(c,u),s.push(n)}a.push(s)}e.push(a)}return e},f={data:function(){return{CurrentPage:1,pageSize:5,TotalResult:0,xzqh:"",pd:{},diatext:"标准化地址",tableData:[],options:this.pl.options,bzhDialogVisible:!1,lrdw:"320115",lrdwmc:"秦淮区",rs:"11523",type:"L",yf:"M",sevalue:[],bzhid:"",czshow:!1,ssfj:""}},mounted:function(){window.vm=this,this.lrdw=this.$route.query.dqdm,this.type=this.$route.query.type,this.rs=this.$route.query.rs,this.lrdwmc=this.$route.query.mc,this.yf=this.$route.query.yf,l(this.lrdw,this.lrdwmc,this.rs,this.type),"C"==this.type?this.czshow=!0:this.czshow=!1},methods:{pageSizeChange:function(t){this.getRyxx(this.CurrentPage,t,this.bzhid,this.mc,this.lrdw),console.log("每页 "+t+" 条")},handleCurrentChange:function(t){this.getRyxx(t,this.pageSize,this.bzhid,this.mc,this.lrdw),console.log("当前页: "+t)},getpcs:function(t,e){var r=[],a={lrdw:this.lrdw,yf:this.yf},o=this.Global.aport+"/zxdt/getLSZSDJXXPCSList";"C"==this.type&&(a={lrdw:this.lrdw},o=this.Global.aport+"/zxdt/getCZDJXXPCSList"),this.$api.post(o,a,function(t){if(t.success){for(var a=t.data,o=0;o<a.length;o++)r.push(a[o]);e&&e(r)}})},getbzhdz:function(t,e){var r=[];this.ssfj=t;var a={yf:this.yf,lrdw:t},o=this.Global.aport+"/zxdt/getLSZSDJXXBZHDZList";"C"==this.type&&(a={ssfj:t},o=this.Global.aport+"/zxdt/getCZDJXXJZDList"),this.$api.post(o,a,function(t){if(t.success){for(var a=t.data,o=0;o<a.length;o++)r.push(a[o]);e&&e(r)}})},getRyxx:function(t,e,r,a,o){var s=this;1==t&&(this.CurrentPage=1,this.tableData=[],this.TotalResult=0),this.bzhid=r,this.mc=a,this.lrdw=o,this.diatext=this.mc;var i={currentPage:t,showCount:e,bzhdzMc:this.bzhid,yf:this.yf,lrdw:this.ssfj},n=this.Global.aport+"/zxdt/getLSZSDJXXRYList";"C"==this.type&&(i={currentPage:t,showCount:e,xxdz:this.bzhid,ssfj:this.ssfj},n=this.Global.aport+"/zxdt/getCZDJXXRYList"),this.$api.post(n,i,function(t){t.success&&(s.tableData=t.data.resultList,s.TotalResult=t.data.totalResult)}),this.bzhDialogVisible=!0},gotos:function(t,e){var r=this.$router.resolve({path:"/Home/RYHX_NX",query:{zjhm:t,gjdq:e}});window.open(r.href,"_blank")},getXY:function(t,e){var r={url:this.Global.xyaddress+"?dz="+t};this.$api.post(this.Global.aport+"/zxdt/getCtUrl",r,function(t){e&&e(t.data.result)})}}},v={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bgh1"},[a("div",{staticClass:"mapbjindex",attrs:{id:"mainMap"}}),t._v(" "),a("el-dialog",{attrs:{title:t.diatext,visible:t.bzhDialogVisible},on:{"update:visible":function(e){t.bzhDialogVisible=e}}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[a("el-table-column",{attrs:{label:"照片"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.zp?a("div",[a("el-popover",{attrs:{placement:"right",title:"",trigger:"hover"}},[a("img",{staticStyle:{"max-width":"700px","max-height":"700px"},attrs:{src:e.row.zp}}),t._v(" "),a("img",{attrs:{slot:"reference",src:e.row.zp,alt:e.row.zp,width:"50",height:"50"},slot:"reference"})])],1):t._e()]}}])}),t._v(" "),t.czshow?a("el-table-column",{attrs:{prop:"sf",label:"身份"}}):t._e(),t._v(" "),t.czshow?a("el-table-column",{attrs:{prop:"fwcs",label:"服务处所"}}):t._e(),t._v(" "),a("el-table-column",{attrs:{prop:"ywxm",label:"英文姓名"}}),t._v(" "),a("el-table-column",{attrs:{prop:"zwxm",label:"中文姓名"}}),t._v(" "),a("el-table-column",{attrs:{prop:"xb",label:"性别"}}),t._v(" "),a("el-table-column",{attrs:{prop:"csrq",label:"出生日期"}}),t._v(" "),a("el-table-column",{attrs:{prop:"djrq",label:"登记日期"}}),t._v(" "),a("el-table-column",{attrs:{prop:"gjdq",label:"国家地区"}}),t._v(" "),a("el-table-column",{attrs:{prop:"zjzl",label:"证件种类"}}),t._v(" "),a("el-table-column",{attrs:{prop:"zjhm",label:"证件号码"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{color:"yellow",cursor:"pointer"},on:{click:function(r){t.gotos(e.row.zjhm,e.row.gjdqdm)}}},[t._v(t._s(e.row.zjhm))])]}}])})],1),t._v(" "),a("div",{staticClass:"middle-foot mt-10"},[a("div",{staticClass:"page-msg"},[a("div",{staticClass:"crrcolor"},[t._v("\n               共"+t._s(t.TotalResult)+"条记录\n               ")]),t._v(" "),a("div",{staticClass:"crrcolor"}),t._v(" "),a("div",{staticClass:"crrcolor"})]),t._v(" "),a("el-pagination",{attrs:{background:"","current-page":t.CurrentPage,"page-size":t.pageSize,layout:"prev, pager, next",total:t.TotalResult},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.CurrentPage=e}}})],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("img",{staticStyle:{cursor:"pointer"},attrs:{src:r("JmKm"),border:"0"},on:{click:function(e){t.bzhDialogVisible=!1}}})]),t._v(" "),a("div",{staticClass:"arrow_line",staticStyle:{left:"0px",top:"0px","border-bottom-width":"0","border-right-width":"0"}}),t._v(" "),a("div",{staticClass:"arrow_line",staticStyle:{right:"0px",top:"0px","border-bottom-width":"0","border-left-width":"0"}}),t._v(" "),a("div",{staticClass:"arrow_line",staticStyle:{left:"0px",bottom:"0px","border-top-width":"0","border-right-width":"0"}}),t._v(" "),a("div",{staticClass:"arrow_line",staticStyle:{right:"0px",bottom:"0px","border-top-width":"0","border-left-width":"0"}})],1)],1)},staticRenderFns:[]};var y=r("VU/8")(f,v,!1,function(t){r("teyV"),r("ZI8g")},"data-v-4d0a14ff",null);e.default=y.exports},teyV:function(t,e){}});
//# sourceMappingURL=47.cf03b38da8e68c898386.js.map
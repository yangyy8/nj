webpackJsonp([85],{"74dN":function(t,e){},CW0p:function(t,e,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=l("woOf"),s=l.n(a),i=l("bOdI"),n=l.n(i),o=l("XLwt"),p=l.n(o),c=(l("I9qK"),{components:{LZXX:l("yHYR").a},data:function(){var t;return t={pageC:!0,tableDataC:[],tableHeader:[],rybh:"",detailsDialogVisible:!1,listDialogVisible:!1,page:0,type:1,xid:"",CurrentPage:1,pageSize:10,TotalResult:0,pd:{LRRQ_DateRange:{},LRDW_BH_Like:"1",LRDW_BH:"1",DJDWXZQH:"3201",LB_DJDW:"",ZSLX:"0"},pdTu:{},pd0:{begin:"",end:""},fjlist:[],pcslist:[],checkedfj:!1,checkedpcs:!1,tableData:[]},n()(t,"CurrentPage",1),n()(t,"pageSize",10),n()(t,"TotalResult",0),n()(t,"options",this.pl.options),n()(t,"dataname",[]),n()(t,"rr",0),n()(t,"lineChart",null),n()(t,"seriesT",[]),n()(t,"multipleSelection",[]),n()(t,"selectionAll",[]),n()(t,"yuid",[]),n()(t,"selectionReal",[]),t},mounted:function(){this.$store.dispatch("getGjdq"),this.$store.dispatch("getZjzl"),this.$store.dispatch("getRjqzzl"),this.$store.dispatch("getPcs"),this.$store.dispatch("getRjsy"),this.$store.dispatch("getZsbg"),this.getFJ(),this.getList()},methods:n()({changeTu:function(){this.pageC=!this.pageC,1==this.pageC?this.getList():this.getListC()},selectfn:function(t,e){this.multipleSelection=t,this.dataSelection()},dataSelection:function(){console.log("this.multipleSelection",this.multipleSelection),this.selectionReal.splice(this.CurrentPage-1,1,this.multipleSelection),console.log("this.selectionReal",this.selectionReal),this.selectionAll=[];for(var t=0;t<this.selectionReal.length;t++)if(this.selectionReal[t])for(var e=0;e<this.selectionReal[t].length;e++)this.selectionAll.push(this.selectionReal[t][e]);console.log("this.selectionAll",this.selectionAll)},download:function(){var t=this,e={};if(0==this.selectionAll.length)e={pd:this.pdTu};else{for(var l in this.yuid=[],this.selectionAll)this.yuid.push(this.selectionAll[l].DTID);this.pdTu.DTID=this.yuid,e={pd:this.pdTu}}this.$api.post(this.Global.aport4+"/warningInfoController/exportByMxLx",e,function(e){t.downloadM(e,"临住登记总量变化量")},function(t){},{},"blob")},downloadM:function(t){if(t){var e=window.URL.createObjectURL(new Blob([t],{type:"application/xls"})),l=document.createElement("a");l.style.display="none",l.href=e,l.setAttribute("download","临住登记变化量报表"+this.format(new Date,"yyyyMMddhhmmss")+".xls"),document.body.appendChild(l),l.click()}},downloadC:function(){var t=this;0!=this.tableDataC.length?(""==this.pd0.begin?this.pd.LRRQ_DateRange.begin="":null==this.pd0.begin?this.pd.LRRQ_DateRange.begin=null:this.pd.LRRQ_DateRange.begin=this.pd0.begin+"000000",""==this.pd0.end?this.pd.LRRQ_DateRange.end="":null==this.pd0.end?this.pd.LRRQ_DateRange.end=null:this.pd.LRRQ_DateRange.end=this.pd0.end+"000000",this.$api.post(this.Global.aport4+"/eS_LZ_LZXXController/exportList",{pd:this.pd},function(e){t.downloadM(e)},function(t){},{},"blob")):this.$message({message:"列表无数据！",type:"warning"})},pageSizeChange:function(t){this.pageSize=t,this.getListTu(this.CurrentPage,t,this.pdTu)},handleCurrentChange:function(t){this.CurrentPage=t,this.getListTu(t,this.pageSize,this.pdTu)},getFJ:function(){var t=this,e={operatorId:this.$store.state.uid,operatorNm:this.$store.state.uname};this.$api.post(this.Global.aport2+"/data_report/selectSsfjDm",e,function(e){t.fjlist=e.data.SSFJ})},details:function(t){this.xid=t.DTID,this.rybh=t.RYBH,this.detailsDialogVisible=!0},getRadiofj:function(t){1==t?this.pd.LRDW_BH_Like="0":0==t&&(this.pd.LRDW_BH_Like="1")},getRadiopcs:function(t){1==t?this.pd.LRDW_BH="0":0==t&&(this.pd.LRDW_BH="1")},getPCS:function(t){var e=this,l={fjdmList:t};this.$api.post(this.Global.aport3+"/data_report/selectPcsDm",l,function(t){t.success&&(e.pcslist=t.data.PCS)})},getList:function(){var t=this;""==this.pd0.begin?this.pd.LRRQ_DateRange.begin="":null==this.pd0.begin?this.pd.LRRQ_DateRange.begin=null:this.pd.LRRQ_DateRange.begin=this.pd0.begin+"000000",""==this.pd0.end?this.pd.LRRQ_DateRange.end="":null==this.pd0.end?this.pd.LRRQ_DateRange.end=null:this.pd.LRRQ_DateRange.end=this.pd0.end+"000000";var e={pd:this.pd};this.$api.post(this.Global.aport4+"/eS_LZ_LZXXController/getCountByParam",e,function(e){e.success&&(t.seriesT=e.data.series,t.drawLine(e.data.legend,e.data.header,t.seriesT))})},getListC:function(){var t=this;""==this.pd0.begin?this.pd.LRRQ_DateRange.begin="":null==this.pd0.begin?this.pd.LRRQ_DateRange.begin=null:this.pd.LRRQ_DateRange.begin=this.pd0.begin+"000000",""==this.pd0.end?this.pd.LRRQ_DateRange.end="":null==this.pd0.end?this.pd.LRRQ_DateRange.end=null:this.pd.LRRQ_DateRange.end=this.pd0.end+"000000",this.$api.post(this.Global.aport4+"/eS_LZ_LZXXController/getListByParam",{pd:this.pd},function(e){e.success&&(t.tableHeader=e.data.table,t.tableDataC=e.data.resultList)})},getListTu:function(t,e,l){var a=this,s={currentPage:t,showCount:e,pd:l};this.$api.post(this.Global.aport4+"/eS_LZ_LZXXController/getLzListByParams",s,function(t){t.success&&(a.tableData=t.data.resultList,a.TotalResult=t.data.totalResult,0==a.selectionReal.length&&(a.selectionReal=new Array(Math.ceil(a.TotalResult/showCount))),a.$nextTick(function(){a.multipleSelection=[];for(var t=0;t<a.tableData.length;t++)for(var e=0;e<a.selectionAll.length;e++)a.tableData[t].DTID==a.selectionAll[e].DTID&&a.$refs.multipleTable.toggleRowSelection(a.tableData[t],!0)}))})},drawLine:function(t,e,l){this.lineChart=p.a.init(document.getElementById("echarts")),window.onresize=p.a.init(document.getElementById("echarts")).resize;for(var a={normal:{show:!0,position:"top"}},i=0;i<l.length;i++)for(var n=0,o=0;o<l[i].data.length;o++)0!=(n+=l[i].data[o])&&(l[i].label=a);var c=this;c.lineChart.setOption({color:["#5793f3","#d14a61","#675bba"],tooltip:{axisPointer:{type:"cross"}},legend:{data:t},grid:{top:70,bottom:50},xAxis:[{type:"category",axisTick:{alignWithLabel:!0},axisLine:{onZero:!1},data:e}],yAxis:[{type:"value"}],series:l},!0),console.log("series",l),c.lineChart.off("click"),c.lineChart.on("click",function(t){var l={};(l=s()({},c.pd)).hasOwnProperty("LRDW_BH_Like")&&delete l.LRDW_BH_Like,l.hasOwnProperty("LRDW_BH")&&delete l.LRDW_BH,l.LRRQ_DateRange={begin:""==c.pd0.begin?"":null==c.pd0.begin?null:c.pd0.begin+"000000",end:""==c.pd0.end?"":null==c.pd0.end?null:c.pd0.end+"000000"},l.HEADER=e,l.TIME=t.name,l.DW=t.seriesName,c.pdTu=l,console.log("ppppp",l,c.pd),c.page=1,c.CurrentPage=1,c.getListTu(c.CurrentPage,c.pageSize,c.pdTu)}),c.lineChart.resize()},exportexcel:function(){var t=this;console.log("this.pddc",this.pdTu);var e={currentPage:1,showCount:1e4,pd:this.pdTu};this.$api.post(this.Global.aport4+"/eS_LZ_LZXXController/export",e,function(e){t.downloadM(e,"临住登记变化量")},function(t){},{},"blob")}},"downloadM",function(t,e){if(t){var l=window.URL.createObjectURL(new Blob([t],{type:"application/xls"})),a=document.createElement("a");a.style.display="none",a.href=l,a.setAttribute("download",e+this.format(new Date,"yyyyMMddhhmmss")+".xls"),document.body.appendChild(a),a.click()}})}),d={render:function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("div",{staticClass:"yymain"},[l("div",{staticClass:"yytitle"},[l("el-row",{attrs:{type:"flex"}},[l("el-col",{staticClass:"br pr-20",attrs:{span:22}},[l("el-row",{attrs:{align:"center",gutter:2}},[l("el-col",{staticClass:"input-item",attrs:{sm:24,md:12,lg:12}},[l("span",{staticClass:"input-text"},[t._v("时间范围：")]),t._v(" "),l("div",{staticClass:"input-input t-flex t-date"},[l("el-date-picker",{attrs:{format:"yyyy-MM-dd",type:"date",size:"small","value-format":"yyyyMMdd",placeholder:"开始时间"},model:{value:t.pd0.begin,callback:function(e){t.$set(t.pd0,"begin",e)},expression:"pd0.begin"}}),t._v(" "),l("span",{staticClass:"septum"},[t._v("-")]),t._v(" "),l("el-date-picker",{attrs:{format:"yyyy-MM-dd",type:"date",size:"small","value-format":"yyyyMMdd",placeholder:"结束时间"},model:{value:t.pd0.end,callback:function(e){t.$set(t.pd0,"end",e)},expression:"pd0.end"}})],1)]),t._v(" "),l("el-col",{staticClass:"input-item",attrs:{sm:24,md:12,lg:12}},[l("span",{staticClass:"input-text"},[t._v("证件种类：")]),t._v(" "),l("el-select",{staticClass:"input-input",attrs:{multiple:"","multiple-limit":5,"collapse-tags":"",filterable:"",clearable:"","default-first-option":"",placeholder:"请选择",size:"small"},model:{value:t.pd.ZJZL,callback:function(e){t.$set(t.pd,"ZJZL",e)},expression:"pd.ZJZL"}},t._l(t.$store.state.zjzl,function(t){return l("el-option",{key:t.dm,attrs:{label:t.dm+" - "+t.mc,value:t.dm}})}),1)],1),t._v(" "),l("el-col",{staticClass:"input-item",attrs:{sm:24,md:12,lg:12}},[l("span",{staticClass:"input-text"},[t._v("签证种类：")]),t._v(" "),l("el-select",{staticClass:"input-input",attrs:{multiple:"","multiple-limit":5,"collapse-tags":"",filterable:"",clearable:"","default-first-option":"",placeholder:"请选择",size:"small"},model:{value:t.pd.QZZl,callback:function(e){t.$set(t.pd,"QZZl",e)},expression:"pd.QZZl"}},t._l(t.$store.state.rjqzzl,function(t){return l("el-option",{key:t.dm,attrs:{label:t.dm+" - "+t.mc,value:t.dm}})}),1)],1),t._v(" "),l("el-col",{staticClass:"input-item",attrs:{sm:24,md:12,lg:12}},[l("span",{staticClass:"input-text"},[t._v("国家地区：")]),t._v(" "),l("el-select",{staticClass:"input-input",attrs:{multiple:"","multiple-limit":5,"collapse-tags":"",filterable:"",clearable:"","default-first-option":"",placeholder:"请选择",size:"small"},model:{value:t.pd.GJDQ,callback:function(e){t.$set(t.pd,"GJDQ",e)},expression:"pd.GJDQ"}},t._l(t.$store.state.gjdq,function(t){return l("el-option",{key:t.dm,attrs:{label:t.dm+" - "+t.mc,value:t.dm}})}),1)],1),t._v(" "),l("el-col",{staticClass:"input-item",attrs:{sm:24,md:12,lg:12}},[l("span",{staticClass:"input-text"},[t._v("停留事由：")]),t._v(" "),l("el-select",{staticClass:"input-input",attrs:{multiple:"","multiple-limit":5,"collapse-tags":"",filterable:"",clearable:"","default-first-option":"",placeholder:"请选择",size:"small"},model:{value:t.pd.JLSY,callback:function(e){t.$set(t.pd,"JLSY",e)},expression:"pd.JLSY"}},t._l(t.$store.state.rjsy,function(t){return l("el-option",{key:t.dm,attrs:{label:t.dm+" - "+t.mc,value:t.dm}})}),1)],1),t._v(" "),l("el-col",{staticClass:"input-item",attrs:{sm:24,md:12,lg:12}},[l("span",{staticClass:"input-text"},[t._v("所属分局：")]),t._v(" "),l("div",{staticClass:"input-input t-fuzzy-12 t-flex"},[l("el-select",{attrs:{multiple:"","multiple-limit":5,"collapse-tags":"",filterable:"",clearable:"","default-first-option":"",placeholder:"请选择",size:"small"},on:{change:function(e){t.getPCS(t.pd.LRDW_Like)}},model:{value:t.pd.LRDW_Like,callback:function(e){t.$set(t.pd,"LRDW_Like",e)},expression:"pd.LRDW_Like"}},t._l(t.fjlist,function(t){return l("el-option",{key:t.dm,attrs:{label:t.dm+" - "+t.mc,value:t.dm}})}),1),t._v("  \n                    "),l("el-checkbox",{on:{change:function(e){t.getRadiofj(t.checkedfj)}},model:{value:t.checkedfj,callback:function(e){t.checkedfj=e},expression:"checkedfj"}},[t._v("包含")])],1)]),t._v(" "),l("el-col",{staticClass:"input-item",attrs:{sm:24,md:12,lg:12}},[l("span",{staticClass:"input-text"},[t._v("派出所：")]),t._v(" "),l("div",{staticClass:"input-input t-fuzzy-12 t-flex"},[l("el-select",{attrs:{multiple:"","multiple-limit":5,"collapse-tags":"",filterable:"",clearable:"","default-first-option":"",placeholder:"请选择",size:"small"},model:{value:t.pd.LRDW,callback:function(e){t.$set(t.pd,"LRDW",e)},expression:"pd.LRDW"}},t._l(t.pcslist,function(t){return l("el-option",{key:t.dm,attrs:{label:t.mc,value:t.dm}})}),1),t._v("  \n                    "),l("el-checkbox",{on:{change:function(e){t.getRadiopcs(t.checkedpcs)}},model:{value:t.checkedpcs,callback:function(e){t.checkedpcs=e},expression:"checkedpcs"}},[t._v("包含")])],1)]),t._v(" "),l("el-col",{staticClass:"input-item",attrs:{sm:24,md:12,lg:12}},[l("span",{staticClass:"input-text"},[t._v("旅馆名称：")]),t._v(" "),l("el-select",{staticClass:"input-input",attrs:{multiple:"","multiple-limit":5,"collapse-tags":"",filterable:"",clearable:"","default-first-option":"",placeholder:"请选择",size:"small"},model:{value:t.pd.DJDWDM,callback:function(e){t.$set(t.pd,"DJDWDM",e)},expression:"pd.DJDWDM"}},t._l(t.$store.state.zsbg,function(t){return l("el-option",{key:t.dm,attrs:{label:t.mc,value:t.dm}})}),1)],1),t._v(" "),l("el-col",{staticClass:"input-item",attrs:{sm:24,md:12,lg:12}},[l("span",{staticClass:"input-text"},[t._v("日期选择：")]),t._v(" "),l("el-select",{staticClass:"input-input",attrs:{filterable:"","default-first-option":"",placeholder:"请选择",size:"small"},model:{value:t.pd.ZSLX,callback:function(e){t.$set(t.pd,"ZSLX",e)},expression:"pd.ZSLX"}},[l("el-option",{attrs:{value:"0",label:"0 - 请选择"}}),t._v(" "),l("el-option",{attrs:{value:"1",label:"1 - 按日查询"}}),t._v(" "),l("el-option",{attrs:{value:"2",label:"2 - 按月查询"}}),t._v(" "),l("el-option",{attrs:{value:"3",label:"3 - 按季度查询"}}),t._v(" "),l("el-option",{attrs:{value:"4",label:"4 - 按年查询"}})],1)],1)],1)],1),t._v(" "),l("el-col",{staticClass:"down-btn-area",attrs:{span:2}},[l("el-button",{staticClass:"t-mb",attrs:{type:"success",size:"small"},on:{click:function(e){t.page=0,t.tableData=[],t.CurrentPage=1,t.TotalResult=0,t.getList()}}},[t._v("查询")])],1)],1)],1),t._v(" "),l("div",{staticClass:"yycontent t-ml0"},[l("div",{staticClass:"ak-tabs"},[l("div",{staticClass:"ak-tab-item hand",class:{"ak-checked":0==t.page},on:{click:function(e){t.page=0,t.getList()}}},[t._v("\n        图表\n      ")]),t._v(" "),l("div",{staticClass:"ak-tab-item hand",class:{"ak-checked":1==t.page},on:{click:function(e){t.page=1}}},[t._v("\n        列表\n      ")])]),t._v(" "),l("div",{staticClass:"ak-tab-pane"},[l("div",{},[l("span",{staticClass:"t-fr"},[l("i",{directives:[{name:"show",rawName:"v-show",value:0==t.page,expression:"page==0"}],staticClass:"iconbtn hand",class:{"el-icon-s-grid":1==t.pageC,"el-icon-s-data":0==t.pageC},attrs:{title:1==t.pageC?"转为列表":"转为图表"},on:{click:function(e){t.changeTu()}}})]),t._v(" "),l("el-button",{directives:[{name:"show",rawName:"v-show",value:0==t.pageC&&0==t.page,expression:"pageC==false&&page==0"}],attrs:{type:"primary",size:"small"},on:{click:function(e){t.downloadC()}}},[t._v("导出")]),t._v(" "),l("div",{staticStyle:{clear:"both"}})],1),t._v(" "),l("div",{directives:[{name:"show",rawName:"v-show",value:0==t.page,expression:"page==0"}]},[l("div",{directives:[{name:"show",rawName:"v-show",value:1==t.pageC,expression:"pageC==true"}],staticClass:"chart",staticStyle:{width:"100%"}},[l("div",{staticStyle:{width:"100%",height:"400px"},attrs:{id:"echarts"}})]),t._v(" "),l("div",{directives:[{name:"show",rawName:"v-show",value:0==t.pageC,expression:"pageC==false"}],staticClass:"t-mt10"},[l("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableDataC,border:""}},[l("el-table-column",{attrs:{prop:"rq",label:"日期"}}),t._v(" "),t._l(t.tableHeader,function(t,e){return l("el-table-column",{key:e,attrs:{prop:t.code,label:t.lable}})})],2)],1)]),t._v(" "),l("div",{directives:[{name:"show",rawName:"v-show",value:1==t.page,expression:"page==1"}],staticStyle:{width:"100%","text-align":"right"}},[l("el-button",{staticClass:"mb-5",attrs:{type:"primary",size:"small"},on:{click:t.exportexcel}},[t._v("导出")]),t._v(" "),l("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""},on:{select:t.selectfn}},[l("el-table-column",{attrs:{prop:"YWXM",label:"英文姓名"}}),t._v(" "),l("el-table-column",{attrs:{prop:"ZWXM",label:"中文姓名"}}),t._v(" "),l("el-table-column",{attrs:{prop:"XB_DESC",label:"性别"}}),t._v(" "),l("el-table-column",{attrs:{prop:"GJDQ_DESC",label:"国家地区"}}),t._v(" "),l("el-table-column",{attrs:{prop:"CSRQ",label:"出生日期"}}),t._v(" "),l("el-table-column",{attrs:{prop:"ZJZL_DESC",label:"证件种类"}}),t._v(" "),l("el-table-column",{attrs:{prop:"ZJHM",label:"证件号码"}}),t._v(" "),l("el-table-column",{attrs:{prop:"QZZL_DESC",label:"签证种类"}}),t._v(" "),l("el-table-column",{attrs:{prop:"QZHM",label:"签证号码"}}),t._v(" "),l("el-table-column",{attrs:{prop:"LRDW_DESC",label:"派出所名称"}}),t._v(" "),l("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("el-button",{staticClass:"a-btn",attrs:{type:"text",title:"详情",size:"mini",icon:"el-icon-tickets"},on:{click:function(l){t.details(e.row)}}})]}}])})],1),t._v(" "),l("div",{staticClass:"middle-foot"},[l("div",{staticClass:"page-msg"},[l("div",{},[t._v("\n                      共"+t._s(t.TotalResult)+"条记录\n              ")]),t._v(" "),l("div",{},[t._v("\n                每页显示\n                "),l("el-select",{staticClass:"page-select",attrs:{placeholder:"10",size:"mini"},on:{change:function(e){t.pageSizeChange(t.pageSize)}},model:{value:t.pageSize,callback:function(e){t.pageSize=e},expression:"pageSize"}},t._l(t.options,function(t){return l("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1),t._v("\n                条\n              ")],1),t._v(" "),l("div",{},[t._v("\n              共"+t._s(Math.ceil(t.TotalResult/t.pageSize))+"页\n              ")])]),t._v(" "),l("el-pagination",{attrs:{background:"","current-page":t.CurrentPage,"page-size":t.pageSize,layout:"prev, pager, next",total:t.TotalResult},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.CurrentPage=e}}})],1)],1)])]),t._v(" "),l("el-dialog",{attrs:{title:"列表",visible:t.listDialogVisible,width:"1000px"},on:{"update:visible":function(e){t.listDialogVisible=e}}}),t._v(" "),l("el-dialog",{attrs:{title:"临住详情",visible:t.detailsDialogVisible,"custom-class":"big_dialog","append-to-body":!1,modal:!1},on:{"update:visible":function(e){t.detailsDialogVisible=e}}},[l("LZXX",{attrs:{type:t.type,xid:t.xid,rybh:t.rybh,random:(new Date).getTime()}}),t._v(" "),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{attrs:{size:"small"},on:{click:function(e){t.detailsDialogVisible=!1}}},[t._v("取 消")])],1)],1)],1)},staticRenderFns:[]};var r=l("VU/8")(c,d,!1,function(t){l("74dN")},null,null);e.default=r.exports}});
//# sourceMappingURL=85.9a936b7c10053a70ae29.js.map
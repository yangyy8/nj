webpackJsonp([26],{IwlI:function(t,e){},NO8k:function(t,e,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=l("mtWM"),s=l.n(a),o={data:function(){return{pd:{beginTime:"",endTime:""},form:{},tableData:[],tableData1:[],detailsDialogVisible:!1,fj:!0,bgs:!1,level:"1",diaglogtitle:"",dw:"",dwlg:"",cw:!1,cd:!1,sb:!1,dc:0,dcdw:"",bglevel:"",dclevel:"",loading:!0,datashow:!0,formData:{pageIndex:1,pageSize:10}}},activated:function(){this.getList(this.pd)},mounted:function(){this.getList(this.pd)},methods:{handleSelectionChange:function(t){this.multipleSelection=t},getList:function(t){var e=this;this.bgs=!1,this.fj=!0,this.level="1",this.dclevel="1",this.bglevel="";var l={level:"1",dw:"",beginTime:this.pd.beginTime,endTime:this.pd.endTime,operatorId:this.$store.state.uid,operatorNm:this.$store.state.uname},a=this.Global.aport2+"/data_report/selectTjxx";this.$api.post(a,l,function(t){e.tableData=t.data})},getPCS:function(t){var e=this;if(this.dw=t,this.bglevel="","1"==this.level||"3"==this.level){this.dw=t,this.level="2",this.dclevel="2",this.bgs=!1,this.fj=!0;var l={level:"2",dw:t,beginTime:this.pd.beginTime,endTime:this.pd.endTime,operatorId:this.$store.state.uid,operatorNm:this.$store.state.uname},a=this.Global.aport2+"/data_report/selectTjxx";this.$api.post(a,l,function(t){e.tableData=t.data})}},getLG:function(t,e){var l=this;this.dwlg=t,this.bglevel=e,this.bgs=!0,this.fj=!1;e=this.level;"合计"==this.dwlg?"2"==this.level&&(e=1,t=this.dw):this.dclevel="";var a={level:e,dw:t,beginTime:this.pd.beginTime,endTime:this.pd.endTime,operatorId:this.$store.state.uid,operatorNm:this.$store.state.uname},s=this.Global.aport2+"/data_report/selectBgxx";this.$api.post(s,a,function(t){l.tableData=t.data})},getMData:function(){this.formData.pageIndex++,this.toLink(this.dc,this.dcdw)},toLink:function(t,e){var l=this;this.dcdw=e,this.dc=t,this.tableData1=[];var a=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});setTimeout(function(){a.close();var s=l.level;""!=l.bglevel&&(s=l.bglevel),"合计"==l.dcdw&&("1"!=l.level&&(e=l.dwlg),"2"==l.level&&(s=1,e=l.dw),""!=l.bglevel&&""!=l.level&&(s=parseInt(l.bglevel)+parseInt(l.level)),"2"==l.dclevel&&(s=parseInt(l.dclevel)+parseInt(l.level)),5==s&&(e=l.dwlg)),console.log("dw2",e);var o={level:s,dw:e,page:l.formData.pageIndex,limit:l.formData.pageSize,beginTime:l.pd.beginTime,endTime:l.pd.endTime,operatorId:l.$store.state.uid,operatorNm:l.$store.state.uname},i="";0==t?(l.diaglogtitle="错误数据详情",i=l.Global.aport2+"/data_report/selectCwsj",l.cw=!0,l.cd=!1,l.sb=!1):1==t?(l.diaglogtitle="迟报数据详情",i=l.Global.aport2+"/data_report/selectCbsj",l.cw=!1,l.cd=!0,l.sb=!1):2==t&&(l.diaglogtitle="上报省厅迟报数据详情",i=l.Global.aport2+"/data_report/selectXtcbsj",l.cw=!1,l.cd=!0,l.sb=!0),l.$api.post(i,o,function(t){t.success&&(l.tableData1=t.data,l.detailsDialogVisible=!0,l.datashow=t.flag)})},2e3)},getFH:function(t){"1"==this.level||"2"==this.level?this.getList(t):""==this.dw?this.getList(t):this.getPCS(this.dw)},download:function(t){var e=this,l="",a=this.dw,o=this.level;0==t?("1"==this.dclevel?l=window.IPConfig.IP+"/"+this.Global.aport2+"/data_report/exportTjxx":"2"==this.dclevel?l=window.IPConfig.IP+"/"+this.Global.aport2+"/data_report/exportTjxx":"3"==this.bglevel&&(l=window.IPConfig.IP+"/"+this.Global.aport2+"/data_report/exportBgxx",a=this.dwlg),"合计"==this.dwlg?(a=this.dwlg,l=window.IPConfig.IP+"/"+this.Global.aport2+"/data_report/exportBgxx","2"==this.level&&(o=1,a=this.dw)):this.dclevel=""):1==t&&(console.log("this.dc",this.dc),a=this.dcdw,0==this.dc?l=window.IPConfig.IP+"/"+this.Global.aport2+"/data_report/exportCwxx":1==this.dc?l=window.IPConfig.IP+"/"+this.Global.aport2+"/data_report/exportCbxx":2==this.dc&&(l=window.IPConfig.IP+"/"+this.Global.aport2+"/data_report/exportXtcbxx"),""!=this.bglevel&&(o=this.bglevel),"合计"==this.dcdw&&("1"!=this.level&&(a=this.dwlg),"2"==this.level&&(o=1,a=this.dw),""!=this.bglevel&&""!=this.level&&(o=parseInt(this.bglevel)+parseInt(this.level)),"2"==this.dclevel&&(o=parseInt(this.dclevel)+parseInt(this.level)),5==o&&(a=this.dwlg)));var i={level:o,dw:a,beginTime:this.pd.beginTime,endTime:this.pd.endTime,operatorId:this.$store.state.uid,operatorNm:this.$store.state.uname};console.log("this.p",i),s()({method:"post",url:l,data:i,responseType:"blob"}).then(function(t){e.downloadM(t)})},downloadM:function(t){if(t){var e=window.URL.createObjectURL(new Blob([t.data],{type:"application/octet-stream"})),l=document.createElement("a");l.style.display="none",l.href=e,l.setAttribute("download","临住统计列表.xlsx"),document.body.appendChild(l),l.click()}}}},i={render:function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("div",{staticClass:"yymain"},[l("div",{staticClass:"yytitle"},[l("el-row",{attrs:{type:"flex"}},[l("el-col",{staticClass:"br pr-20",attrs:{span:16}},[l("el-row",{attrs:{align:"center",gutter:1}},[l("el-col",{staticClass:"input-item",attrs:{sm:24,md:24,lg:24}},[l("span",{staticClass:"input-text"},[t._v("时间范围：")]),t._v(" "),l("div",{staticClass:"input-input t-flex t-date"},[l("el-date-picker",{attrs:{format:"yyyy-MM-dd",type:"date",size:"small","value-format":"yyyyMMddHHmmss",placeholder:"开始时间"},model:{value:t.pd.beginTime,callback:function(e){t.$set(t.pd,"beginTime",e)},expression:"pd.beginTime"}}),t._v(" "),l("span",{staticClass:"septum"},[t._v("-")]),t._v(" "),l("el-date-picker",{attrs:{format:"yyyy-MM-dd",type:"date",size:"small","value-format":"yyyyMMddHHmmss",placeholder:"结束时间"},model:{value:t.pd.endTime,callback:function(e){t.$set(t.pd,"endTime",e)},expression:"pd.endTime"}})],1)])],1)],1),t._v(" "),l("el-col",{staticClass:"down-btn-area",attrs:{span:8}},[l("el-row",{staticStyle:{"text-align":"right"}},[l("el-button",{attrs:{type:"success",size:"small"},on:{click:function(e){t.getList(t.pd)}}},[t._v("查询")]),t._v(" "),l("el-button",{attrs:{type:"info",size:"small"},on:{click:function(e){t.getFH(t.pd)}}},[t._v("返回")]),t._v(" "),l("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.download(0)}}},[t._v("导出")])],1)],1)],1)],1),t._v(" "),l("div",{staticClass:"yycontent"},[l("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""},on:{"selection-change":t.handleSelectionChange}},[t.fj?l("el-table-column",{key:Math.random(),attrs:{prop:"dw",label:"单位"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("a",{staticClass:"sb",on:{click:function(l){t.getPCS(e.row.dw)}}},[t._v(" "+t._s(e.row.dw)+" ")])]}}])}):t._e(),t._v(" "),t.bgs?l("el-table-column",{key:Math.random(),attrs:{prop:"dw",label:"宾馆"}}):t._e(),t._v(" "),l("el-table-column",{key:Math.random(),attrs:{prop:"zs",label:"总数"}}),t._v(" "),t.fj?l("el-table-column",{key:Math.random(),attrs:{prop:"shm",label:"社会面"}}):t._e(),t._v(" "),t.fj?l("el-table-column",{key:Math.random(),attrs:{prop:"bg",label:"旅馆"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("a",{staticClass:"sb",on:{click:function(l){t.getLG(e.row.dw,"3")}}},[t._v(" "+t._s(e.row.bg)+" ")])]}}])}):t._e(),t._v(" "),l("el-table-column",{attrs:{label:"正确率"}},[l("el-table-column",{attrs:{prop:"cwsj",label:"错误数"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("a",{staticClass:"sb",on:{click:function(l){t.formData.pageIndex=1,t.toLink(0,e.row.dw)}}},[t._v(" "+t._s(e.row.cwsj)+" ")])]}}])}),t._v(" "),l("el-table-column",{attrs:{prop:"zql",label:"正确率"}})],1),t._v(" "),l("el-table-column",{attrs:{label:"及时率"}},[l("el-table-column",{attrs:{prop:"cbsj",label:"迟报数"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("a",{staticClass:"sb",on:{click:function(l){t.formData.pageIndex=1,t.toLink(1,e.row.dw)}}},[t._v(" "+t._s(e.row.cbsj)+" ")])]}}])}),t._v(" "),l("el-table-column",{attrs:{prop:"jsl",label:"及时率"}})],1),t._v(" "),l("el-table-column",{attrs:{label:"上报省厅"}},[l("el-table-column",{attrs:{prop:"xtcbs",label:"迟报数"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("a",{staticClass:"sb",on:{click:function(l){t.formData.pageIndex=1,t.toLink(2,e.row.dw)}}},[t._v(" "+t._s(e.row.xtcbs)+" ")])]}}])}),t._v(" "),l("el-table-column",{attrs:{prop:"xtjsl",label:"及时率"}})],1)],1)],1),t._v(" "),l("el-dialog",{attrs:{title:t.diaglogtitle,customClass:"customWidth",visible:t.detailsDialogVisible,"append-to-body":!0},on:{"update:visible":function(e){t.detailsDialogVisible=e}}},[l("el-row",{staticStyle:{"text-align":"right"}},[l("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.download(1)}}},[t._v("导出")])],1),t._v(" "),l("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData1,border:""},on:{"selection-change":t.handleSelectionChange}},[l("el-table-column",{attrs:{prop:"zwxm",label:"中文姓名"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("span",{class:{yycolor:1==e.row.zwxm_t}},[t._v("   "+t._s(e.row.zwxm))])]}}])}),t._v(" "),l("el-table-column",{attrs:{prop:"ywxm",label:"英文姓名"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("span",{class:{yycolor:1==e.row.ywxm_t}},[t._v("   "+t._s(e.row.ywxm))])]}}])}),t._v(" "),l("el-table-column",{attrs:{prop:"xb",label:"性别"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("span",{class:{yycolor:1==e.row.xb_t}},[t._v("   "+t._s(e.row.xb))])]}}])}),t._v(" "),l("el-table-column",{attrs:{prop:"zjzl",label:"证件种类"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("span",{class:{yycolor:1==e.row.zjzl_t}},[t._v("   "+t._s(e.row.zjzl))])]}}])}),t._v(" "),l("el-table-column",{attrs:{prop:"zjhm",label:"证件号码"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("span",{class:{yycolor:1==e.row.zjhm_t}},[t._v("   "+t._s(e.row.zjhm))])]}}])}),t._v(" "),l("el-table-column",{attrs:{prop:"gjdq",label:"国家地区"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("span",{class:{yycolor:1==e.row.gjdq_t}},[t._v("   "+t._s(e.row.gjdq))])]}}])}),t._v(" "),l("el-table-column",{attrs:{prop:"csrq",label:"出生日期"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("span",{class:{yycolor:1==e.row.csrq_t}},[t._v("   "+t._s(e.row.csrq))])]}}])}),t._v(" "),l("el-table-column",{attrs:{prop:"zsrq",label:"住宿日期"}}),t._v(" "),l("el-table-column",{attrs:{prop:"djdw",label:"登记单位"}}),t._v(" "),l("el-table-column",{attrs:{prop:"ssfj",label:"所属分局"}}),t._v(" "),t.cw?l("el-table-column",{key:Math.random(),attrs:{prop:"cwlx",label:"错误类型",width:"200"}}):t._e(),t._v(" "),t.cd?l("el-table-column",{key:Math.random(),attrs:{prop:"djrq",label:"登记日期"}}):t._e(),t._v(" "),t.sb?l("el-table-column",{key:Math.random(),attrs:{prop:"cjsj",label:"上报日期"}}):t._e(),t._v(" "),l("el-table-column",{attrs:{prop:"bz",label:"备注"}}),t._v(" "),t.datashow?l("p",{staticStyle:{"text-align":"center","line-height":"50px"},attrs:{slot:"append"},slot:"append"},[l("a",{staticClass:"blue01",attrs:{href:"javascript:;"},on:{click:function(e){t.getMData()}}},[t._v("点击加载更多")])]):t._e()],1),t._v(" "),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{attrs:{size:"small"},on:{click:function(e){t.detailsDialogVisible=!1}}},[t._v("取 消")])],1)],1)],1)},staticRenderFns:[]};var n=l("VU/8")(o,i,!1,function(t){l("IwlI"),l("VGUf")},"data-v-a06ef11a",null);e.default=n.exports},VGUf:function(t,e){}});
//# sourceMappingURL=26.0844d0026b827500b796.js.map
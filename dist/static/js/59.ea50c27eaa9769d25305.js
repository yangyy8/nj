webpackJsonp([59],{"1gvQ":function(t,s){},"8Ugm":function(t,s){},"rVR+":function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a,i;e("+5I8");function l(t){0==t.length&&alert("地图库中未录入该地址的坐标。");var s=new SuperMap.GetFeaturesBySQLParameters({queryParameter:{name:"gajg_pcs_3201_pg@ORCL_gt8",attributeFilter:"DWBM='"+t.dm+"'"},datasetNames:["ORCL_gt8:gajg_pcs_3201_pg"]});L.supermap.featureService("http://10.33.66.183:2333/iserver/services/data-gt8/rest/data").getFeaturesBySQL(s,function(s){for(var e=s.result.features.features,a=0;a<e.length;a++){var i=L.latLngBounds(p(e[a].geometry.coordinates)).getCenter();r([i.lat,i.lng],t)}})}function r(t,s){a.flyTo(t,10);var e=L.divIcon({html:"<div style='line-height:40px;text-align:center;font-weight:bold'>"+s.count+"</div>",className:"my-div-icon blue",iconSize:50}),l=L.marker(t,{icon:e,pcsdm:s.dm,pcsmc:s.mc,num:s.count});i.addLayer(l),i.on("mousemove",function(t){t.layer.bindPopup("<div style='font-weight:bold; font-size: 13px; padding-bottom:5px'>"+t.layer.options.pcsmc+"</div><div>总人数："+t.layer.options.num+"</div>").openPopup()}),i.on("mouseout",function(t){t.layer.closePopup()}),l.on("click",function(t){window.jwczvm.getBZHDZ(s.dm,function(t){for(var s=0;s<t.length;s++)o(t[s])})})}function o(t){var s,e,a;i.clearLayers(),s="JWPTBH='"+t.dm+"'",e=function(s){if(s.length>0)for(var e=0;e<s.length;e++)n(s[e].geometry.coordinates.reverse(),t,t.dm);else window.jwczvm.getXY(t.dm,function(s){if(void 0!=s&&s.ycoord>0&&s.xcoord>0){var e=[];e.push(s.ycoord),e.push(s.xcoord),n(e,t,t.dm)}})},a=new SuperMap.GetFeaturesBySQLParameters({queryParameter:{name:"dz_mlp@ORCL_gt8",attributeFilter:s},datasetNames:["ORCL_gt8:dz_mlp"],fromIndex:0,toIndex:10}),L.supermap.featureService("http://10.33.66.183:2333/iserver/services/data-gt8/rest/data").getFeaturesBySQL(a,function(t){var s=t.result.features.features;e(s)})}function n(t,s,e){a.flyTo(t,11);var l=L.divIcon({html:"<div style='line-height:39px;text-align:center'>"+s.count+"</div>",className:"my-div-icon green",iconSize:50}),r=L.marker(t,{icon:l,pcsdm:s.dm,pcsmc:e,num:s.count});i.addLayer(r),i.on("mousemove",function(t){t.layer.bindPopup("<div style='font-weight:bold; font-size: 13px; padding-bottom:5px'>"+t.layer.options.pcsmc+"</div><div>总人数："+t.layer.options.num+"</div>").openPopup()}),i.on("mouseout",function(t){t.layer.closePopup()}),r.on("click",function(t){window.jwczvm.getRyxx(1,5,s.dm,e)})}var p=function(t){for(var s=[],e=0;e<t.length;e++){for(var a=[],i=0;i<t[e].length;i++){for(var l=[],r=0;r<t[e][i].length;r++){var o=[],n=t[e][i][r][0],p=t[e][i][r][0],c=t[e][i][r][1];n=p,p=c,c=n,o.push(p,c),l.push(o)}a.push(l)}s.push(a)}return s},c={data:function(){return{CurrentPage:1,pageSize:5,TotalResult:0,tableData:[],pd:{jzztlx:"1"},swdw:[],show:!0,bzhshow:!1,lgshow:!1,bzhDialogVisible:!1,diatext:"标准化地址",pcs:[],xzqh:[],xxmc:[],radio:1,ssfj:[],sspcs:[],centers:[31.910376,118.525718]}},mounted:function(){var t;window.jwczvm=this,this.$store.dispatch("getQzzl"),this.$store.dispatch("getZjzl"),this.$store.dispatch("getGjdq"),this.$store.dispatch("getRjsy"),this.$store.dispatch("getXB"),this.$store.dispatch("getJzztlx"),this.$store.dispatch("getSf"),t=this.centers,a=L.map("mainMap",{crs:L.CRS.EPSG4326,preferCanvas:!0,center:t,maxZoom:18,minZoom:9,zoom:9,zoomControl:!1,attributionControl:!1,closePopupOnClick:!1}),L.supermap.wmtsLayer("http://10.33.66.183:2333/iserver/services/map-wmts-GADT/wmts-china",{layer:"GADT",style:"default",tilematrixSet:"ChinaPublicServices_GADT",format:"image/png",transparent:!0}).addTo(a),i=L.featureGroup().addTo(a),this.getFJ()},methods:{pageSizeChange:function(t){this.getRyxx(this.CurrentPage,t,this.bzhid,this.mc),console.log("每页 "+t+" 条")},handleCurrentChange:function(t){this.getRyxx(t,this.pageSize,this.bzhid,this.mc),console.log("当前页: "+t)},getFJ:function(){var t=this,s={operatorId:this.$store.state.uid,operatorNm:this.$store.state.uname};this.$api.post(this.Global.aport2+"/data_report/selectSsfjDm",s,function(s){t.ssfj=s.data.SSFJ})},getSSPCS:function(t){var s=this;this.$set(this.pd,"sspcs","");var e=[];e.push(t),console.log(e);var a={fjdmList:e};this.$api.post(this.Global.aport2+"/data_report/selectPcsDm",a,function(t){t.success&&(s.sspcs=t.data.PCS)})},changtab:function(){this.show=!this.show},changeTSY:function(t){"1"==t?(this.lgshow=!0,this.bzhshow=!1):"2"==t?(this.lgshow=!1,this.bzhshow=!0):(this.lgshow=!1,this.bzhshow=!1)},getGX:function(){var t=this;this.$api.get(this.Global.aport1+"/servicemap/getUniversity",null,function(s){console.log(s.data),t.xxmc=s.data})},doset:function(){this.$set(this.pd,"gjdqArray",[]),this.$set(this.pd,"sfArray",[]),this.$set(this.pd,"xb",""),this.$set(this.pd,"fwcs",""),this.$set(this.pd,"zjzl",""),this.$set(this.pd,"jlsyArray",[]),this.$set(this.pd,"jzztlx",""),this.$set(this.pd,"ssfj",""),this.$set(this.pd,"sspcs",""),this.$set(this.pd,"csrqStart",""),this.$set(this.pd,"csrqEnd",""),this.$set(this.pd,"tlyxqStart",""),this.$set(this.pd,"tlyxqEnd",""),this.$set(this.pd,"sjxfStart",""),this.$set(this.pd,"sjxfEnd","")},getSearch:function(){var t;t=this.centers,i.clearLayers(),a.flyTo(t,10),window.jwczvm.getPCS(function(t){if(t.length>0)for(var s=0;s<t.length;s++)l(t[s])})},getPCS:function(t){var s=this;this.show,this.show;var e="";void 0!=this.pd.sspcs&&""!=this.pd.sspcs?e=this.pd.sspcs.substr(0,12):void 0==this.pd.ssfj||null==this.pd.ssfj||""==this.pd.ssfj||(e=this.pd.ssfj.substr(0,6)),console.log(e);var a=[],i={gjdqArray:this.pd.gjdqArray,xb:this.pd.xb,sfArray:this.pd.sfArray,fwcs:this.pd.fwcs,zjzl:this.pd.zjzl,jlsyArray:this.pd.jlsyArray,jzztlx:this.pd.jzztlx,ssfj:e,csrqStart:this.pd.csrqStart,csrqEnd:this.pd.csrqEnd,tlyxqStart:this.pd.tlyxqStart,tlyxqEnd:this.pd.tlyxqEnd,sjxfStart:this.pd.sjxfStart,sjxfEnd:this.pd.sjxfEnd},l=this.Global.aport+"/ywczdt/getCZDJXXPCSList";this.$api.post(l,i,function(e){if(e.success){for(var i=e.data,l=0;l<i.length;l++)a.push(i[l]);if(0==a.length)return void s.$message.error("没有查询到数据信息! ");t&&t(a)}}),t(a)},getBZHDZ:function(t,s){var e="";e=void 0!=this.pd.sspcs&&""!=this.pd.sspcs?this.pd.sspcs.substr(0,12):this.pd.ssfj.substr(0,6);var a=[],i={gjdqArray:this.pd.gjdqArray,xb:this.pd.xb,sfArray:this.pd.sfArray,fwcs:this.pd.fwcs,zjzl:this.pd.zjzl,jlsyArray:this.pd.jlsyArray,jzztlx:this.pd.jzztlx,ssfj:e,csrqStart:this.pd.csrqStart,csrqEnd:this.pd.csrqEnd,tlyxqStart:this.pd.tlyxqStart,tlyxqEnd:this.pd.tlyxqEnd,sjxfStart:this.pd.sjxfStart,sjxfEnd:this.pd.sjxfEnd,ywpcsdm:t},l=this.Global.aport+"/ywczdt/getCZDJXXBZHDZList";this.$api.post(l,i,function(t){if(t.success){for(var e=t.data,i=0;i<e.length;i++)a.push(e[i]);s&&s(a)}}),s(a)},getRyxx:function(t,s,e,a){var i=this,l="";l=void 0!=this.pd.sspcs&&""!=this.pd.sspcs?this.pd.sspcs.substr(0,12):this.pd.ssfj.substr(0,6),1==t&&(this.tableData=[],this.TotalResult=0,this.CurrentPage=1),this.bzhid=e,this.mc=a,this.diatext=this.mc;var r={currentPage:t,showCount:s,xxdz:this.bzhid,gjdqArray:this.pd.gjdqArray,xb:this.pd.xb,sfArray:this.pd.sfArray,fwcs:this.pd.fwcs,zjzl:this.pd.zjzl,jlsyArray:this.pd.jlsyArray,jzztlx:this.pd.jzztlx,ssfj:l,csrqStart:this.pd.csrqStart,csrqEnd:this.pd.csrqEnd,tlyxqStart:this.pd.tlyxqStart,tlyxqEnd:this.pd.tlyxqEnd,sjxfStart:this.pd.sjxfStart,sjxfEnd:this.pd.sjxfEnd},o=this.Global.aport+"/ywczdt/getCZDJXXRYList";this.$api.post(o,r,function(t){t.success&&(console.log(t.data),i.tableData=t.data.resultList,i.TotalResult=t.data.totalResult)}),this.bzhDialogVisible=!0},getXY:function(t,s){var e={url:this.Global.xyaddress+"?dz="+t};this.$api.post(this.Global.aport+"/zxdt/getCtUrl",e,function(t){s&&s(t.data.result)})},gotos:function(t,s){var e=this.$router.resolve({path:"/Home/RYHX_NX",query:{zjhm:t,gjdq:s}});window.open(e.href,"_blank")}}},d={render:function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"yymain "},[a("div",{staticClass:"mapbj lzxx",attrs:{id:"mainMap"}}),t._v(" "),a("div",{staticClass:"fxleft"},[a("div",{staticClass:"fxbnt"},[t.show?a("el-button",{staticStyle:{"border-radius":"0px!important","border-width":"1px 1px 0px 1px"},attrs:{size:"mini",type:"primary",icon:"iconfont el-icon-yy-xiangshangjiantou"},on:{click:function(s){t.changtab()}}}):a("el-button",{staticStyle:{"border-radius":"0px!important"},attrs:{size:"mini",type:"primary",icon:"iconfont el-icon-yy-xiangxiajiantou"},on:{click:function(s){t.changtab()}}})],1),t._v(" "),a("el-collapse-transition",[t.show?a("div",{staticClass:"fxcont"},[a("el-row",{attrs:{gutter:2}},[a("el-col",{attrs:{span:12}},[a("span",{staticClass:"yy-input-text"},[t._v("\n                    所属分局：")]),t._v(" "),a("el-select",{staticClass:"yy-input-input",attrs:{filterable:"",clearable:"","default-first-option":"",placeholder:"请选择",size:"small"},on:{change:function(s){t.getSSPCS(t.pd.ssfj)}},model:{value:t.pd.ssfj,callback:function(s){t.$set(t.pd,"ssfj",s)},expression:"pd.ssfj"}},t._l(t.ssfj,function(t,s){return a("el-option",{key:s,attrs:{label:t.mc,value:t.dm}})}),1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("span",{staticClass:"yy-input-text"},[t._v("所属派出所：")]),t._v(" "),a("el-select",{staticClass:"yy-input-input",attrs:{filterable:"",clearable:"","default-first-option":"",placeholder:"请选择",size:"small"},model:{value:t.pd.sspcs,callback:function(s){t.$set(t.pd,"sspcs",s)},expression:"pd.sspcs"}},t._l(t.sspcs,function(t,s){return a("el-option",{key:s,attrs:{label:t.mc,value:t.dm}})}),1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("span",{staticClass:"yy-input-text"},[t._v("性别：")]),t._v(" "),a("el-select",{staticClass:"yy-input-input",attrs:{filterable:"",clearable:"","default-first-option":"",placeholder:"请选择",size:"small"},model:{value:t.pd.xb,callback:function(s){t.$set(t.pd,"xb",s)},expression:"pd.xb"}},t._l(t.$store.state.xb,function(t,s){return a("el-option",{key:s,attrs:{label:t.mc,value:t.dm}})}),1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("span",{staticClass:"yy-input-text"},[t._v("服务处所：")]),t._v(" "),a("el-input",{staticClass:"yy-input-input",attrs:{placeholder:"请输入内容",size:"small"},model:{value:t.pd.fwcs,callback:function(s){t.$set(t.pd,"fwcs",s)},expression:"pd.fwcs"}})],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("span",{staticClass:"yy-input-text"},[t._v("证件种类：")]),t._v(" "),a("el-select",{staticClass:"yy-input-input",attrs:{filterable:"",clearable:"","default-first-option":"",placeholder:"请选择",size:"small"},model:{value:t.pd.zjzl,callback:function(s){t.$set(t.pd,"zjzl",s)},expression:"pd.zjzl"}},t._l(t.$store.state.zjzl,function(t,s){return a("el-option",{key:s,attrs:{label:t.mc,value:t.dm}})}),1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("span",{staticClass:"yy-input-text"},[t._v("居住状态类型：")]),t._v(" "),a("el-select",{staticClass:"yy-input-input",attrs:{filterable:"",clearable:"","default-first-option":"",placeholder:"请选择",size:"small"},model:{value:t.pd.jzztlx,callback:function(s){t.$set(t.pd,"jzztlx",s)},expression:"pd.jzztlx"}},t._l(t.$store.state.jzztlx,function(t,s){return a("el-option",{key:s,attrs:{label:t.mc,value:t.dm}})}),1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("span",{staticClass:"yy-input-text"},[t._v("国家地区：")]),t._v(" "),a("el-select",{staticClass:"yy-input-input",attrs:{multiple:"",filterable:"",clearable:"","default-first-option":"",placeholder:"请选择",size:"small"},model:{value:t.pd.gjdqArray,callback:function(s){t.$set(t.pd,"gjdqArray",s)},expression:"pd.gjdqArray"}},t._l(t.$store.state.gjdq,function(t,s){return a("el-option",{key:s,attrs:{label:t.mc,value:t.dm}})}),1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("span",{staticClass:"yy-input-text"},[t._v("身份：")]),t._v(" "),a("el-select",{staticClass:"yy-input-input",attrs:{multiple:"",filterable:"",clearable:"","default-first-option":"",placeholder:"请选择",size:"small"},model:{value:t.pd.sfArray,callback:function(s){t.$set(t.pd,"sfArray",s)},expression:"pd.sfArray"}},t._l(t.$store.state.sf,function(t,s){return a("el-option",{key:s,attrs:{label:t.mc,value:t.dm}})}),1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("span",{staticClass:"yy-input-text"},[t._v("居留事由：")]),t._v(" "),a("el-select",{staticClass:"yy-input-input",attrs:{multiple:"",filterable:"",clearable:"","default-first-option":"",placeholder:"请选择",size:"small"},model:{value:t.pd.jlsyArray,callback:function(s){t.$set(t.pd,"jlsyArray",s)},expression:"pd.jlsyArray"}},t._l(t.$store.state.rjsy,function(t,s){return a("el-option",{key:s,attrs:{label:t.mc,value:t.dm}})}),1)],1)],1),t._v(" "),a("el-row",{staticStyle:{border:"1px solid #cccccc","margin-top":"10px","margin-right":"10px","padding-top":"10px",background:"#EFF3F6"},attrs:{gutter:1}},[a("el-col",{staticClass:"input-item",attrs:{span:24}},[a("span",{staticClass:"input-text"},[t._v("出生日期：")]),t._v(" "),a("div",{staticClass:"input-input t-flex"},[a("el-date-picker",{attrs:{format:"yyyy-MM-dd",type:"date",size:"small","value-format":"yyyy/MM/dd",placeholder:"开始时间"},model:{value:t.pd.csrqStart,callback:function(s){t.$set(t.pd,"csrqStart",s)},expression:"pd.csrqStart"}}),t._v(" "),a("span",{staticClass:"septum"},[t._v("-")]),t._v(" "),a("el-date-picker",{attrs:{format:"yyyy-MM-dd",type:"date",size:"small","value-format":"yyyy/MM/dd",placeholder:"结束时间"},model:{value:t.pd.csrqEnd,callback:function(s){t.$set(t.pd,"csrqEnd",s)},expression:"pd.csrqEnd"}})],1)]),t._v(" "),a("el-col",{staticClass:"input-item",attrs:{span:24}},[a("span",{staticClass:"input-text"},[t._v("停留有效期：")]),t._v(" "),a("div",{staticClass:"input-input t-flex"},[a("el-date-picker",{attrs:{format:"yyyy-MM-dd",type:"date",size:"small","value-format":"yyyy/MM/dd",placeholder:"开始时间"},model:{value:t.pd.tlyxqStart,callback:function(s){t.$set(t.pd,"tlyxqStart",s)},expression:"pd.tlyxqStart"}}),t._v(" "),a("span",{staticClass:"septum"},[t._v("-")]),t._v(" "),a("el-date-picker",{attrs:{format:"yyyy-MM-dd",type:"date",size:"small","value-format":"yyyy/MM/dd",placeholder:"结束时间"},model:{value:t.pd.tlyxqEnd,callback:function(s){t.$set(t.pd,"tlyxqEnd",s)},expression:"pd.tlyxqEnd"}})],1)]),t._v(" "),a("el-col",{staticClass:"input-item",attrs:{span:24}},[a("span",{staticClass:"input-text"},[t._v("市局下发时间：")]),t._v(" "),a("div",{staticClass:"input-input t-flex"},[a("el-date-picker",{attrs:{format:"yyyy-MM-dd",type:"date",size:"small","value-format":"yyyy/MM/dd",placeholder:"开始时间"},model:{value:t.pd.sjxfStart,callback:function(s){t.$set(t.pd,"sjxfStart",s)},expression:"pd.sjxfStart"}}),t._v(" "),a("span",{staticClass:"septum"},[t._v("-")]),t._v(" "),a("el-date-picker",{attrs:{format:"yyyy-MM-dd",type:"date",size:"small","value-format":"yyyy/MM/dd",placeholder:"结束时间"},model:{value:t.pd.sjxfEnd,callback:function(s){t.$set(t.pd,"sjxfEnd",s)},expression:"pd.sjxfEnd"}})],1)])],1),t._v(" "),a("el-row",{attrs:{type:"flex"}},[a("el-col",{staticStyle:{"text-align":"center"},attrs:{span:24}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(s){t.getSearch()}}},[t._v("确定")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(s){t.doset()}}},[t._v("重置")])],1)],1)],1):t._e()])],1),t._v(" "),a("div",{staticClass:"bghome"},[a("el-dialog",{attrs:{title:t.diatext,visible:t.bzhDialogVisible},on:{"update:visible":function(s){t.bzhDialogVisible=s}}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[a("el-table-column",{attrs:{label:"照片"},scopedSlots:t._u([{key:"default",fn:function(s){return[s.row.zp?a("div",[a("el-popover",{attrs:{placement:"right",title:"",trigger:"hover"}},[a("img",{staticStyle:{"max-width":"700px","max-height":"700px"},attrs:{src:s.row.zp}}),t._v(" "),a("img",{attrs:{slot:"reference",src:s.row.zp,alt:s.row.zp,width:"50",height:"50"},slot:"reference"})])],1):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"sf",label:"身份"}}),t._v(" "),a("el-table-column",{attrs:{prop:"fwcs",label:"服务处所"}}),t._v(" "),a("el-table-column",{attrs:{prop:"ywxm",label:"英文姓名"}}),t._v(" "),a("el-table-column",{attrs:{prop:"zwxm",label:"中文姓名"}}),t._v(" "),a("el-table-column",{attrs:{prop:"xb",label:"性别",width:"60"}}),t._v(" "),a("el-table-column",{attrs:{prop:"csrq",label:"出生日期"}}),t._v(" "),a("el-table-column",{attrs:{prop:"djrq",label:"登记日期"}}),t._v(" "),a("el-table-column",{attrs:{prop:"gjdq",label:"国家地区"}}),t._v(" "),a("el-table-column",{attrs:{prop:"zjzl",label:"证件种类"}}),t._v(" "),a("el-table-column",{attrs:{prop:"zjhm",label:"证件号码"},scopedSlots:t._u([{key:"default",fn:function(s){return[a("span",{staticStyle:{color:"yellow",cursor:"pointer"},on:{click:function(e){t.gotos(s.row.zjhm,s.row.gjdqdm)}}},[t._v(t._s(s.row.zjhm))])]}}])})],1),t._v(" "),a("div",{staticClass:"middle-foot mt-10"},[a("div",{staticClass:"page-msg"},[a("div",{staticClass:"crrcolor"},[t._v("\n              共"+t._s(t.TotalResult)+"条记录\n              ")]),t._v(" "),a("div",{staticClass:"crrcolor"}),t._v(" "),a("div",{staticClass:"crrcolor"})]),t._v(" "),a("el-pagination",{attrs:{background:"","current-page":t.CurrentPage,"page-size":t.pageSize,layout:"prev, pager, next",total:t.TotalResult},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(s){t.CurrentPage=s}}})],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("img",{staticStyle:{cursor:"pointer"},attrs:{src:e("JmKm"),border:"0"},on:{click:function(s){t.bzhDialogVisible=!1}}})]),t._v(" "),a("div",{staticClass:"arrow_line",staticStyle:{left:"0px",top:"0px","border-bottom-width":"0","border-right-width":"0"}}),t._v(" "),a("div",{staticClass:"arrow_line",staticStyle:{right:"0px",top:"0px","border-bottom-width":"0","border-left-width":"0"}}),t._v(" "),a("div",{staticClass:"arrow_line",staticStyle:{left:"0px",bottom:"0px","border-top-width":"0","border-right-width":"0"}}),t._v(" "),a("div",{staticClass:"arrow_line",staticStyle:{right:"0px",bottom:"0px","border-top-width":"0","border-left-width":"0"}})],1)],1)])},staticRenderFns:[]};var u=e("VU/8")(c,d,!1,function(t){e("8Ugm"),e("1gvQ")},"data-v-23d9aa44",null);s.default=u.exports}});
//# sourceMappingURL=59.ea50c27eaa9769d25305.js.map
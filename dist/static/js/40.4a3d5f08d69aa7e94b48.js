webpackJsonp([40],{kKnL:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a={data:function(){return{CurrentPage:1,pageSize:10,TotalResult:0,pd:{},nation:[],fileList:[],actions:"",uploadDialogVisible:!1,detailsDialogVisible:!1,editsDialogVisible:!1,editForm:{},mapForm:{},form:{},uploadIconData:{token:this.$store.state.token},options:[{value:10,label:"10"},{value:20,label:"20"},{value:30,label:"30"}],tableData:[],type:"",xid:""}},activated:function(){this.detailsDialogVisible=!1},mounted:function(){this.$store.dispatch("getGjdq"),this.$store.dispatch("getYmqzzl"),this.$store.dispatch("getXB"),this.actions=window.IPConfig.IP+this.Global.aport3},methods:{handleSelectionChange:function(t){this.multipleSelection=t},pageSizeChange:function(t){this.getList(this.CurrentPage,t,this.pd),console.log("每页 "+t+" 条")},handleCurrentChange:function(t){this.getList(t,this.pageSize,this.pd),console.log("当前页: "+t)},getList:function(t,e,s){var a=this,i={currentPage:t,showCount:e,pd:s,token:this.$store.state.token};this.$api.post(this.Global.aport3+"/drymdbqz/getYMDBQZPage",i,function(t){"1000001"==t.code&&(window.location.href="#/"),a.tableData=t.data.resultList,a.TotalResult=t.data.totalResult})},details:function(t){this.mapForm=t,this.detailsDialogVisible=!0},edits:function(t){this.editForm=t,this.editsDialogVisible=!0},editsItem:function(){var t=this;this.editForm.token=this.$store.state.token,this.$api.post(this.Global.aport3+"/drymdbqz/updateYMDBQZ",this.editForm,function(e){"1000001"==e.code&&(window.location.href="#/"),e.success?(t.$message({message:"保存成功！",type:"success"}),t.editsDialogVisible=!1,t.getList(t.CurrentPage,t.pageSize,t.pd)):t.$message.error(e.Message)},function(e){t.$message.error("失败了")})},deletes:function(t){var e=this,s={GUID:t.GUID,token:this.$store.state.token};this.$confirm("您是否确认删除？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$api.post(e.Global.aport3+"/drymdbqz/deleteYMDBQZById",s,function(t){"1000001"==t.code&&(window.location.href="#/"),t.success?(e.$message({message:"删除成功！",type:"success"}),e.getList(e.CurrentPage,e.pageSize,e.pd)):e.$message.error(t.Message)},function(t){e.$message.error("失败了")})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},upSuccess:function(t){t.success?this.$message({message:t.data,type:"success"}):this.$message.error(t.message),this.uploadDialogVisible=!1,this.getList(this.CurrentPage,this.pageSize,this.pd)},beforeAvatarUpload:function(t){var e="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"===t.type,s="application/vnd.ms-excel"===t.type;return e||s||this.$message.error("上传文件只能是 xlsx或者xls 格式!"),e||s},showUpload:function(){this.uploadDialogVisible=!0,this.typemd="",console.log(this.$refs.upload),this.$refs.upload&&this.$refs.upload.clearFiles()},submitUpload:function(){0!=this.$refs.upload.uploadFiles.length?this.$refs.upload.submit():this.$message({message:"请先选择文件！",type:"warning"})},download:function(){window.location.href=window.IPConfig.IP+"/"+this.Global.aport3+"/webapp/templateFile/代办签证数据导入模板.xlsx"}}},i={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"yymain tshu"},[s("div",{staticClass:"yytitle"},[s("el-row",{attrs:{type:"flex"}},[s("el-col",{staticClass:"br pr-20",attrs:{span:22}},[s("el-row",{attrs:{align:"center",gutter:2}},[s("el-col",{staticClass:"input-item",attrs:{sm:24,md:12,lg:8}},[s("span",{staticClass:"input-text"},[t._v("姓名：")]),t._v(" "),s("el-input",{staticClass:"input-input",attrs:{placeholder:"请输入内容",size:"small"},model:{value:t.pd.XM,callback:function(e){t.$set(t.pd,"XM",e)},expression:"pd.XM"}})],1),t._v(" "),s("el-col",{staticClass:"input-item",attrs:{sm:24,md:12,lg:8}},[s("span",{staticClass:"input-text"},[t._v("身份证号：")]),t._v(" "),s("el-input",{staticClass:"input-input",attrs:{placeholder:"请输入内容",size:"small"},model:{value:t.pd.SFZH,callback:function(e){t.$set(t.pd,"SFZH",e)},expression:"pd.SFZH"}})],1),t._v(" "),s("el-col",{staticClass:"input-item",attrs:{sm:24,md:12,lg:8}},[s("span",{staticClass:"input-text"},[t._v("性别：")]),t._v(" "),s("el-select",{staticClass:"input-input",attrs:{placeholder:"请选择",filterable:"",clearable:"","default-first-option":"",size:"small"},model:{value:t.pd.XBDM,callback:function(e){t.$set(t.pd,"XBDM",e)},expression:"pd.XBDM"}},t._l(t.$store.state.xb,function(t,e){return s("el-option",{key:e,attrs:{label:t.dm+" - "+t.mc,value:t.dm}})}),1)],1),t._v(" "),s("el-col",{staticClass:"input-item",attrs:{sm:24,md:12,lg:8}},[s("span",{staticClass:"input-text"},[t._v("移民签证种类：")]),t._v(" "),s("el-select",{staticClass:"input-input",attrs:{filterable:"",clearable:"","default-first-option":"",placeholder:"请选择",size:"small"},model:{value:t.pd.YMQZZLDM,callback:function(e){t.$set(t.pd,"YMQZZLDM",e)},expression:"pd.YMQZZLDM"}},t._l(t.$store.state.ymqzzl,function(t,e){return s("el-option",{key:e,attrs:{label:t.dm+" - "+t.mc,value:t.dm}})}),1)],1),t._v(" "),s("el-col",{staticClass:"input-item",attrs:{sm:24,md:12,lg:8}},[s("span",{staticClass:"input-text"},[t._v("申请时间：")]),t._v(" "),s("div",{staticClass:"input-input t-flex t-date"},[s("el-date-picker",{attrs:{format:"yyyy-MM-dd",type:"date",size:"small","value-format":"yyyy-MM-dd",placeholder:"开始时间"},model:{value:t.pd.SQSJStart,callback:function(e){t.$set(t.pd,"SQSJStart",e)},expression:"pd.SQSJStart"}}),t._v(" "),s("span",{staticClass:"septum"},[t._v("-")]),t._v(" "),s("el-date-picker",{attrs:{format:"yyyy-MM-dd",type:"date",size:"small","value-format":"yyyy-MM-dd",placeholder:"结束时间"},model:{value:t.pd.SQSJEnd,callback:function(e){t.$set(t.pd,"SQSJEnd",e)},expression:"pd.SQSJEnd"}})],1)]),t._v(" "),s("el-col",{staticClass:"input-item",attrs:{sm:24,md:12,lg:8}},[s("span",{staticClass:"input-text"},[t._v("签证国家：")]),t._v(" "),s("el-select",{staticClass:"input-input",attrs:{filterable:"",clearable:"","default-first-option":"",placeholder:"请选择",size:"small"},model:{value:t.pd.QZGJDM,callback:function(e){t.$set(t.pd,"QZGJDM",e)},expression:"pd.QZGJDM"}},t._l(t.$store.state.gjdq,function(t,e){return s("el-option",{key:e,attrs:{label:t.dm+" - "+t.mc,value:t.dm}})}),1)],1)],1)],1),t._v(" "),s("el-col",{staticClass:"down-btn-area",attrs:{span:2}},[s("el-button",{attrs:{type:"success",size:"small"},on:{click:function(e){t.CurrentPage=1,t.getList(t.CurrentPage,t.pageSize,t.pd)}}},[t._v("查询")])],1)],1)],1),t._v(" "),s("div",{staticClass:"yycontent"},[s("el-row",{staticClass:"mb-15"},[s("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.showUpload}},[t._v("批量导入")]),t._v(" "),s("el-button",{attrs:{type:"success",size:"small"},on:{click:t.download}},[t._v("模板下载")])],1),t._v(" "),s("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""},on:{"selection-change":t.handleSelectionChange}},[s("el-table-column",{attrs:{prop:"XM",label:"姓名"}}),t._v(" "),s("el-table-column",{attrs:{prop:"SFZH",label:"身份证号"}}),t._v(" "),s("el-table-column",{attrs:{prop:"XBMC",label:"性别"}}),t._v(" "),s("el-table-column",{attrs:{prop:"YMQZZLMC",label:"移民签证种类"}}),t._v(" "),s("el-table-column",{attrs:{prop:"SQSJ",label:"申请时间"}}),t._v(" "),s("el-table-column",{attrs:{prop:"QZGJMC",label:"签证国家"}}),t._v(" "),s("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-button",{staticClass:"a-btn",attrs:{type:"text",title:"详情",icon:"el-icon-document"},on:{click:function(s){t.details(e.row)}}}),t._v(" "),s("el-button",{staticClass:"a-btn",attrs:{type:"text",title:"编辑",icon:"el-icon-edit"},on:{click:function(s){t.edits(e.row)}}}),t._v(" "),s("el-button",{staticClass:"a-btn",attrs:{type:"text",title:"删除",icon:"el-icon-delete"},on:{click:function(s){t.deletes(e.row)}}})]}}])})],1),t._v(" "),s("div",{staticClass:"middle-foot"},[s("div",{staticClass:"page-msg"},[s("div",{},[t._v("\n            共"+t._s(t.TotalResult)+"条记录\n        ")]),t._v(" "),s("div",{},[t._v("\n          每页显示\n          "),s("el-select",{staticClass:"page-select",attrs:{placeholder:"10",size:"mini"},on:{change:function(e){t.pageSizeChange(t.pageSize)}},model:{value:t.pageSize,callback:function(e){t.pageSize=e},expression:"pageSize"}},t._l(t.options,function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1),t._v("\n          条\n        ")],1),t._v(" "),s("div",{},[t._v("\n          共"+t._s(Math.ceil(t.TotalResult/t.pageSize))+"页\n        ")])]),t._v(" "),s("el-pagination",{attrs:{background:"","current-page":t.CurrentPage,"page-size":t.pageSize,layout:"prev, pager, next",total:t.TotalResult},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.CurrentPage=e}}})],1)],1),t._v(" "),s("el-dialog",{attrs:{title:"上传模板",visible:t.uploadDialogVisible,width:"640px"},on:{"update:visible":function(e){t.uploadDialogVisible=e}}},[s("el-form",[s("el-row",{attrs:{type:"flex"}},[s("el-col",{attrs:{span:24}},[s("el-upload",{ref:"upload",staticClass:"input-input",attrs:{action:t.actions+"/drymdbqz/readExcel","file-list":t.fileList,multiple:"","on-success":t.upSuccess,data:t.uploadIconData,"before-upload":t.beforeAvatarUpload,limit:1,"auto-upload":!1}},[s("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("选取文件")]),t._v(" "),s("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:t.submitUpload}},[t._v("上传到服务器")]),t._v(" "),s("br"),t._v(" "),s("span",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传EXCEL文件")])],1)],1)],1)],1)],1),t._v(" "),s("el-dialog",{attrs:{title:"编辑",visible:t.editsDialogVisible},on:{"update:visible":function(e){t.editsDialogVisible=e}}},[s("el-form",{ref:"editForm"},[s("el-row",{staticClass:"mb-6",attrs:{gutter:3}},[s("el-col",{staticClass:"input-item",attrs:{span:12}},[s("span",{staticClass:"input-text"},[t._v("姓名：")]),t._v(" "),s("el-input",{staticClass:"input-input",attrs:{placeholder:"请输入内容",size:"small"},model:{value:t.editForm.XM,callback:function(e){t.$set(t.editForm,"XM",e)},expression:"editForm.XM"}})],1),t._v(" "),s("el-col",{staticClass:"input-item",attrs:{span:12}},[s("span",{staticClass:"input-text"},[t._v("身份证号：")]),t._v(" "),s("el-input",{staticClass:"input-input",attrs:{placeholder:"请输入内容",size:"small"},model:{value:t.editForm.SFZH,callback:function(e){t.$set(t.editForm,"SFZH",e)},expression:"editForm.SFZH"}})],1),t._v(" "),s("el-col",{staticClass:"input-item",attrs:{span:12}},[s("span",{staticClass:"input-text"},[t._v("性别：")]),t._v(" "),s("el-select",{staticClass:"input-input",attrs:{placeholder:"请选择",filterable:"",clearable:"","default-first-option":"",size:"small"},model:{value:t.editForm.XBDM,callback:function(e){t.$set(t.editForm,"XBDM",e)},expression:"editForm.XBDM"}},t._l(t.$store.state.xb,function(t,e){return s("el-option",{key:e,attrs:{label:t.dm+" - "+t.mc,value:t.dm}})}),1)],1),t._v(" "),s("el-col",{staticClass:"input-item",attrs:{span:12}},[s("span",{staticClass:"input-text"},[t._v("出生日期：")]),t._v(" "),s("el-date-picker",{staticClass:"input-input",attrs:{format:"yyyy-MM-dd",type:"date",size:"small","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:t.editForm.CSRQ,callback:function(e){t.$set(t.editForm,"CSRQ",e)},expression:"editForm.CSRQ"}})],1),t._v(" "),s("el-col",{staticClass:"input-item",attrs:{span:12}},[s("span",{staticClass:"input-text"},[t._v("移民签证种类：")]),t._v(" "),s("el-select",{staticClass:"input-input",attrs:{filterable:"",clearable:"","default-first-option":"",placeholder:"请选择",size:"small"},model:{value:t.editForm.YMQZZLDM,callback:function(e){t.$set(t.editForm,"YMQZZLDM",e)},expression:"editForm.YMQZZLDM"}},t._l(t.$store.state.ymqzzl,function(t,e){return s("el-option",{key:e,attrs:{label:t.dm+" - "+t.mc,value:t.dm}})}),1)],1),t._v(" "),s("el-col",{staticClass:"input-item",attrs:{span:12}},[s("span",{staticClass:"input-text"},[t._v("签证国家：")]),t._v(" "),s("el-select",{staticClass:"input-input",attrs:{filterable:"",clearable:"","default-first-option":"",placeholder:"请选择",size:"small"},model:{value:t.editForm.QZGJDM,callback:function(e){t.$set(t.editForm,"QZGJDM",e)},expression:"editForm.QZGJDM"}},t._l(t.$store.state.gjdq,function(t,e){return s("el-option",{key:e,attrs:{label:t.dm+" - "+t.mc,value:t.dm}})}),1)],1),t._v(" "),s("el-col",{staticClass:"input-item",attrs:{span:12}},[s("span",{staticClass:"input-text"},[t._v("单位名称：")]),t._v(" "),s("el-input",{staticClass:"input-input",attrs:{placeholder:"请输入内容",size:"small"},model:{value:t.editForm.DWMC,callback:function(e){t.$set(t.editForm,"DWMC",e)},expression:"editForm.DWMC"}})],1),t._v(" "),s("el-col",{staticClass:"input-item",attrs:{span:12}},[s("span",{staticClass:"input-text"},[t._v("申请时间：")]),t._v(" "),s("el-date-picker",{staticClass:"input-input",attrs:{format:"yyyy-MM-dd",type:"date",size:"small","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:t.editForm.SQSJ,callback:function(e){t.$set(t.editForm,"SQSJ",e)},expression:"editForm.SQSJ"}})],1)],1)],1),t._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.editsItem("editForm")}}},[t._v("确 定")]),t._v(" "),s("el-button",{attrs:{size:"small"},on:{click:function(e){t.editsDialogVisible=!1}}},[t._v("取 消")])],1)],1),t._v(" "),s("el-dialog",{attrs:{title:"详情",visible:t.detailsDialogVisible},on:{"update:visible":function(e){t.detailsDialogVisible=e}}},[s("el-form",{ref:"mapForm"},[s("el-row",{staticClass:"mb-6",attrs:{gutter:3}},[s("el-col",{staticClass:"input-item",attrs:{span:12}},[s("span",{staticClass:"input-text"},[t._v("姓名：")]),t._v(" "),s("span",{staticClass:"input-input detailinput"},[t._v("  "+t._s(t.mapForm.XM))])]),t._v(" "),s("el-col",{staticClass:"input-item",attrs:{span:12}},[s("span",{staticClass:"input-text"},[t._v("身份证号：")]),t._v(" "),s("span",{staticClass:"input-input detailinput"},[t._v("  "+t._s(t.mapForm.SFZH))])]),t._v(" "),s("el-col",{staticClass:"input-item",attrs:{span:12}},[s("span",{staticClass:"input-text"},[t._v("性别：")]),t._v(" "),s("span",{staticClass:"input-input detailinput"},[t._v("  "+t._s(t.mapForm.XBMC))])]),t._v(" "),s("el-col",{staticClass:"input-item",attrs:{span:12}},[s("span",{staticClass:"input-text"},[t._v("出生日期：")]),t._v(" "),s("span",{staticClass:"input-input detailinput"},[t._v("  "+t._s(t.mapForm.CSRQ))])]),t._v(" "),s("el-col",{staticClass:"input-item",attrs:{span:12}},[s("span",{staticClass:"input-text"},[t._v("移民签证种类：")]),t._v(" "),s("span",{staticClass:"input-input detailinput"},[t._v("  "+t._s(t.mapForm.YMQZZLMC))])]),t._v(" "),s("el-col",{staticClass:"input-item",attrs:{span:12}},[s("span",{staticClass:"input-text"},[t._v("签证国家：")]),t._v(" "),s("span",{staticClass:"input-input detailinput"},[t._v("  "+t._s(t.mapForm.QZGJMC))])]),t._v(" "),s("el-col",{staticClass:"input-item",attrs:{span:12}},[s("span",{staticClass:"input-text"},[t._v("单位名称：")]),t._v(" "),s("span",{staticClass:"input-input detailinput"},[t._v("  "+t._s(t.mapForm.DWMC))])]),t._v(" "),s("el-col",{staticClass:"input-item",attrs:{span:12}},[s("span",{staticClass:"input-text"},[t._v("申请时间：")]),t._v(" "),s("span",{staticClass:"input-input detailinput"},[t._v("  "+t._s(t.mapForm.SQSJ))])]),t._v(" "),s("el-col",{staticClass:"input-item",attrs:{span:12}},[s("span",{staticClass:"input-text"},[t._v("操作人：")]),t._v(" "),s("span",{staticClass:"input-input detailinput"},[t._v("  "+t._s(t.mapForm.CZR))])]),t._v(" "),s("el-col",{staticClass:"input-item",attrs:{span:12}},[s("span",{staticClass:"input-text"},[t._v("操作时间：")]),t._v(" "),s("span",{staticClass:"input-input detailinput"},[t._v("  "+t._s(t.mapForm.CZSJ))])]),t._v(" "),s("el-col",{staticClass:"input-item",attrs:{span:12}},[s("span",{staticClass:"input-text"},[t._v("修改人：")]),t._v(" "),s("span",{staticClass:"input-input detailinput"},[t._v("  "+t._s(t.mapForm.XGR))])]),t._v(" "),s("el-col",{staticClass:"input-item",attrs:{span:12}},[s("span",{staticClass:"input-text"},[t._v("修改时间：")]),t._v(" "),s("span",{staticClass:"input-input detailinput"},[t._v("  "+t._s(t.mapForm.XGSJ))])])],1)],1),t._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{size:"small"},on:{click:function(e){t.detailsDialogVisible=!1}}},[t._v("取 消")])],1)],1)],1)},staticRenderFns:[]};var l=s("VU/8")(a,i,!1,function(t){s("lBNG"),s("qloX")},"data-v-65c7b902",null);e.default=l.exports},lBNG:function(t,e){},qloX:function(t,e){}});
//# sourceMappingURL=40.4a3d5f08d69aa7e94b48.js.map
webpackJsonp([25],{"4E/1":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={data:function(){return{CurrentPage:1,pageSize:10,TotalResult:0,CurrentPage2:1,pageSize2:10,TotalResult2:0,pd:{},pd1:{},pd2:{},tableData:[],tableData1:[],tableData2:[],temp:[],multipleSelection1:[],multipleSelection2:[],company:[],roleid:"",userDialogVisible:!1,options:[{value:10,label:"10"},{value:20,label:"20"},{value:30,label:"30"}]}},mounted:function(){this.getList(this.CurrentPage,this.pageSize,this.pd),this.getCompany()},methods:{pageSizeChange2:function(t){this.getUser(this.CurrentPage2,t,this.pd2),console.log("每页 "+t+" 条")},handleCurrentChange2:function(t){this.getUser(t,this.pageSize2,this.pd2),console.log("当前页: "+t)},handleSelectionChange1:function(t){this.multipleSelection1=t},handleSelectionChange2:function(t){this.multipleSelection2=t},getCompany:function(){var t=this,e=new FormData;e.append("org",this.Global.org),e.append("token",this.$store.state.token);var a=e,s=this.Global.aport1+"/org/getSelfAndChilds";this.$api.post(s,a,function(e){t.company=e.data})},getList:function(t,e,a){var s=this,l=new FormData;l.append("currentPage",t),l.append("showCount",e),l.append("org",void 0==this.pd.org?this.Global.org:this.pd.org),l.append("mc",void 0==this.pd.mc?"":this.pd.mc),l.append("token",this.$store.state.token);var i=l,n=this.Global.aport1+"/role/getAll";this.$api.post(n,i,function(t){s.tableData=t.data.resultList,s.TotalResult=t.data.totalCount})},rowClick:function(t,e,a){console.log(t,e,a),this.roleid=t.id,this.getroleUser()},getroleUser:function(){var t=this,e=new FormData;e.append("token",this.$store.state.token),e.append("roleid",this.roleid),e.append("mc",void 0==this.pd1.mc?"":this.pd1.mc);var a=e;this.temp=null;var s=this.Global.aport1+"/user/getAssignByRoleId";this.$api.post(s,a,function(e){t.tableData1=e.data.resultList})},adduser:function(){if(0==this.roleid.length)return this.$message.error("请选择角色！"),!1;this.userDialogVisible=!0,this.getUser(this.CurrentPage2,this.pageSize2,this.pd2),this.getroleUser()},getUser:function(t,e,a){var s=this,l=new FormData;l.append("currentPage",t),l.append("showCount",e),l.append("roleid",this.roleid),l.append("token",this.$store.state.token);var i=l,n=this.Global.aport1+"/user/getUnassignByRoleId";this.$api.post(n,i,function(t){s.tableData2=t.data.resultList,s.TotalResult2=t.data.totalCount})},moveuser:function(){var t=this;if(0!=this.multipleSelection1.length){for(var e=[],a=0;a<this.multipleSelection1.length;a++){var s=this.multipleSelection1[a].id;e.push(s)}var l=new FormData;l.append("roleid",this.roleid),l.append("token",this.$store.state.token),l.append("userids",e);var i=l,n=this.Global.aport1+"/role/removeUsersFromRole";this.$api.post(n,i,function(e){e.success?(t.$message({message:"移除成功",type:"success"}),t.getroleUser()):t.$message.error(e.message)})}else this.$message.error("请选择列表内容！")},saveuser:function(){0!=this.multipleSelection2.length?(this.temp=this.multipleSelection2,this.tableData1=this.temp,this.userDialogVisible=!1):this.$message.error("请选择列表内容！")},saveReuslt:function(){var t=this;if(0==this.roleid.length)return this.$message.error("请选择角色！"),!1;if(0!=this.multipleSelection1.length){for(var e=[],a=0;a<this.multipleSelection1.length;a++){var s=this.multipleSelection1[a].id;e.push(s)}var l=new FormData;l.append("roleid",this.roleid),l.append("token",this.$store.state.token),l.append("userids",e);var i=l,n=this.Global.aport1+"/role/addUsersToRole";this.$api.post(n,i,function(e){e.success?(t.$message({message:"保存成功",type:"success"}),t.getroleUser()):t.$message.error(e.message)})}else this.$message.error("请选择列表内容！")}}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"yymain"},[a("div",{staticClass:"yycontent"},[a("el-row",{attrs:{type:"flex"}},[a("el-col",{attrs:{span:11}},[a("el-row",{attrs:{type:"flex"}},[a("el-col",{staticClass:" pr-20",attrs:{span:21}},[a("el-row",{attrs:{align:"center",gutter:2}},[a("el-col",{staticClass:"input-item",attrs:{sm:24,md:12,lg:12}},[a("span",{staticClass:"input-text"},[t._v("所属单位：")]),t._v(" "),a("el-select",{staticClass:"input-input",attrs:{filterable:"",clearable:"","default-first-option":"",placeholder:"请选择",size:"small"},model:{value:t.pd.org,callback:function(e){t.$set(t.pd,"org",e)},expression:"pd.org"}},t._l(t.company,function(t){return a("el-option",{key:t.dm,attrs:{label:t.mc,value:t.dm}})}),1)],1),t._v(" "),a("el-col",{staticClass:"input-item",attrs:{sm:24,md:12,lg:12}},[a("span",{staticClass:"input-text"},[t._v("角色名称：")]),t._v(" "),a("el-input",{staticClass:"input-input",attrs:{placeholder:"请输入内容",size:"small"},model:{value:t.pd.mc,callback:function(e){t.$set(t.pd,"mc",e)},expression:"pd.mc"}})],1)],1)],1),t._v(" "),a("el-col",{attrs:{span:3}},[a("el-button",{attrs:{type:"success",size:"small"},on:{click:function(e){t.getList(t.CurrentPage,t.pageSize,t.pd)}}},[t._v("查询")])],1)],1),t._v(" "),a("el-row",{staticStyle:{"margin-top":"10px"},attrs:{type:"flex"}},[a("el-table",{ref:"multipleTable",staticClass:"stu-table",staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"","highlight-current-row":!0},on:{"row-click":t.rowClick}},[a("el-table-column",{attrs:{prop:"mc",label:"角色名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"ssdw.mc",label:"所属单位"}})],1)],1)],1),t._v(" "),a("el-col",{attrs:{span:11}},[a("el-row",{attrs:{type:"flex"}},[a("el-col",{staticClass:" pr-20",attrs:{span:16}},[a("el-row",{attrs:{align:"center",gutter:2}},[a("el-col",{staticClass:"input-item",attrs:{sm:24,md:12,lg:20}},[a("span",{staticClass:"input-text",staticStyle:{width:"25%!important"}},[t._v("姓名：")]),t._v(" "),a("el-input",{staticClass:"input-input",attrs:{placeholder:"请输入内容",size:"small"},model:{value:t.pd1.mc,callback:function(e){t.$set(t.pd1,"mc",e)},expression:"pd1.mc"}})],1),t._v(" "),a("el-col",{staticClass:"input-item",attrs:{sm:24,md:12,lg:4}},[a("el-button",{attrs:{type:"success",size:"small"},on:{click:function(e){t.getroleUser(t.CurrentPage,t.pageSize,t.pd)}}},[t._v("查询")])],1)],1)],1),t._v(" "),a("el-col",{staticStyle:{"text-align":"right"},attrs:{span:8}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.adduser}},[t._v("增加用户")]),t._v(" "),a("el-button",{attrs:{type:"warning",size:"small"},on:{click:t.moveuser}},[t._v("移除用户")])],1)],1),t._v(" "),a("el-row",{staticStyle:{"margin-top":"10px"},attrs:{type:"flex"}},[a("el-table",{ref:"multipleTable",staticClass:"stu-table",staticStyle:{width:"100%"},attrs:{data:t.tableData1,border:""},on:{"selection-change":t.handleSelectionChange1}},[a("el-table-column",{attrs:{type:"selection",width:"60"}}),t._v(" "),a("el-table-column",{attrs:{prop:"mc",label:"姓名"}}),t._v(" "),a("el-table-column",{attrs:{prop:"dlm",label:"登录名"}}),t._v(" "),a("el-table-column",{attrs:{prop:"ssdw.mc",label:"所属单位"}})],1)],1)],1),t._v(" "),a("el-col",{staticClass:"down-btn-area",attrs:{span:2}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.saveReuslt()}}},[t._v("保存用户授权")])],1)],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"选择用户",visible:t.userDialogVisible},on:{"update:visible":function(e){t.userDialogVisible=e}}},[a("el-row",{attrs:{type:"flex"}},[a("el-col",{staticClass:" pr-20",attrs:{span:14}},[a("el-row",{attrs:{align:"center",gutter:1}},[a("el-col",{staticClass:"input-item",attrs:{span:24}},[a("span",{staticClass:"input-text"},[t._v("姓名：")]),t._v(" "),a("el-input",{staticClass:"input-input",attrs:{placeholder:"请输入内容",size:"small"},model:{value:t.pd2.mc,callback:function(e){t.$set(t.pd2,"mc",e)},expression:"pd2.mc"}})],1)],1)],1),t._v(" "),a("el-col",{attrs:{span:10}},[a("el-button",{attrs:{type:"success",size:"small"},on:{click:function(e){t.getUser(t.CurrentPage2,t.pageSize2,t.pd2)}}},[t._v("查询")])],1)],1),t._v(" "),a("el-row",{staticStyle:{margin:"10px 0px"},attrs:{type:"flex"}},[a("el-table",{ref:"multipleTable",staticClass:"stu-table",staticStyle:{width:"100%"},attrs:{data:t.tableData2,border:""},on:{"selection-change":t.handleSelectionChange2}},[a("el-table-column",{attrs:{type:"selection",width:"60"}}),t._v(" "),a("el-table-column",{attrs:{prop:"mc",label:"姓名"}}),t._v(" "),a("el-table-column",{attrs:{prop:"dlm",label:"登录名"}}),t._v(" "),a("el-table-column",{attrs:{prop:"ssdw.mc",label:"所属单位"}})],1)],1),t._v(" "),a("div",{staticClass:"middle-foot"},[a("div",{staticClass:"page-msg"},[a("div",{},[t._v("\n        共"+t._s(t.TotalResult2)+"条记录\n          ")]),t._v(" "),a("div",{},[t._v("\n            每页显示\n            "),a("el-select",{staticClass:"page-select",attrs:{placeholder:"10",size:"mini"},on:{change:function(e){t.pageSizeChange2(t.pageSize2)}},model:{value:t.pageSize2,callback:function(e){t.pageSize2=e},expression:"pageSize2"}},t._l(t.options,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1),t._v("\n            条\n          ")],1),t._v(" "),a("div",{},[t._v("\n          共"+t._s(Math.ceil(t.TotalResult2/t.pageSize2))+"页\n          ")])]),t._v(" "),a("el-pagination",{attrs:{background:"","current-page":t.CurrentPage2,"page-size":t.pageSize2,layout:"prev, pager, next",total:t.TotalResult2},on:{"current-change":t.handleCurrentChange2,"update:currentPage":function(e){t.CurrentPage2=e}}})],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.saveuser}},[t._v("保存")]),t._v(" "),a("el-button",{attrs:{size:"small"},on:{click:function(e){t.userDialogVisible=!1}}},[t._v("取消")])],1)],1)],1)},staticRenderFns:[]};var i=a("VU/8")(s,l,!1,function(t){a("wt1E"),a("aKpz")},"data-v-d7a0ef6c",null);e.default=i.exports},aKpz:function(t,e){},wt1E:function(t,e){}});
//# sourceMappingURL=25.919ec07d46753bf4a116.js.map
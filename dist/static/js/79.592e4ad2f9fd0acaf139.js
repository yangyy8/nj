webpackJsonp([79],{kngP:function(t,e){},vxmp:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=a("bOdI"),s=a.n(l),i={data:function(){var t;return t={CurrentPage:1,pageSize:10,TotalResult:0,pd:{BJSJ_DateRange:{}},pd0:{},form:{},addForm:{},options:this.pl.ps,tableData:[],type:"",addsDialogVisible:!1,userCode:"",userName:"",orgCode:"",orgName:""},s()(t,"form",{}),s()(t,"addlg",{}),s()(t,"getallfj",[]),s()(t,"PSC",[]),s()(t,"multipleSelection",[]),s()(t,"selectionAll",[]),s()(t,"yuid",[]),s()(t,"selectionReal",[]),s()(t,"juState",""),t},activated:function(){0==this.Global.serviceState&&this.$set(this.pd,"CLZT","CLZT_1"),1==this.Global.serviceState&&this.$set(this.pd,"CLZT","1"),"2"==this.juState&&(this.pd.FJ=this.orgCode,this.getPSC(this.pd.FJ)),"3"==this.juState&&(this.pd.FJ=this.$store.state.pcsToju,this.getPSC(this.pd.FJ),this.pd.PCS=this.orgCode);var t=this;setTimeout(function(){t.getList(t.CurrentPage,t.pageSize,t.pd)},1e3)},mounted:function(){this.$store.dispatch("getGjdq"),this.$store.dispatch("getClzt"),this.$store.dispatch("getXB"),this.$store.dispatch("getZjzl"),this.$store.dispatch("getRjqzzl"),this.$store.dispatch("getLgyj"),this.$store.dispatch("getGljb"),this.userCode=this.$store.state.uname,this.userName=this.$store.state.uid,this.orgName=this.$store.state.orgname,this.orgCode=this.$store.state.orgid,this.juState=this.$store.state.juState,this.getFj()},methods:{getFj:function(){var t=this;this.$api.post(this.Global.aport5+"/djbhl/getallfj",{},function(e){e.success&&(t.getallfj=e.data)})},getPSC:function(t){var e=this;this.$set(this.pd,"PCS",""),this.$api.post(this.Global.aport5+"/djbhl/getpcsbyfjdm",{fjdm:t},function(t){t.success&&(e.PSC=t.data)})},handleSelectionChange:function(t){},selectfn:function(t,e){this.multipleSelection=t,this.dataSelection()},dataSelection:function(){this.selectionReal.splice(this.CurrentPage-1,1,this.multipleSelection),this.selectionAll=[];for(var t=0;t<this.selectionReal.length;t++)if(this.selectionReal[t])for(var e=0;e<this.selectionReal[t].length;e++)this.selectionAll.push(this.selectionReal[t][e])},download:function(){var t=this,e={};if(0==this.selectionAll.length)e={pd:this.pd,orderBy:"BJSJ",orderType:"DESC"};else{for(var a in this.yuid=[],this.selectionAll)this.yuid.push(this.selectionAll[a].YJID);this.pd.YJID=this.yuid,e={pd:this.pd,orderBy:"BJSJ",orderType:"DESC"}}this.$api.post(this.Global.aport4+"/warningInfoController/exportByMxLx",e,function(e){console.log(e),t.downloadM(e)},function(t){},{},"blob")},downloadM:function(t){if(t){var e=window.URL.createObjectURL(new Blob([t],{type:"application/xls"})),a=document.createElement("a");a.style.display="none",a.href=e,a.setAttribute("download","受理签发报表"+this.format(new Date,"yyyyMMddhhmmss")+".xls"),document.body.appendChild(a),a.click()}},pageSizeChange:function(t){this.pageSize=t,this.getList(this.CurrentPage,this.pageSize,this.pd),console.log("每页 "+t+" 条")},handleCurrentChange:function(t){this.CurrentPage=t,this.getList(this.CurrentPage,this.pageSize,this.pd),console.log("当前页: "+t)},getList:function(t,e,a){var l=this;this.pd.MXLX="QZ_HCYJ",this.pd.BJSJ_DateRange.begin=this.pd0.beginBJSJ,this.pd.BJSJ_DateRange.end=this.pd0.endBJSJ,a.hasOwnProperty("YJID")&&delete a.YJID;var s={currentPage:t,showCount:e,pd:a,orderBy:"BJSJ",orderType:"DESC"};this.$api.post(this.Global.aport4+"/warningInfoController/getInfoListByMxLx1",s,function(t){l.tableData=t.data.resultList,l.TotalResult=t.data.totalResult,0==l.selectionReal.length&&(l.selectionReal=new Array(Math.ceil(l.TotalResult/e))),l.$nextTick(function(){l.multipleSelection=[];for(var t=0;t<l.tableData.length;t++)for(var e=0;e<l.selectionAll.length;e++)l.tableData[t].YJID==l.selectionAll[e].YJID&&l.$refs.multipleTable.toggleRowSelection(l.tableData[t],!0)})})},getEdit:function(t){this.$router.push({name:"SLQFXXYJ_XQ",query:{row:t}})},getXM:function(t,e){return void 0!=t&&void 0!=e?e+"("+t+")":void 0!=t?t:void 0!=e?e:void 0},adds:function(t){var e=this;this.addlg={},this.addlg={ZJHM:t.ZJHM,GJDQ:t.GJ};var a={pd:{ZJHM:t.ZJHM,GJDQ:t.GJ}};this.$api.post(this.Global.aport4+"/zDRYController/isLGRY",a,function(t){1==t.data?e.addsDialogVisible=!0:0==t.data?e.$message("该人员已经被列管"):2==t.data&&e.$confirm("该人员有常住信息，是否设为常住列管",{confirmButtonText:"是",cancelButtonText:"否",type:"warning"}).then(function(){e.addsDialogVisible=!0})})},addItem:function(t){var e=this,a={pd:{ZJHM:this.addlg.ZJHM,GJDQ:this.addlg.GJDQ,LGYJ:this.form.LGYJ,GLJB:this.form.GLJB},userName:this.userName,userCode:this.userCode,orgCode:this.orgCode,orgName:this.orgName};this.$api.post(this.Global.aport4+"/zDRYController/setZdry",a,function(t){t.success&&(e.$message({message:"保存成功！",type:"success"}),e.addsDialogVisible=!1)})},qxItem:function(t){this.addsDialogVisible=!1}}},n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"yymain"},[a("div",{staticClass:"yytitle"},[a("el-row",{attrs:{type:"flex"}},[a("el-col",{staticClass:"br pr-20",attrs:{span:22}},[a("el-row",{attrs:{align:"center",gutter:2}},[a("el-col",{staticClass:"input-item",attrs:{sm:24,md:12,lg:8}},[a("span",{staticClass:"input-text"},[t._v("英文姓名：")]),t._v(" "),a("el-input",{staticClass:"input-input",attrs:{placeholder:"请输入内容",size:"small"},model:{value:t.pd.YWXM,callback:function(e){t.$set(t.pd,"YWXM",e)},expression:"pd.YWXM"}})],1),t._v(" "),a("el-col",{staticClass:"input-item",attrs:{sm:24,md:12,lg:8}},[a("span",{staticClass:"input-text"},[t._v("中文姓名：")]),t._v(" "),a("el-input",{staticClass:"input-input",attrs:{placeholder:"请输入内容",size:"small"},model:{value:t.pd.ZWXM,callback:function(e){t.$set(t.pd,"ZWXM",e)},expression:"pd.ZWXM"}})],1),t._v(" "),a("el-col",{staticClass:"input-item",attrs:{sm:24,md:12,lg:8}},[a("span",{staticClass:"input-text"},[t._v("预警时间：")]),t._v(" "),a("div",{staticClass:"input-input t-flex t-date"},[a("el-date-picker",{attrs:{format:"yyyy-MM-dd",type:"date",size:"small","value-format":"yyyyMMdd",placeholder:"开始时间"},model:{value:t.pd0.beginBJSJ,callback:function(e){t.$set(t.pd0,"beginBJSJ",e)},expression:"pd0.beginBJSJ"}}),t._v(" "),a("span",{staticClass:"septum"},[t._v("-")]),t._v(" "),a("el-date-picker",{attrs:{format:"yyyy-MM-dd",type:"date",size:"small","value-format":"yyyyMMdd",placeholder:"结束时间"},model:{value:t.pd0.endBJSJ,callback:function(e){t.$set(t.pd0,"endBJSJ",e)},expression:"pd0.endBJSJ"}})],1)]),t._v(" "),a("el-col",{staticClass:"input-item",attrs:{sm:24,md:12,lg:8}},[a("span",{staticClass:"input-text"},[t._v("国家地区：")]),t._v(" "),a("el-select",{staticClass:"input-input",attrs:{filterable:"",clearable:"",multiple:"","collapse-tags":"","default-first-option":"",placeholder:"请选择",size:"small"},model:{value:t.pd.GJ,callback:function(e){t.$set(t.pd,"GJ",e)},expression:"pd.GJ"}},t._l(t.$store.state.gjdq,function(t){return a("el-option",{key:t.dm,attrs:{label:t.dm+" - "+t.mc,value:t.dm}})}),1)],1),t._v(" "),a("el-col",{staticClass:"input-item",attrs:{sm:24,md:12,lg:8}},[a("span",{staticClass:"input-text"},[t._v("证件号码：")]),t._v(" "),a("el-input",{staticClass:"input-input",attrs:{placeholder:"请输入内容",size:"small"},model:{value:t.pd.ZJHM,callback:function(e){t.$set(t.pd,"ZJHM",e)},expression:"pd.ZJHM"}})],1),t._v(" "),a("el-col",{staticClass:"input-item",attrs:{sm:24,md:12,lg:8}},[a("span",{staticClass:"input-text"},[t._v("证件种类：")]),t._v(" "),a("el-select",{staticClass:"input-input",attrs:{filterable:"",clearable:"",multiple:"","collapse-tags":"","default-first-option":"",placeholder:"请选择",size:"small"},model:{value:t.pd.ZJZL,callback:function(e){t.$set(t.pd,"ZJZL",e)},expression:"pd.ZJZL"}},t._l(t.$store.state.zjzl,function(t){return a("el-option",{key:t.dm,attrs:{label:t.dm+" - "+t.mc,value:t.dm}})}),1)],1),t._v(" "),a("el-col",{staticClass:"input-item",attrs:{sm:24,md:12,lg:8}},[a("span",{staticClass:"input-text"},[t._v("性别：")]),t._v(" "),a("el-select",{staticClass:"input-input",attrs:{filterable:"",clearable:"","default-first-option":"",placeholder:"请选择",size:"small"},model:{value:t.pd.XB,callback:function(e){t.$set(t.pd,"XB",e)},expression:"pd.XB"}},t._l(t.$store.state.xb,function(t){return a("el-option",{key:t.dm,attrs:{label:t.dm+" - "+t.mc,value:t.dm}})}),1)],1),t._v(" "),a("el-col",{staticClass:"input-item",attrs:{sm:24,md:12,lg:8}},[a("span",{staticClass:"input-text"},[t._v("签证种类：")]),t._v(" "),a("el-select",{staticClass:"input-input",attrs:{filterable:"",clearable:"",multiple:"","collapse-tags":"","default-first-option":"",placeholder:"请选择",size:"small"},model:{value:t.pd.QZZL,callback:function(e){t.$set(t.pd,"QZZL",e)},expression:"pd.QZZL"}},t._l(t.$store.state.rjqzzl,function(t){return a("el-option",{key:t.dm,attrs:{label:t.dm+" - "+t.mc,value:t.dm}})}),1)],1),t._v(" "),a("el-col",{staticClass:"input-item",attrs:{sm:24,md:12,lg:8}},[a("span",{staticClass:"input-text"},[t._v("签证号码：")]),t._v(" "),a("el-input",{staticClass:"input-input",attrs:{placeholder:"请输入内容",size:"small"},model:{value:t.pd.QZHM,callback:function(e){t.$set(t.pd,"QZHM",e)},expression:"pd.QZHM"}})],1),t._v(" "),a("el-col",{staticClass:"input-item",attrs:{sm:24,md:12,lg:8}},[a("span",{staticClass:"input-text"},[t._v("所属分局：")]),t._v(" "),a("el-select",{staticClass:"input-input",attrs:{filterable:"",clearable:"","default-first-option":"",placeholder:"请选择",size:"small",disabled:"1"!=t.juState},on:{change:function(e){t.getPSC(t.pd.FJ)}},model:{value:t.pd.FJ,callback:function(e){t.$set(t.pd,"FJ",e)},expression:"pd.FJ"}},t._l(t.getallfj,function(t){return a("el-option",{key:t.DM,attrs:{label:t.DM+" - "+t.MC,value:t.DM}})}),1)],1),t._v(" "),a("el-col",{staticClass:"input-item",attrs:{sm:24,md:12,lg:8}},[a("span",{staticClass:"input-text",attrs:{title:"所属派出所"}},[t._v("所属派出所：")]),t._v(" "),a("el-select",{staticClass:"input-input",attrs:{filterable:"",clearable:"","default-first-option":"",placeholder:"请选择",size:"small",disabled:"3"==t.juState},model:{value:t.pd.PCS,callback:function(e){t.$set(t.pd,"PCS",e)},expression:"pd.PCS"}},t._l(t.PSC,function(t){return a("el-option",{key:t.DM,attrs:{label:t.MC,value:t.DM}})}),1)],1),t._v(" "),a("el-col",{staticClass:"input-item",attrs:{sm:24,md:12,lg:8}},[a("span",{staticClass:"input-text"},[t._v("处理状态：")]),t._v(" "),a("el-select",{staticClass:"input-input",attrs:{placeholder:"请选择",filterable:"",clearable:"","default-first-option":"",size:"small"},model:{value:t.pd.CLZT,callback:function(e){t.$set(t.pd,"CLZT",e)},expression:"pd.CLZT"}},t._l(t.$store.state.clzt,function(t){return a("el-option",{key:t.dm,attrs:{label:t.dm+" - "+t.mc,value:t.dm}})}),1)],1)],1)],1),t._v(" "),a("el-col",{staticClass:"down-btn-area",attrs:{span:2}},[a("el-button",{staticClass:"t-mb",attrs:{type:"success",size:"small"},on:{click:function(e){t.CurrentPage=1,t.getList(t.CurrentPage,t.pageSize,t.pd)}}},[t._v("查询")]),t._v(" "),a("el-button",{staticClass:"t-ml0",attrs:{type:"primary",size:"small"},on:{click:t.download}},[t._v("导出")])],1)],1)],1),t._v(" "),a("div",{staticClass:"yycontent"},[a("div",{staticClass:"yylbt mb-15"},[t._v("预警信息列表")]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"","highlight-current-row":!0},on:{select:t.selectfn,"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{prop:"ZWXM",label:"姓名"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.getXM(e.row.ZWXM,e.row.YWXM)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"XB_DESC",label:"性别"}}),t._v(" "),a("el-table-column",{attrs:{prop:"GJDQ_DESC",label:"国家地区"}}),t._v(" "),a("el-table-column",{attrs:{prop:"ZJZL_DESC",label:"证件种类"}}),t._v(" "),a("el-table-column",{attrs:{prop:"ZJHM",label:"证件号码"}}),t._v(" "),a("el-table-column",{attrs:{prop:"QZZL_DESC",label:"签证种类"}}),t._v(" "),a("el-table-column",{attrs:{prop:"QZHM",label:"签证号码"}}),t._v(" "),a("el-table-column",{attrs:{prop:"BJSJ",label:"预警时间"}}),t._v(" "),a("el-table-column",{attrs:{prop:"FJ_DESC",label:"所属分局"}}),t._v(" "),a("el-table-column",{attrs:{prop:"PCS_DESC",label:"所属派出所"}}),t._v(" "),a("el-table-column",{attrs:{prop:"CLZT_DESC",label:"处理状态"}}),t._v(" "),a("el-table-column",{attrs:{label:"预警详情",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[a("el-button",{staticClass:"a-btn",attrs:{type:"text",title:"编辑",icon:"el-icon-edit-outline"},on:{click:function(a){t.getEdit(e.row)}}}),t._v(" "),a("el-button",{staticClass:"a-btn",attrs:{type:"text",title:"设为重点人员",icon:"iconfont el-icon-yy-jiaoseyonghu"},on:{click:function(a){t.adds(e.row),t.form={}}}})],1)]}}])})],1),t._v(" "),a("div",{staticClass:"middle-foot"},[a("div",{staticClass:"page-msg"},[a("div",{},[t._v("\n      共"+t._s(t.TotalResult)+"条记录\n        ")]),t._v(" "),a("div",{},[t._v("\n          每页显示\n          "),a("el-select",{staticClass:"page-select",attrs:{placeholder:"10",size:"mini"},on:{change:function(e){t.pageSizeChange(t.pageSize)}},model:{value:t.pageSize,callback:function(e){t.pageSize=e},expression:"pageSize"}},t._l(t.options,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1),t._v("\n          条\n        ")],1),t._v(" "),a("div",{},[t._v("\n          共"+t._s(Math.ceil(t.TotalResult/t.pageSize))+"页\n        ")])]),t._v(" "),a("el-pagination",{attrs:{background:"","current-page":t.CurrentPage,"page-size":t.pageSize,layout:"prev, pager, next",total:t.TotalResult},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.CurrentPage=e}}})],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"设为重点人员",visible:t.addsDialogVisible,width:"600px"},on:{"update:visible":function(e){t.addsDialogVisible=e}}},[a("el-form",{ref:"addForm",attrs:{model:t.form}},[a("el-row",{staticClass:"mb-6",attrs:{gutter:1}},[a("el-col",{directives:[{name:"validate-easy",rawName:"v-validate-easy",value:[["required"]],expression:"[['required']]"}],staticClass:"input-item",attrs:{span:24,"data-scope":"demo","data-name":"RULE","data-type":"input"}},[a("span",{staticClass:"input-text"},[t._v("列管依据：")]),t._v(" "),a("el-select",{staticClass:"input-input",attrs:{filterable:"",clearable:"",multiple:"","collapse-tags":"","default-first-option":"",placeholder:"请选择",size:"small"},model:{value:t.form.LGYJ,callback:function(e){t.$set(t.form,"LGYJ",e)},expression:"form.LGYJ"}},t._l(t.$store.state.lgyj,function(t){return a("el-option",{key:t.dm,attrs:{label:t.dm+" - "+t.mc,value:t.dm}})}),1)],1),t._v(" "),a("el-col",{directives:[{name:"validate-easy",rawName:"v-validate-easy",value:[["required"]],expression:"[['required']]"}],staticClass:"input-item",attrs:{span:24,"data-scope":"demo","data-name":"RULE","data-type":"input"}},[a("span",{staticClass:"input-text"},[t._v("管理级别：")]),t._v(" "),a("el-select",{staticClass:"input-input",attrs:{filterable:"",clearable:"",multiple:"","collapse-tags":"","default-first-option":"",placeholder:"请选择",size:"small"},model:{value:t.form.GLJB,callback:function(e){t.$set(t.form,"GLJB",e)},expression:"form.GLJB"}},t._l(t.$store.state.gljb,function(t){return a("el-option",{key:t.dm,attrs:{label:t.dm+" - "+t.mc,value:t.dm}})}),1)],1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.addItem("addForm")}}},[t._v("确 定")]),t._v(" "),a("el-button",{attrs:{size:"small"},on:{click:function(e){t.qxItem("addForm")}}},[t._v("取 消")])],1)],1)],1)},staticRenderFns:[]};var o=a("VU/8")(i,n,!1,function(t){a("kngP")},"data-v-88334cb2",null);e.default=o.exports}});
//# sourceMappingURL=79.592e4ad2f9fd0acaf139.js.map
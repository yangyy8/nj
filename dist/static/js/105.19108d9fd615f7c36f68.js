webpackJsonp([105],{"1fHI":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=a("woOf"),i=a.n(l),s=a("XLwt"),n=a.n(s),d=(a("I9qK"),a("yHYR")),o=a("+5I8"),p={components:{LZXX:d.a},data:function(){return{rybh:"",detailsDialogVisible:!1,type:1,xid:"",page:0,fjlist:[],pcslist:[],CurrentPage:1,pageSize:10,TotalResult:0,pd:{SLRQ_DateRange:{},CSRQ_DateRange:{}},pdTu:{},pd0:{begin:"",end:""},pd1:{begin:"",end:""},checkedfj:!1,checkedpcs:!1,options:[{value:10,label:"10"},{value:20,label:"20"},{value:30,label:"30"}],tableData:[],lineChart:null,allUserList:{},hkszd:[]}},mounted:function(){this.$store.dispatch("getXB"),this.getList(),this.getUserWhiteList()},activated:function(){},methods:{userFilter:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=this.allUserList.filter(function(e){if(void 0!=e.mc)return e.mc.includes(t)});e.length>50?this.hkszd=e.slice(0,50):this.hkszd=e},getUserWhiteList:function(){var t=this;this.$api.get(this.Global.aport1+this.Global.xzqh,null,function(e){t.allUserList=Object(o.a)(e.data),t.userFilter()})},details:function(t){this.xid=t.DTID,this.rybh=t.RYBH,this.detailsDialogVisible=!0},pageSizeChange:function(t){this.getListTu(this.CurrentPage,t,this.pdTu)},handleCurrentChange:function(t){this.getListTu(t,this.pageSize,this.pdTu)},getList:function(){var t=this;""==this.pd0.begin?this.pd.SLRQ_DateRange.begin="":null==this.pd0.begin?this.pd.SLRQ_DateRange.begin=null:this.pd.SLRQ_DateRange.begin=this.pd0.begin+"000000",""==this.pd0.end?this.pd.SLRQ_DateRange.end="":null==this.pd0.end?this.pd.SLRQ_DateRange.end=null:this.pd.SLRQ_DateRange.end=this.pd0.end+"000000",""==this.pd1.begin?this.pd.CSRQ_DateRange.begin="":null==this.pd1.begin?this.pd.CSRQ_DateRange.begin=null:this.pd.CSRQ_DateRange.begin=this.pd1.begin,""==this.pd1.end?this.pd.CSRQ_DateRange.end="":null==this.pd1.end?this.pd.CSRQ_DateRange.end=null:this.pd.CSRQ_DateRange.end=this.pd1.end;var e={pd:this.pd};this.$api.post(this.Global.aport8+"/ndjm/ndjmbhl",e,function(e){t.drawLine(e.data.legend,e.data.xAxis,e.data.series)})},getListTu:function(t,e,a){var l=this,i={currentPage:t,showCount:e,pd:a};this.$api.post(this.Global.aport8+"/ndjm/ndjmjbxx",i,function(t){t.success&&(l.tableData=t.data.resultList,console.log(t.data.totalResult),void 0!=t.data.totalResult&&(l.TotalResult=t.data.totalResult))})},drawLine:function(t,e,a){this.lineChart=n.a.init(document.getElementById("echarts")),window.onresize=n.a.init(document.getElementById("echarts")).resize;for(var l={normal:{show:!0,position:"top"}},s=0;s<a.length;s++)for(var d=0,o=0;o<a[s].data.length;o++)0!=(d+=a[s].data[o])&&(a[s].label=l);var p=this;p.lineChart.setOption({color:["#5793f3","#d14a61","#675bba"],tooltip:{axisPointer:{type:"cross"}},legend:{data:t},grid:{top:70,bottom:50},xAxis:[{type:"category",axisTick:{alignWithLabel:!0},axisLine:{onZero:!1},data:e}],yAxis:[{type:"value"}],series:a},!0),p.lineChart.off("click"),p.lineChart.on("click",function(t){console.log(t);var e={};(e=i()({},p.pd)).SLRQ_DateRange={begin:""==p.pd0.begin?"":null==p.pd0.begin?null:p.pd0.begin+"000000",end:""==p.pd0.end?"":null==p.pd0.end?null:p.pd0.end+"000000"},e.CSRQ_DateRange={begin:""==p.pd1.begin?"":null==p.pd1.begin?null:p.pd1.begin,end:""==p.pd1.end?"":null==p.pd1.end?null:p.pd1.end},e.SJD=t.name,p.pdTu=e,p.page=1,p.CurrentPage=1,p.getListTu(p.CurrentPage,p.pageSize,p.pdTu)}),p.lineChart.resize()},exportexcel:function(){var t=this;console.log("this.pddc",this.pdTu);var e={currentPage:1,showCount:1e4,pd:this.pdTu};this.$api.post(this.Global.aport4+"/eS_LZ_LZXXController/export",e,function(e){t.downloadM(e,"宾馆临住信息趋势")},function(t){},{},"blob")},downloadM:function(t,e){if(t){var a=window.URL.createObjectURL(new Blob([t],{type:"application/xls"})),l=document.createElement("a");l.style.display="none",l.href=a,l.setAttribute("download",e+this.format(new Date,"yyyyMMddhhmmss")+".xls"),document.body.appendChild(l),l.click()}}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"yymain"},[a("div",{staticClass:"yytitle"},[a("el-row",{attrs:{type:"flex"}},[a("el-col",{staticClass:"br pr-20",attrs:{span:22}},[a("el-row",{attrs:{align:"center",gutter:2}},[a("el-col",{staticClass:"input-item",attrs:{sm:24,md:12,lg:8}},[a("span",{staticClass:"input-text"},[t._v("受理时间：")]),t._v(" "),a("div",{staticClass:"input-input t-flex t-date"},[a("el-date-picker",{attrs:{format:"yyyy-MM-dd",type:"date",size:"small","value-format":"yyyyMMdd",placeholder:"开始时间"},model:{value:t.pd0.begin,callback:function(e){t.$set(t.pd0,"begin",e)},expression:"pd0.begin"}}),t._v(" "),a("span",{staticClass:"septum"},[t._v("-")]),t._v(" "),a("el-date-picker",{attrs:{format:"yyyy-MM-dd",type:"date",size:"small","value-format":"yyyyMMdd",placeholder:"结束时间"},model:{value:t.pd0.end,callback:function(e){t.$set(t.pd0,"end",e)},expression:"pd0.end"}})],1)]),t._v(" "),a("el-col",{staticClass:"input-item",attrs:{sm:24,md:12,lg:8}},[a("span",{staticClass:"input-text"},[t._v("户口所在地：")]),t._v(" "),a("el-select",{staticClass:"input-input",attrs:{filterable:"",clearable:"","default-first-option":"",placeholder:"请输入所在地",size:"small","filter-method":t.userFilter},model:{value:t.pd.HKSZD,callback:function(e){t.$set(t.pd,"HKSZD",e)},expression:"pd.HKSZD"}},t._l(t.hkszd,function(t){return a("el-option",{key:t.dm,attrs:{label:t.dm+" - "+t.mc,value:t.dm}})}),1)],1),t._v(" "),a("el-col",{staticClass:"input-item",attrs:{sm:24,md:12,lg:8}},[a("span",{staticClass:"input-text"},[t._v("性别：")]),t._v(" "),a("el-select",{staticClass:"input-input",attrs:{filterable:"",clearable:"","default-first-option":"",placeholder:"请选择",size:"small"},model:{value:t.pd.XB,callback:function(e){t.$set(t.pd,"XB",e)},expression:"pd.XB"}},t._l(t.$store.state.xb,function(t){return a("el-option",{key:t.dm,attrs:{label:t.dm+" - "+t.mc,value:t.dm}})}),1)],1),t._v(" "),a("el-col",{staticClass:"input-item",attrs:{sm:24,md:12,lg:8}},[a("span",{staticClass:"input-text"},[t._v("年龄段：")]),t._v(" "),a("div",{staticClass:"input-input t-flex t-date"},[a("el-input",{staticStyle:{width:"66%"},attrs:{placeholder:"请输入内容",size:"small"},model:{value:t.pd1.begin,callback:function(e){t.$set(t.pd1,"begin",e)},expression:"pd1.begin"}}),t._v(" "),a("span",{staticClass:"septum",staticStyle:{padding:"0 5px"}},[t._v("-")]),t._v(" "),a("el-input",{staticStyle:{width:"66%"},attrs:{placeholder:"请输入内容",size:"small"},model:{value:t.pd1.end,callback:function(e){t.$set(t.pd1,"end",e)},expression:"pd1.end"}})],1)]),t._v(" "),a("el-col",{staticClass:"input-item",attrs:{sm:24,md:12,lg:8}},[a("span",{staticClass:"input-text"},[t._v("选择显示类别：")]),t._v(" "),a("el-select",{staticClass:"input-input",attrs:{filterable:"",clearable:"","default-first-option":"",placeholder:"请选择",size:"small"},model:{value:t.pd.XSLB,callback:function(e){t.$set(t.pd,"XSLB",e)},expression:"pd.XSLB"}},[a("el-option",{attrs:{value:"day",label:"按日显示"}}),t._v(" "),a("el-option",{attrs:{value:"month",label:"按月显示"}}),t._v(" "),a("el-option",{attrs:{value:"quarter",label:"按季度显示"}}),t._v(" "),a("el-option",{attrs:{value:"year",label:"按年显示"}})],1)],1)],1)],1),t._v(" "),a("el-col",{staticClass:"down-btn-area",attrs:{span:2}},[a("el-button",{attrs:{type:"success",size:"small"},on:{click:function(e){t.page=0,t.tableData=[],t.CurrentPage=1,t.TotalResult=0,t.getList()}}},[t._v("查询")])],1)],1)],1),t._v(" "),a("div",{staticClass:"yycontent"},[a("div",{staticClass:"ak-tabs"},[a("div",{staticClass:"ak-tab-item hand",class:{"ak-checked":0==t.page},on:{click:function(e){t.page=0,t.getList()}}},[t._v("\n        图表\n      ")]),t._v(" "),a("div",{staticClass:"ak-tab-item hand",class:{"ak-checked":1==t.page},on:{click:function(e){t.page=1}}},[t._v("\n        列表\n      ")])]),t._v(" "),a("div",{staticClass:"ak-tab-pane"},[a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.page,expression:"page==0"}],staticClass:"chart",staticStyle:{width:"100%"}},[a("div",{staticStyle:{width:"100%",height:"400px"},attrs:{id:"echarts"}})]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:1==t.page,expression:"page==1"}],staticStyle:{width:"100%","text-align":"right"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[a("el-table-column",{attrs:{prop:"ZWXM",label:"中文姓名"}}),t._v(" "),a("el-table-column",{attrs:{prop:"XB_DESC",label:"性别"}}),t._v(" "),a("el-table-column",{attrs:{prop:"GJDQ_DESC",label:"国家地区"}}),t._v(" "),a("el-table-column",{attrs:{prop:"CSQR",label:"出生日期"}}),t._v(" "),a("el-table-column",{attrs:{prop:"MZ_DESC",label:"民族"}}),t._v(" "),a("el-table-column",{attrs:{prop:"CJSY_DESC",label:"出境事由"}}),t._v(" "),a("el-table-column",{attrs:{prop:"SLRQ",label:"受理日期"}}),t._v(" "),a("el-table-column",{attrs:{prop:"SLDW_TEXT",label:"受理单位"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{staticClass:"a-btn",attrs:{type:"text",title:"详情",size:"mini",icon:"el-icon-tickets"},on:{click:function(a){t.details(e.row)}}})]}}])})],1),t._v(" "),a("div",{staticClass:"middle-foot"},[a("div",{staticClass:"page-msg"},[a("div",{},[t._v("\n                      共"+t._s(t.TotalResult)+"条记录\n              ")]),t._v(" "),a("div",{},[t._v("\n                每页显示\n                "),a("el-select",{staticClass:"page-select",attrs:{placeholder:"10",size:"mini"},on:{change:function(e){t.pageSizeChange(t.pageSize)}},model:{value:t.pageSize,callback:function(e){t.pageSize=e},expression:"pageSize"}},t._l(t.options,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1),t._v("\n                条\n              ")],1),t._v(" "),a("div",{},[t._v("\n              共"+t._s(Math.ceil(t.TotalResult/t.pageSize))+"页\n              ")])]),t._v(" "),a("el-pagination",{attrs:{background:"","current-page":t.CurrentPage,"page-size":t.pageSize,layout:"prev, pager, next",total:t.TotalResult},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.CurrentPage=e}}})],1)],1)])]),t._v(" "),a("el-dialog",{attrs:{title:"临住详情",visible:t.detailsDialogVisible,"custom-class":"big_dialog","append-to-body":!1,modal:!1},on:{"update:visible":function(e){t.detailsDialogVisible=e}}},[a("LZXX",{attrs:{type:t.type,xid:t.xid,rybh:t.rybh,random:(new Date).getTime()}}),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(e){t.detailsDialogVisible=!1}}},[t._v("取 消")])],1)],1)],1)},staticRenderFns:[]},c=a("VU/8")(p,r,!1,null,null,null);e.default=c.exports}});
//# sourceMappingURL=105.19108d9fd615f7c36f68.js.map
webpackJsonp([42],{LPK7:function(t,e){},xIxQ:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a,i,l=s("bOdI"),r=s.n(l),o=s("+5I8");function n(t){var e,s,a;i.clearLayers(),e="DZMC='"+t.dm+"'",s=function(e){if(e.length>0)for(var s=0;s<e.length;s++){var a=e[s].properties.DZMC;c(e[s].geometry.coordinates.reverse(),t,a)}else window.czwvm.getXY(t.dm,function(e){if(void 0!=e&&e.ycoord>0&&e.xcoord>0){var s=[];s.push(e.ycoord),s.push(e.xcoord),c(s,t,t.dm)}})},a=new SuperMap.GetFeaturesBySQLParameters({queryParameter:{name:"dz_mlp@ORCL_gt8",attributeFilter:e},datasetNames:["ORCL_gt8:dz_mlp"],fromIndex:0,toIndex:10}),L.supermap.featureService("http://10.33.66.183:2333/iserver/services/data-gt8/rest/data").getFeaturesBySQL(a,function(t){var e=t.result.features.features;s(e)})}function c(t,e,s){var a=L.divIcon({html:"<div style='line-height:39px;text-align:center'>"+e.count+"</div>",className:"my-div-icon jwgg",iconSize:50}),l=L.marker(t,{icon:a,pcsdm:e.dm,pcsmc:s,num:e.count});i.addLayer(l),i.on("mousemove",function(t){t.layer.bindPopup("<div style='font-weight:bold; font-size: 13px; padding-bottom:5px'>"+t.layer.options.pcsmc+"</div><div>总人数："+t.layer.options.num+"</div>").openPopup()}),i.on("mouseout",function(t){t.layer.closePopup()}),l.on("click",function(t){window.czwvm.getRyxx(1,5,e.dm,s)})}var p=s("I9qK"),d={inject:["reload"],data:function(){var t;return t={CurrentPage:1,pageSize:5,TotalResult:0,pd:{},pm:{},swdw:[],tableData:[],tableqz:[],tablecrj:[],tablelz:[],show:!0,bzhshow:!1,lgshow:!1,pcs:[],xzqh:[]},r()(t,"pcs",[]),r()(t,"loading",!1),r()(t,"listpcs",[]),r()(t,"list",[]),r()(t,"diatext","标准化地址"),r()(t,"yf","Y"),r()(t,"zrq",[]),r()(t,"bzhDialogVisible",!1),r()(t,"tshow1",!0),r()(t,"tshow2",!1),r()(t,"bzhid",""),r()(t,"mc",""),r()(t,"rybh",""),r()(t,"ssfj",[]),r()(t,"centers",[]),r()(t,"sspcs",[]),t},mounted:function(){window.czwvm=this,this.$store.dispatch("getGjdq"),this.$store.dispatch("getXB"),this.$store.dispatch("getRjsy"),this.$store.dispatch("getZjzl"),this.$store.dispatch("getQzzl"),this.getSsfj(),this.getPcs(),this.getZrq(),a=L.map("mainMap",{crs:L.CRS.EPSG4326,preferCanvas:!0,center:[32.03613281,118.78211975],maxZoom:18,zoom:9,minZoom:9,zoomControl:!1,attributionControl:!1,closePopupOnClick:!1}),L.supermap.wmtsLayer("http://10.33.66.183:2333/iserver/services/map-wmts-GADT/wmts-china",{layer:"GADT",style:"default",tilematrixSet:"ChinaPublicServices_GADT",format:"image/png",transparent:!0}).addTo(a),i=L.featureGroup().addTo(a)},methods:{pageSizeChange:function(t){console.log("每页 "+t+" 条"),this.getRyxx(this.CurrentPage,t,this.bzhid,this.mc)},handleCurrentChange:function(t){this.CurrentPage=t,this.getRyxx(this.CurrentPage,this.pageSize,this.bzhid,this.mc),console.log("当前页: "+t)},details:function(t){this.tableqz=[],this.tablecrj=[],this.tablelz=[],this.diatext=t.ywxm,void 0!=t.zwxm&&""!=t.zwxm&&(this.diatext=this.diatext+"("+t.zwxm+")"),this.tshow1=!1,this.tshow2=!0,this.rybh=t.rybh,console.log(t.rybh),this.getRYinfo(this.CurrentPage1,this.pageSize1,t.rybh,1),this.getRYinfo(this.CurrentPage2,this.pageSize2,t.rybh,2),this.getRYinfo(this.CurrentPage3,this.pageSize3,t.rybh,3)},back:function(){this.diatext=this.mc,this.tshow1=!0,this.tshow2=!1},remoteMethod:function(t){var e=this;""!==t?(this.loading=!0,setTimeout(function(){e.loading=!1,e.xzqh=e.list.filter(function(e){return e.mc.toLowerCase().indexOf(t.toLowerCase())>-1})},200)):this.xzqh=[]},changtab:function(){this.show=!this.show},changeTSY:function(t){"1"==t?(this.lgshow=!0,this.bzhshow=!1):"2"==t?(this.lgshow=!1,this.bzhshow=!0):(this.lgshow=!1,this.bzhshow=!1)},getSsfj:function(){var t=this,e={operatorId:this.$store.state.uid,operatorNm:this.$store.state.uname},s=this.Global.aport2+"/data_report/selectSsfjDm";this.$api.post(s,e,function(e){t.ssfj=Object(o.b)(e.data.SSFJ,"dm")})},getPcs:function(){var t=this,e=this.Global.aport1+this.Global.pcs;this.$api.get(e,null,function(e){t.listpcs=Object(o.a)(e.data)})},getSSPCS:function(t){var e=this;this.$set(this.pd,"sspcs","");var s=[];s.push(t),console.log(s);var a={fjdmList:s};this.$api.post(this.Global.aport2+"/data_report/selectPcsDm",a,function(t){t.success&&(e.sspcs=t.data.PCS)})},getXzqh:function(){var t=this,e=this.Global.aport1+this.Global.xzqh;this.$api.get(e,null,function(e){t.list=Object(o.a)(e.data)})},getZrq:function(){var t=this,e={operatorId:this.$store.state.uid,operatorNm:this.$store.state.uname},s=this.Global.aport2+"/data_report/selectZrqDm";this.$api.post(s,e,function(e){t.zrq=Object(o.b)(e.data.ZRQ,"dm")})},doset:function(){this.reload()},getBZHDZ:function(t){var e=this,s=[],a={ssfj:this.pd.ssfj.substr(0,6),pcs:this.pd.sspcs.substr(0,12),zrq:this.pd.zrq,rzsjStart:this.pd.beginTime,rzsjEnd:this.pd.endTime},i=this.Global.aport+"/zxdt/getLSZSDJXXBZHDZList";this.$api.post(i,a,function(a){if(a.success){for(var i=a.data,l=0;l<i.length;l++)s.push(i[l]);if(0==s.length)return void e.$message.error("没有查询到数据信息! ");t&&t(s)}})},getRyxx:function(t,e,s,a,i){var l=this;1==t&&(this.CurrentPage=1,this.tableData=[],this.TotalResult=0,this.bzhid=s,this.mc=a),1!=i&&(this.pm={}),this.diatext=this.mc;var r={zjzl:this.pm.zjzl,qzzl:this.pm.qzzl,gjdq:this.pm.gjdq,jlsy:this.pm.tlsy,ywxm:this.pm.ywxm,xb:this.pm.xb,csrqStart:this.pm.begincsrq,csrqEnd:this.pm.endcsrq,currentPage:t,showCount:e,bzhdzMc:this.bzhid,ssfj:this.pd.ssfj.substr(0,6),pcs:this.pd.sspcs.substr(0,12),zrq:this.pd.zrq,rzsjStart:this.pd.beginTime,rzsjEnd:this.pd.endTime},o=this.Global.aport+"/zxdt/getLSZSDJXXRYList";this.$api.post(o,r,function(t){t.success&&(l.tableData=t.data.resultList,l.TotalResult=t.data.totalResult)}),this.bzhDialogVisible=!0},doSearch:function(){if(void 0!=this.pd.ssfj&&""!=this.pd.ssfj){switch(this.pd.ssfj.substr(0,6)){case"320116":this.centers=[32.39215480155289,118.81641980133281];break;case"320112":this.centers=[32.03613281,118.78211975];break;case"320113":this.centers=[32.137307901838255,118.9995913711449];break;case"320102":this.centers=[32.062475576087024,118.8436456413333];break;case"320106":this.centers=[32.08265178165445,118.75812113098544];break;case"320111":this.centers=[31.943626916199264,118.35524238617728];break;case"320104":this.centers=[32.01143013679143,118.81736758064937];break;case"320105":this.centers=[32.0275950355325,118.70538415685343];break;case"320114":this.centers=[31.94205101079558,118.69497417187063];break;case"320115":this.centers=[31.865733721334237,118.79198266097109];break;case"320124 ":this.centers=[31.726803147547287,119.1224894259463];break;case"320125 ":this.centers=[31.3703836314495,119.19202124153713]}if(void 0!=this.pd.beginTime||void 0!=this.pd.endTime){var t,e=parseInt(Object(p.a)(new Date,"yyyyMMdd")+"");if(void 0!=this.pd.beginTime&&parseInt(this.pd.beginTime.replace("/","").replace("/",""))>e)this.$message.error("入住开始时间不能大于当前时间！");else if(void 0!=this.pd.endTime&&parseInt(this.pd.endTime.replace("/","").replace("/",""))>e)this.$message.error("入住结束时间不能大于当前时间！");else if(void 0!=this.pd.beginTime&&void 0!=this.pd.endTime&&parseInt(this.pd.beginTime.replace("/","").replace("/",""))>parseInt(this.pd.endTime.replace("/","").replace("/","")))this.$message.error("开始时间不能大于当前时间！");else t=this.centers,i.clearLayers(),console.log(t),a.flyTo(t,10),window.czwvm.getBZHDZ(function(t){if(0!=t.length)for(var e=0;e<t.length;e++)n(t[e]);else alert("地图库中未录入该地址的坐标。")})}else this.$message.error("请选择入住开始时间或结束时间")}else this.$message.error("请选择所属分局!")},getXY:function(t,e){var s={url:this.Global.xyaddress+"?dz="+t};this.$api.post(this.Global.aport+"/zxdt/getCtUrl",s,function(t){e&&e(t.data.result)})},gotos:function(t,e){var s=this.$router.resolve({path:"/Home/RYHX_NX",query:{zjhm:t,gjdq:e}});window.open(s.href,"_blank")}}},h={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"yymain "},[a("div",{staticClass:"mapbj lzxx",attrs:{id:"mainMap"}}),t._v(" "),a("div",{staticClass:"fxleft"},[a("div",{staticClass:"fxbnt"},[t.show?a("el-button",{staticStyle:{"border-radius":"0px!important","border-width":"1px 1px 0px 1px"},attrs:{size:"mini",type:"primary",icon:"iconfont el-icon-yy-xiangshangjiantou"},on:{click:function(e){t.changtab()}}}):a("el-button",{staticStyle:{"border-radius":"0px!important"},attrs:{size:"mini",type:"primary",icon:"iconfont el-icon-yy-xiangxiajiantou"},on:{click:function(e){t.changtab()}}})],1),t._v(" "),a("el-collapse-transition",[t.show?a("div",{staticClass:"fxcont"},[a("el-row",{attrs:{gutter:1}},[a("el-col",{attrs:{span:24}},[a("span",{staticClass:"yy-input-text"},[a("font",{attrs:{color:"red"}},[t._v("*")]),t._v(" 所属分局：")],1),t._v(" "),a("el-select",{staticClass:"yy-input-input",attrs:{filterable:"",clearable:"","default-first-option":"",placeholder:"请选择",size:"small"},on:{change:function(e){t.getSSPCS(t.pd.ssfj)}},model:{value:t.pd.ssfj,callback:function(e){t.$set(t.pd,"ssfj",e)},expression:"pd.ssfj"}},t._l(t.ssfj,function(t,e){return a("el-option",{key:e,attrs:{label:t.mc,value:t.dm}})}),1)],1),t._v(" "),a("el-col",{attrs:{span:24}},[a("span",{staticClass:"yy-input-text"},[t._v("派出所：")]),t._v(" "),a("el-select",{staticClass:"yy-input-input",attrs:{filterable:"",clearable:"","default-first-option":"",placeholder:"请输入关键字",size:"small"},model:{value:t.pd.sspcs,callback:function(e){t.$set(t.pd,"sspcs",e)},expression:"pd.sspcs"}},t._l(t.sspcs,function(t,e){return a("el-option",{key:e,attrs:{label:t.mc,value:t.dm}})}),1)],1),t._v(" "),a("el-col",{attrs:{span:24}},[a("span",{staticClass:"yy-input-text"},[t._v("责任区：")]),t._v(" "),a("el-select",{staticClass:"yy-input-input",attrs:{filterable:"",clearable:"","default-first-option":"",placeholder:"请选择",size:"small"},model:{value:t.pd.zrq,callback:function(e){t.$set(t.pd,"zrq",e)},expression:"pd.zrq"}},t._l(t.zrq,function(t,e){return a("el-option",{key:e,attrs:{label:t.mc,value:t.dm}})}),1)],1),t._v(" "),a("el-col",{attrs:{span:24}},[a("span",{staticClass:"yy-input-text"},[a("font",{attrs:{color:"red"}},[t._v("*")]),t._v(" 入住时间：")],1),t._v(" "),a("el-date-picker",{staticClass:"yy-input-input",attrs:{format:"yyyy-MM-dd",type:"date",size:"small","value-format":"yyyy/MM/dd",placeholder:"开始时间"},model:{value:t.pd.beginTime,callback:function(e){t.$set(t.pd,"beginTime",e)},expression:"pd.beginTime"}})],1),t._v(" "),a("el-col",{attrs:{span:24}},[a("span",{staticClass:"yy-input-text"}),t._v(" "),a("el-date-picker",{staticClass:"yy-input-input",attrs:{format:"yyyy-MM-dd",type:"date",size:"small","value-format":"yyyy/MM/dd",placeholder:"结束时间"},model:{value:t.pd.endTime,callback:function(e){t.$set(t.pd,"endTime",e)},expression:"pd.endTime"}})],1)],1),t._v(" "),a("el-row",{attrs:{type:"flex"}},[a("el-col",{staticStyle:{"text-align":"center"},attrs:{span:24}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.doSearch()}}},[t._v("查询")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.doset()}}},[t._v("重置")])],1)],1)],1):t._e()])],1),t._v(" "),a("div",{staticClass:"bghome"},[a("el-dialog",{attrs:{title:t.diatext,visible:t.bzhDialogVisible},on:{"update:visible":function(e){t.bzhDialogVisible=e}}},[t.tshow1?a("div",{key:Math.random()},[a("el-row",{attrs:{align:"center",gutter:2}},[a("el-col",{staticClass:"input-item",attrs:{sm:24,md:12,lg:8}},[a("span",{staticClass:"input-text"},[t._v("证件种类：")]),t._v(" "),a("el-select",{staticClass:"input-input",attrs:{filterable:"",clearable:"","default-first-option":"",placeholder:"请选择",size:"small"},model:{value:t.pm.zjzl,callback:function(e){t.$set(t.pm,"zjzl",e)},expression:"pm.zjzl"}},t._l(t.$store.state.zjzl,function(t,e){return a("el-option",{key:e,attrs:{label:t.dm+" - "+t.mc,value:t.dm}})}),1)],1),t._v(" "),a("el-col",{staticClass:"input-item",attrs:{sm:24,md:12,lg:8}},[a("span",{staticClass:"input-text"},[t._v("签证种类：")]),t._v(" "),a("el-select",{staticClass:"input-input",attrs:{filterable:"",clearable:"","default-first-option":"",placeholder:"请选择",size:"small"},model:{value:t.pm.qzzl,callback:function(e){t.$set(t.pm,"qzzl",e)},expression:"pm.qzzl"}},t._l(t.$store.state.qzzl,function(t,e){return a("el-option",{key:e,attrs:{label:t.dm+" - "+t.mc,value:t.dm}})}),1)],1),t._v(" "),a("el-col",{staticClass:"input-item",attrs:{sm:24,md:12,lg:8}},[a("span",{staticClass:"input-text"},[t._v("国家地区：")]),t._v(" "),a("el-select",{staticClass:"input-input",attrs:{filterable:"",clearable:"","default-first-option":"",placeholder:"请选择",size:"small"},model:{value:t.pm.gjdq,callback:function(e){t.$set(t.pm,"gjdq",e)},expression:"pm.gjdq"}},t._l(t.$store.state.gjdq,function(t,e){return a("el-option",{key:e,attrs:{label:t.dm+" - "+t.mc,value:t.dm}})}),1)],1),t._v(" "),a("el-col",{staticClass:"input-item",attrs:{sm:24,md:12,lg:8}},[a("span",{staticClass:"input-text"},[t._v("停留事由：")]),t._v(" "),a("el-select",{staticClass:"input-input",attrs:{filterable:"",clearable:"","default-first-option":"",placeholder:"请选择",size:"small"},model:{value:t.pm.tlsy,callback:function(e){t.$set(t.pm,"tlsy",e)},expression:"pm.tlsy"}},t._l(t.$store.state.rjsy,function(t,e){return a("el-option",{key:e,attrs:{label:t.dm+" - "+t.mc,value:t.dm}})}),1)],1),t._v(" "),a("el-col",{staticClass:"input-item",attrs:{sm:24,md:12,lg:8}},[a("span",{staticClass:"input-text"},[t._v("英文姓名：")]),t._v(" "),a("el-input",{staticClass:"input-input",attrs:{placeholder:"请输入内容",size:"small"},model:{value:t.pm.ywxm,callback:function(e){t.$set(t.pm,"ywxm",e)},expression:"pm.ywxm"}})],1),t._v(" "),a("el-col",{staticClass:"input-item",attrs:{sm:24,md:12,lg:8}},[a("span",{staticClass:"input-text"},[t._v("性别：")]),t._v(" "),a("el-select",{staticClass:"input-input",attrs:{filterable:"",clearable:"","default-first-option":"",placeholder:"请选择",size:"small"},model:{value:t.pm.xb,callback:function(e){t.$set(t.pm,"xb",e)},expression:"pm.xb"}},t._l(t.$store.state.xb,function(t,e){return a("el-option",{key:e,attrs:{label:t.dm+" - "+t.mc,value:t.dm}})}),1)],1),t._v(" "),a("el-col",{staticClass:"input-item",attrs:{sm:24,md:12,lg:8}},[a("span",{staticClass:"input-text"},[t._v("出生日期：")]),t._v(" "),a("div",{staticClass:"input-input t-flex t-date"},[a("el-date-picker",{attrs:{format:"yyyy-MM-dd",type:"date",size:"small","value-format":"yyyy/MM/dd",placeholder:"开始时间"},model:{value:t.pm.begincsrq,callback:function(e){t.$set(t.pm,"begincsrq",e)},expression:"pm.begincsrq"}}),t._v(" "),a("span",{staticClass:"septum"},[t._v("-")]),t._v(" "),a("el-date-picker",{attrs:{format:"yyyy-MM-dd",type:"date",size:"small","value-format":"yyyy/MM/dd",placeholder:"结束时间"},model:{value:t.pm.endcsrq,callback:function(e){t.$set(t.pm,"endcsrq",e)},expression:"pm.endcsrq"}})],1)]),t._v(" "),a("el-col",{staticClass:"input-item",attrs:{sm:24,md:12,lg:8}},[t._v("\n               "),a("el-button",{staticClass:"mb-15",attrs:{type:"primary",size:"mini"},on:{click:function(e){t.getRyxx(t.CurrentPage,t.pageSize,t.bzhid,t.mc,1)}}},[t._v("查询")])],1)],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[a("el-table-column",{attrs:{label:"照片"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.zp?a("div",[a("el-popover",{attrs:{placement:"right",title:"",trigger:"hover"}},[a("img",{staticStyle:{"max-width":"700px","max-height":"700px"},attrs:{src:e.row.zp}}),t._v(" "),a("img",{attrs:{slot:"reference",src:e.row.zp,alt:e.row.zp,width:"50",height:"50"},slot:"reference"})])],1):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"ywxm",label:"英文姓名"}}),t._v(" "),a("el-table-column",{attrs:{prop:"zwxm",label:"中文姓名"}}),t._v(" "),a("el-table-column",{attrs:{prop:"xb",label:"性别"}}),t._v(" "),a("el-table-column",{attrs:{prop:"csrq",label:"出生日期"}}),t._v(" "),a("el-table-column",{attrs:{prop:"djrq",label:"登记日期"}}),t._v(" "),a("el-table-column",{attrs:{prop:"gjdq",label:"国家地区"}}),t._v(" "),a("el-table-column",{attrs:{prop:"zjzl",label:"证件种类"}}),t._v(" "),a("el-table-column",{attrs:{prop:"zjhm",label:"证件号码"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{color:"yellow",cursor:"pointer"},on:{click:function(s){t.gotos(e.row.zjhm,e.row.gjdqdm)}}},[t._v(t._s(e.row.zjhm))])]}}])})],1),t._v(" "),a("div",{staticClass:"middle-foot mt-10"},[a("div",{staticClass:"page-msg"},[a("div",{staticClass:"crrcolor"},[t._v("\n                          共"+t._s(t.TotalResult)+"条记录\n                          ")])]),t._v(" "),a("el-pagination",{attrs:{background:"","current-page":t.CurrentPage,"page-size":t.pageSize,layout:"prev, pager, next",total:t.TotalResult},on:{"current-change":t.handleCurrentChange}})],1)],1):t._e(),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("img",{staticStyle:{cursor:"pointer"},attrs:{src:s("JmKm"),border:"0"},on:{click:function(e){t.bzhDialogVisible=!1}}})]),t._v(" "),a("div",{staticClass:"arrow_line",staticStyle:{left:"0px",top:"0px","border-bottom-width":"0","border-right-width":"0"}}),t._v(" "),a("div",{staticClass:"arrow_line",staticStyle:{right:"0px",top:"0px","border-bottom-width":"0","border-left-width":"0"}}),t._v(" "),a("div",{staticClass:"arrow_line",staticStyle:{left:"0px",bottom:"0px","border-top-width":"0","border-right-width":"0"}}),t._v(" "),a("div",{staticClass:"arrow_line",staticStyle:{right:"0px",bottom:"0px","border-top-width":"0","border-left-width":"0"}})])],1)])},staticRenderFns:[]};var u=s("VU/8")(d,h,!1,function(t){s("LPK7"),s("xgrJ")},"data-v-6c320d58",null);e.default=u.exports},xgrJ:function(t,e){}});
//# sourceMappingURL=42.2b43239ae6eff79197b7.js.map
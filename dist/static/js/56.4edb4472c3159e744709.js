webpackJsonp([56],{ZhGN:function(t,e){},nADd:function(t,e){},tWDE:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,o,s,r=a("//Fk"),n=a.n(r),l=a("+5I8"),c=a("bOdI"),d=a.n(c),u=[],h=0;function p(t,e,a,i){if(u.push(e),u.length==h)window.ffvm.getXXDZ(t,function(i){for(var o=0;o<i.length;o++)m("dz_mlp","DZMC='"+t+"'",i[o],0,5,function(t,i){if(t.length>0)for(var o=0;o<t.length;o++)f(t[o].geometry.coordinates.reverse(),i.dm,i.dm,e,i.count,a);else window.ffvm.getXY2(i,function(t,e,i){if(void 0!=t&&t.ycoord>0&&t.xcoord>0){var o=[];o.push(t.ycoord),o.push(t.xcoord),f(o,e,e,u,i,a)}})})})}function f(t,e,a,i,o,s){!function(t,e,a,i,o,s,r){for(var n=0,l=0;l<a.length;l++){var c=a[l][0],d=a[l][1];l+1;var u=L.polyline([[t,e],[c,d]]),h=new SuperMap.MeasureParameters(u);L.supermap.measureService("http://10.33.66.183:2334/iserver/services/map-world/rest/maps/World").measureDistance(h,function(l){var c=parseInt(l.result.distance/1e3);c>window.ffvm.jlsz&&(n+=1)==a.length&&v([t,e],s,i,r,o,c)})}}(t[0],t[1],i,e,a,o,s)}function v(t,e,a,i,s,r){!function(t,e,a,i){var s=L.divIcon({html:"<div style='line-height:38px;text-align:center;'>"+e+"</div>",className:"my-div-icon cqred",iconSize:50}),r=L.marker(t,{icon:s,pcsdm:a,pcsmc:i,num:e});o.addLayer(r),o.on("mousemove",function(t){t.layer.bindPopup("<div style=''>"+t.layer.options.pcsmc+"</div>").openPopup()}),o.on("mouseout",function(t){t.layer.closePopup()}),r.on("click",function(t){window.ffvm.getRyxx(1,5,a,a)})}(t,e,a,"<div style='line-height:25px;'>距离<font color=blue>"+i+"</font>： 大约 <font style='color:red;font-weight:bold;font-size:16px;'>"+r+"</font>  公里<br/>"+s+" <br/>总人数："+e+"</div>")}function m(t,e,a,i,o,s){var r=new SuperMap.GetFeaturesBySQLParameters({queryParameter:{name:t+"@ORCL_gt8",attributeFilter:e},datasetNames:["ORCL_gt8:"+t],fromIndex:0,toIndex:10});L.supermap.featureService("http://10.33.66.183:2333/iserver/services/data-gt8/rest/data").getFeaturesBySQL(r,function(t){var e=t.result.features.features;s&&s(e,a)})}var g={data:function(){return{CurrentPage:1,pageSize:5,TotalResult:0,pd:{},swdw:[],show:!0,bzhshow:!1,lgshow:!1,jlsz:10,pcs:[],xzqh:[],tableData:[],datastr:[],bzhDialogVisible:!1,diatext:"标准化地址",bzhid:"",mc:"",lrdw:"",iid:"",xydata:[],cuint:0}},mounted:function(){var t;window.ffvm=this,i=L.map("mainMap",(t={crs:L.CRS.EPSG4326,preferCanvas:!0,center:[32.03613281,118.78211975],maxZoom:18,zoom:10},d()(t,"maxZoom",16),d()(t,"zoomControl",!1),d()(t,"attributionControl",!1),d()(t,"closePopupOnClick",!1),t)),L.supermap.wmtsLayer("http://10.33.66.183:2333/iserver/services/map-wmts-GADT/wmts-china",{layer:"GADT",style:"default",tilematrixSet:"ChinaPublicServices_GADT",format:"image/png",transparent:!0}).addTo(i),o=L.featureGroup().addTo(i),s=L.featureGroup().addTo(i),this.getGX()},methods:{pageSizeChange:function(t){this.getRyxx(this.CurrentPage,t,this.bzhid,this.mc,this.lrdw),console.log("每页 "+t+" 条")},handleCurrentChange:function(t){this.getRyxx(t,this.pageSize,this.bzhid,this.mc,this.lrdw),console.log("当前页: "+t)},changtab:function(){this.show=!this.show},changeTSY:function(t){"1"==t?(this.lgshow=!0,this.bzhshow=!1):"2"==t?(this.lgshow=!1,this.bzhshow=!0):(this.lgshow=!1,this.bzhshow=!1)},getPcs:function(){var t=this,e=this.Global.aport1+this.Global.pcs;this.$api.get(e,null,function(e){t.pcs=Object(l.a)(e.data)})},getXzqh:function(){var t=this,e=this.Global.aport1+this.Global.xzqh;this.$api.get(e,null,function(e){t.xzqh=Object(l.a)(e.data)})},doset:function(){this.$set(this.pd,"dwlb","")},getGX:function(){var t=this;this.$api.get(this.Global.aport1+"/servicemap/getUniversity",null,function(e){t.datastr=e.data})},getInfo:function(t,e){void 0!=this.jlsz?(this.show=!this.show,this.iid=e,function(t,e){o.clearLayers(),s.clearLayers(),window.ffvm.getxxinfo(t,function(a){if(a.length>0){u=[],h=a.length;for(var i=0;i<a.length;i++){var o=a[i].DZXQ;window.ffvm.getXY(o,function(a){var i=[];if(void 0!=a&&a.ycoord>0&&a.xcoord>0){i.push(a.ycoord+""),i.push(a.xcoord+"");var o="<div style='line-height:25px;'>学校："+e+" <br/>地址："+a.src_addr+"</div>",r=L.marker([i[0],i[1]]).bindPopup(o);s.addLayer(r),p(t,i,e,a.src_addr)}})}}})}(t,e)):this.$message.error("距离设置不能为空！")},getxxinfo:function(t,e){var a={xxbh:t},i=this.Global.aport+"/zxdt/getXXDZList";this.$api.post(i,a,function(t){t.success&&e&&e(t.data)})},getXY1:function(t,e){for(var a=this,i=function(t){return new n.a(function(e,i){var o={url:a.Global.xyaddress+"?dz="+t};a.$api.post(a.Global.aport+"/zxdt/getCtUrl",o,function(a){var i=[];i.push(a.data.result.ycoord),i.push(a.data.result.xcoord);var o={};o.dm=t,o.zb=i,e(o)})})},o=[],s=0;s<t.length;s++)o.push(i(t[s].DZXQ)),console.log(i(t[s].DZXQ));e&&e(o)},getXXDZ:function(t,e){var a={xxdm:t,xxmc:this.iid,sf:"61"};this.$api.post(this.Global.aport+"/ywczdt/getFfjlBzhdz",a,function(t){e&&e(t.data)})},getXY:function(t,e){var a={url:this.Global.xyaddress+"?dz="+t};this.$api.post(this.Global.aport+"/zxdt/getCtUrl",a,function(t){e&&e(t.data.result)})},getRyxx:function(t,e,a,i){var o=this;1==t&&(this.tableData=[],this.TotalResult=0,this.CurrentPage=1),this.bzhid=a,this.mc=i,this.diatext=this.mc;var s={currentPage:t,showCount:e,xxdz:this.bzhid,fwcs:this.iid,sf:"61"},r=this.Global.aport+"/ywczdt/getCZDJXXRYList";this.$api.post(r,s,function(t){t.success&&(o.tableData=t.data.resultList,o.TotalResult=t.data.totalResult)}),this.bzhDialogVisible=!0},getXY2:function(t,e){var a={url:this.Global.xyaddress+"?dz="+t.dm};this.$api.post(this.Global.aport+"/zxdt/getCtUrl",a,function(a){e&&e(a.data.result,t.dm,t.count)})},gotos:function(t,e){var a=this.$router.resolve({path:"/Home/RYHX_NX",query:{zjhm:t,gjdq:e}});window.open(a.href,"_blank")}}},b={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"yymain "},[i("div",{staticClass:"mapbj lzxx",attrs:{id:"mainMap"}}),t._v(" "),i("div",{staticClass:"fxleft"},[i("div",{staticClass:"fxbnt"},[t.show?i("el-button",{staticStyle:{"border-radius":"0px!important","border-width":"1px 1px 0px 1px"},attrs:{size:"mini",type:"primary",icon:"iconfont el-icon-yy-xiangshangjiantou"},on:{click:function(e){t.changtab()}}}):i("el-button",{staticStyle:{"border-radius":"0px!important"},attrs:{size:"mini",type:"primary",icon:"iconfont el-icon-yy-xiangxiajiantou"},on:{click:function(e){t.changtab()}}})],1),t._v(" "),i("el-collapse-transition",[t.show?i("div",{staticClass:"fxcont"},[i("el-row",{attrs:{gutter:1}},[i("el-col",{attrs:{span:24}},[i("span",{staticClass:"input-text",staticStyle:{width:"25%!important"}},[t._v("距离设置：")]),t._v(" "),i("el-input-number",{attrs:{"controls-position":"right",size:"mini",min:5,max:10},model:{value:t.jlsz,callback:function(e){t.jlsz=e},expression:"jlsz"}}),t._v(" "),i("span",{staticStyle:{"font-size":"12px"}},[t._v("公里")])],1),t._v(" "),i("el-col",{attrs:{span:24}},[i("span",{staticStyle:{"font-size":"12px",color:"red"}},[t._v("* 距离设置区间5-10")])])],1),t._v(" "),i("div",{staticClass:"resultpaneltitle"},[t._v("南京高校列表")]),t._v(" "),i("div",{staticStyle:{"max-height":"500px","overflow-y":"scroll"}},t._l(t.datastr,function(e){return i("div",{attrs:{id:"resultpanel"}},[i("div",{staticClass:"fflist",on:{click:function(a){t.getInfo(e.jgid,e.mc)}}},[t._v("\n                  "+t._s(e.mc)+"\n                 ")])])}),0)],1):t._e()])],1),t._v(" "),i("div",{staticClass:"bghome"},[i("el-dialog",{attrs:{title:t.diatext,visible:t.bzhDialogVisible},on:{"update:visible":function(e){t.bzhDialogVisible=e}}},[i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[i("el-table-column",{attrs:{label:"照片"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.zp?i("div",[i("el-popover",{attrs:{placement:"right",title:"",trigger:"hover"}},[i("img",{staticStyle:{"max-width":"700px","max-height":"700px"},attrs:{src:e.row.zp}}),t._v(" "),i("img",{attrs:{slot:"reference",src:e.row.zp,alt:e.row.zp,width:"50",height:"50"},slot:"reference"})])],1):t._e()]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"sf",label:"身份"}}),t._v(" "),i("el-table-column",{attrs:{prop:"fwcs",label:"服务处所"}}),t._v(" "),i("el-table-column",{attrs:{prop:"ywxm",label:"英文姓名"}}),t._v(" "),i("el-table-column",{attrs:{prop:"zwxm",label:"中文姓名"}}),t._v(" "),i("el-table-column",{attrs:{prop:"xb",label:"性别",width:"60"}}),t._v(" "),i("el-table-column",{attrs:{prop:"csrq",label:"出生日期"}}),t._v(" "),i("el-table-column",{attrs:{prop:"djrq",label:"登记日期"}}),t._v(" "),i("el-table-column",{attrs:{prop:"gjdq",label:"国家地区"}}),t._v(" "),i("el-table-column",{attrs:{prop:"zjzl",label:"证件种类"}}),t._v(" "),i("el-table-column",{attrs:{prop:"zjhm",label:"证件号码"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{staticStyle:{color:"yellow",cursor:"pointer"},on:{click:function(a){t.gotos(e.row.zjhm,e.row.gjdqdm)}}},[t._v(t._s(e.row.zjhm))])]}}])})],1),t._v(" "),i("div",{staticClass:"middle-foot mt-10"},[i("div",{staticClass:"page-msg"},[i("div",{staticClass:"crrcolor"},[t._v("\n              共"+t._s(t.TotalResult)+"条记录\n              ")]),t._v(" "),i("div",{staticClass:"crrcolor"}),t._v(" "),i("div",{staticClass:"crrcolor"})]),t._v(" "),i("el-pagination",{attrs:{background:"","current-page":t.CurrentPage,"page-size":t.pageSize,layout:"prev, pager, next",total:t.TotalResult},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.CurrentPage=e}}})],1),t._v(" "),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("img",{staticStyle:{cursor:"pointer"},attrs:{src:a("JmKm"),border:"0"},on:{click:function(e){t.bzhDialogVisible=!1}}})]),t._v(" "),i("div",{staticClass:"arrow_line",staticStyle:{left:"0px",top:"0px","border-bottom-width":"0","border-right-width":"0"}}),t._v(" "),i("div",{staticClass:"arrow_line",staticStyle:{right:"0px",top:"0px","border-bottom-width":"0","border-left-width":"0"}}),t._v(" "),i("div",{staticClass:"arrow_line",staticStyle:{left:"0px",bottom:"0px","border-top-width":"0","border-right-width":"0"}}),t._v(" "),i("div",{staticClass:"arrow_line",staticStyle:{right:"0px",bottom:"0px","border-top-width":"0","border-left-width":"0"}})],1)],1)])},staticRenderFns:[]};var x=a("VU/8")(g,b,!1,function(t){a("nADd"),a("ZhGN")},"data-v-2cadff6b",null);e.default=x.exports}});
//# sourceMappingURL=56.4edb4472c3159e744709.js.map
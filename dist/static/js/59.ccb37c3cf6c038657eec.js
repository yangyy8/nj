webpackJsonp([59],{"1CE3":function(t,e){},"79vk":function(t,e){},ENKA:function(t,e,a){"use strict";var r,o,s,i;Object.defineProperty(e,"__esModule",{value:!0});var n,l=[],c=[32.03613281,118.78211975];function u(t,e,a,u){n=u;!function(t,e){var a=new SuperMap.GetFeaturesBySQLParameters({queryParameter:{name:"gajg_fj_3201_pg@ORCL_gt8",attributeFilter:"DWBM='"+t+"000000'"},datasetNames:["ORCL_gt8:gajg_fj_3201_pg"]});L.supermap.featureService("http://10.33.66.183:2333/iserver/services/data-gt8/rest/data").getFeaturesBySQL(a,function(t){for(var a=t.result.features,r=a.features,o=0;o<r.length;o++){var s=L.latLngBounds(f(r[o].geometry.coordinates)).getCenter();(c=[]).push(s.lat),c.push(s.lng)}e(c)})}(t,function(n){r=L.map("mainMap",{crs:L.CRS.EPSG4326,preferCanvas:!0,center:n,maxZoom:12,minZoom:9,zoom:10,zoomControl:!1,attributionControl:!1,closePopupOnClick:!1}),L.supermap.wmtsLayer("http://10.33.66.183:2333/iserver/services/map-wmts-GADT/wmts-china",{layer:"GADT",style:"default",tilematrixSet:"ChinaPublicServices_GADT",format:"image/png",transparent:!0}).addTo(r),o=L.featureGroup().addTo(r),d(t,e,a),r.on("zoomend",function(n){n.target.getZoom()<11&&(o.clearLayers(),s.clearLayers(),i.clearLayers(),function(){for(var t=0;t<l.length;t++)r.removeLayer(l[t])}(),d(t,e,a))})})}function d(t,e,a){var o=new SuperMap.GetFeaturesBySQLParameters({queryParameter:{name:"gajg_fj_3201_pg@ORCL_gt8",attributeFilter:"DWBM='"+t+"000000'"},datasetNames:["ORCL_gt8:gajg_fj_3201_pg"]});L.supermap.featureService("http://10.33.66.183:2333/iserver/services/data-gt8/rest/data").getFeaturesBySQL(o,function(t){for(var e=t.result.features.features,a=[],o=0;o<e.length;o++){var i=L.polygon(f(e[o].geometry.coordinates),{color:"red",fillColor:"red",fillOpacity:.2,className:"pcs-layer"});a.push(i);var n=L.latLngBounds(f(e[o].geometry.coordinates)).getCenter();(c=[]).push(n.lat),c.push(n.lng)}s=L.layerGroup(a),r.addLayer(s)}),function(t){var e=new SuperMap.GetFeaturesBySQLParameters({queryParameter:{name:"gajg_fj_3201_pg@ORCL_gt8",attributeFilter:"DWBM='"+t.dm+"'"},datasetNames:["ORCL_gt8:gajg_fj_3201_pg"]});L.supermap.featureService("http://10.33.66.183:2333/iserver/services/data-gt8/rest/data").getFeaturesBySQL(e,function(e){for(var a=e.result.features.features,r=0;r<a.length;r++){var o=L.latLngBounds(f(a[r].geometry.coordinates)).getCenter();"320112000000"==t.dm?p([o.lat+.05,o.lng-.07],t):p([o.lat,o.lng],t)}})}([{dm:t+"000000",mc:e,num:a}][0])}function p(t,e){var a=L.divIcon({html:"<div style='line-height:48px;text-align:center;font-size:16px;'>"+e.num+"</div>",className:"my-div-icon",iconSize:60}),i=L.marker(t,{icon:a,pcsdm:e.dm,pcsmc:e.mc,num:e.num});o.addLayer(i),o.on("mousemove",function(t){t.layer.bindPopup("<div style='font-weight:bold; font-size: 13px; padding-bottom:5px'>"+t.layer.options.pcsmc+"</div><div>总人数："+t.layer.options.num+"</div>").openPopup()}),o.on("mouseout",function(t){t.layer.closePopup()}),r.on("zoomend",function(t){if(t.target.getZoom()>10){o.clearLayers(),s.clearLayers();window.vm.getpcs(e.dm,function(t){if(void 0!=t)for(var e=0;e<t.length;e++)g(t[e])})}})}function g(t){var e=new SuperMap.GetFeaturesBySQLParameters({queryParameter:{name:"gajg_pcs_3201_pg@ORCL_gt8",attributeFilter:"DWBM='"+t.dm+"'"},datasetNames:["ORCL_gt8:gajg_pcs_3201_pg"]});L.supermap.featureService("http://10.33.66.183:2333/iserver/services/data-gt8/rest/data").getFeaturesBySQL(e,function(e){for(var a=e.result.features.features,o=[],s=0;s<a.length;s++){var n=L.polygon(f(a[s].geometry.coordinates),{color:"red",fillColor:"red",fillOpacity:.2,className:"pcs-layer"});o.push(n),i=L.layerGroup(o),l.push(i),r.addLayer(i);var c=L.latLngBounds(f(a[s].geometry.coordinates)).getCenter();m([c.lat,c.lng],t)}})}function m(t,e){var a=L.divIcon({html:"<div style='line-height:40px;text-align:center;font-weight:bold'>"+e.count+"</div>",className:"my-div-icon icon1",iconSize:50}),i=L.marker(t,{icon:a,pcsdm:e.dm,pcsmc:e.mc,num:e.count});o.addLayer(i),o.on("mousemove",function(t){t.layer.bindPopup("<div style='font-weight:bold; font-size: 13px; padding-bottom:5px'>"+t.layer.options.pcsmc+"</div><div>总人数："+t.layer.options.num+"</div>").openPopup()}),o.on("mouseout",function(t){t.layer.closePopup()}),r.on("zoomend",function(t){var a=t.target.getZoom();if(console.log("sz",a),a>11){o.clearLayers(),s.clearLayers();window.vm.getbzhdz(e.dm,function(t){for(var e=0;e<t.length;e++)h(t[e])})}})}function h(t){o.clearLayers(),s.clearLayers();var e,a,r,i="JWPTBH='"+t.dm+"'";"C"==n&&(i="DZMC='"+t.dm.split("号")[0]+"号'");e=i,a=function(e){if(e.length>0)for(var a=0;a<e.length;a++){var r=e[a].properties.DZMC;v(e[a].geometry.coordinates.reverse(),t,r)}},r=new SuperMap.GetFeaturesBySQLParameters({queryParameter:{name:"dz_mlp@ORCL_gt8",attributeFilter:e},datasetNames:["ORCL_gt8:dz_mlp"],fromIndex:0,toIndex:10}),L.supermap.featureService("http://10.33.66.183:2333/iserver/services/data-gt8/rest/data").getFeaturesBySQL(r,function(t){var e=t.result.features.features;a(e)})}function v(t,e,a){var r=L.divIcon({html:"<div style='line-height:40px;text-align:center;font-weight:bold'>"+e.count+"</div>",className:"my-div-icon icon2",iconSize:50}),s=L.marker(t,{icon:r,pcsdm:e.dm,pcsmc:a,num:e.count});o.addLayer(s),o.on("mousemove",function(t){t.layer.bindPopup("<div style='font-weight:bold; font-size: 13px; padding-bottom:5px'>"+t.layer.options.pcsmc+"</div><div>总人数："+t.layer.options.num+"</div>").openPopup()}),o.on("mouseout",function(t){t.layer.closePopup()}),s.on("click",function(t){window.vm.getRyxx(1,5,e.dm,a,"")})}var f=function(t){for(var e=[],a=0;a<t.length;a++){for(var r=[],o=0;o<t[a].length;o++){for(var s=[],i=0;i<t[a][o].length;i++){var n=[],l=t[a][o][i][0],c=t[a][o][i][0],u=t[a][o][i][1];l=c,c=u,u=l,n.push(c,u),s.push(n)}r.push(s)}e.push(r)}return e},y={data:function(){return{CurrentPage:1,pageSize:5,TotalResult:0,xzqh:"",pd:{},diatext:"标准化地址",tableData:[],options:this.pl.options,bzhDialogVisible:!1,lrdw:"320115",lrdwmc:"江宁区",rs:"11523",type:"C",yf:"Y",sevalue:[],bzhid:"",czshow:!1}},mounted:function(){window.vm=this,u(this.lrdw,this.lrdwmc,this.rs,this.type),"C"==this.type?this.czshow=!0:this.czshow=!1},methods:{pageSizeChange:function(t){this.getRyxx(this.CurrentPage,t,this.bzhid,this.mc,this.lrdw),console.log("每页 "+t+" 条")},handleCurrentChange:function(t){this.getRyxx(t,this.pageSize,this.bzhid,this.mc,this.lrdw),console.log("当前页: "+t)},getpcs:function(t,e){var a=[],r={lrdw:this.lrdw,yf:this.yf},o=this.Global.aport+"/zxdt/getLSZSDJXXPCSList";"C"==this.type&&(r={lrdw:this.lrdw},o=this.Global.aport+"/zxdt/getCZDJXXPCSList"),this.$api.post(o,r,function(t){if(t.success){for(var r=t.data,o=0;o<r.length;o++)a.push(r[o]);e&&e(a)}})},getbzhdz:function(t,e){var a=[],r={yf:this.yf,lrdw:t},o=this.Global.aport+"/zxdt/getLSZSDJXXBZHDZList";"C"==this.type&&(r={sspcs:t},o=this.Global.aport+"/zxdt/getCZDJXXJZDList"),this.$api.post(o,r,function(t){if(t.success){for(var r=t.data,o=0;o<r.length;o++)a.push(r[o]);e&&e(a)}})},getRyxx:function(t,e,a,r,o){var s=this;1==t&&(this.CurrentPage=1),this.bzhid=a,this.mc=r,this.lrdw=o,this.diatext=this.mc;var i={currentPage:t,showCount:e,dzdtid:this.bzhid,yf:this.yf,lrdw:this.lrdw},n=this.Global.aport+"/zxdt/getLSZSDJXXRYList";"C"==this.type&&(i={currentPage:t,showCount:e,xxdz:this.bzhid},n=this.Global.aport+"/zxdt/getCZDJXXRYList"),this.$api.post(n,i,function(t){t.success&&(s.tableData=t.data.resultList,s.TotalResult=t.data.totalResult)}),this.bzhDialogVisible=!0}}},b={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"bghome bgh1"},[r("div",{staticClass:"mapbj",attrs:{id:"mainMap"}}),t._v(" "),r("el-dialog",{attrs:{title:t.diatext,visible:t.bzhDialogVisible},on:{"update:visible":function(e){t.bzhDialogVisible=e}}},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[t.czshow?r("el-table-column",{attrs:{prop:"zp",label:"照片"}}):t._e(),t._v(" "),t.czshow?r("el-table-column",{attrs:{prop:"sf",label:"身份"}}):t._e(),t._v(" "),t.czshow?r("el-table-column",{attrs:{prop:"dw",label:"单位"}}):t._e(),t._v(" "),r("el-table-column",{attrs:{prop:"ywxm",label:"英文姓名"}}),t._v(" "),r("el-table-column",{attrs:{prop:"zwxm",label:"中文姓名"}}),t._v(" "),r("el-table-column",{attrs:{prop:"xb",label:"性别"}}),t._v(" "),r("el-table-column",{attrs:{prop:"csrq",label:"出生日期"}}),t._v(" "),r("el-table-column",{attrs:{prop:"gjdq",label:"国家地区"}}),t._v(" "),r("el-table-column",{attrs:{prop:"zjzl",label:"证件种类"}}),t._v(" "),r("el-table-column",{attrs:{prop:"zjhm",label:"证件号码"}})],1),t._v(" "),r("div",{staticClass:"middle-foot mt-10"},[r("div",{staticClass:"page-msg"},[r("div",{staticClass:"crrcolor"},[t._v("\n               共"+t._s(t.TotalResult)+"条记录\n               ")]),t._v(" "),r("div",{staticClass:"crrcolor"}),t._v(" "),r("div",{staticClass:"crrcolor"})]),t._v(" "),r("el-pagination",{attrs:{background:"","current-page":t.CurrentPage,"page-size":t.pageSize,layout:"prev, pager, next",total:t.TotalResult},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.CurrentPage=e}}})],1),t._v(" "),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("img",{staticStyle:{cursor:"pointer"},attrs:{src:a("JmKm"),border:"0"},on:{click:function(e){t.bzhDialogVisible=!1}}})]),t._v(" "),r("div",{staticClass:"arrow_line",staticStyle:{left:"0px",top:"0px","border-bottom-width":"0","border-right-width":"0"}}),t._v(" "),r("div",{staticClass:"arrow_line",staticStyle:{right:"0px",top:"0px","border-bottom-width":"0","border-left-width":"0"}}),t._v(" "),r("div",{staticClass:"arrow_line",staticStyle:{left:"0px",bottom:"0px","border-top-width":"0","border-right-width":"0"}}),t._v(" "),r("div",{staticClass:"arrow_line",staticStyle:{right:"0px",bottom:"0px","border-top-width":"0","border-left-width":"0"}})],1)],1)},staticRenderFns:[]};var _=a("VU/8")(y,b,!1,function(t){a("79vk"),a("1CE3")},"data-v-2f65444c",null);e.default=_.exports}});
//# sourceMappingURL=59.ccb37c3cf6c038657eec.js.map